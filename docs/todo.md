# TODO

## Phase 0 · 基础整理
- [ ] 重新审阅 `archive/20251109_cleanup/` 目录，确认需要保留的遗留功能与可复用模块
- [ ] 评估备份数据完整性（`backups/2023年6月` 等）并记录样本清单
- [ ] 梳理现有依赖与环境需求，为后续精简 requirements 做准备

## Phase 1a · Evernote 导入骨架
- [x] 起草统一的数据模型草图（实体、字段、版本控制方案）
- [x] 设计 Agent 任务契约：输入事件、处理步骤、输出结构、失败重试策略
- [x] 编写 Evernote 样本分析脚本，提取多格式特征与常见异常
- [x] 实现 Evernote Ingest Agent：格式探测 → 清洗 → 结构化输出 → 存储落盘
- [x] 初始化存储骨架（PostgreSQL schema / JSON 存储布局）
- [x] 建立处理日志与 `processing_journal` 写入机制，覆盖成功与失败路径
- [x] 提供最小验证入口（CLI 或简易脚本）展示导入统计与样例内容

## Phase 1b · LLM 工具链与增强清洗
- [x] 引入 LLM 调度器，支持按任务切换模型与自动重跑
- [x] 定义 Prompt 模板与输出校验流程（摘要、关键词、行动项）
- [x] 将 Phase 1a 清洗/分类步骤迁移到 LLM Agent，并实现降级方案
- [x] 补全清洗规则库，针对常见文本来源（论坛、社媒、AI 输出等）编写策略
- [x] 建立内容质量评估指标（长度、覆盖度、错误率）

## Phase 2 · 存储与搜索基础
- [x] 拆分原文、清洗文本、结构化摘要的版本管理与对比工具
- [x] 打通全文检索基础能力（倒排索引 + 关键字段过滤）
- [x] 准备语义检索与向量库联动方案的原型验证
- [x] 扩展处理日志：指标统计、失败重试监控
- [x] 输出基础 Web 视图或 API 接口用于浏览 / 搜索 / 编辑

## Phase 3 · 搜索与知识管理增强
- [ ] 构建语义搜索 API 与前端查询界面
- [ ] 设计标签/分类/引用的人工维护体验，支持批量调整
- [ ] 输出时间线视图、主题趋势与相似内容推荐的需求细化
- [ ] 搭建待办/提醒面板，连接任务抽取结果

## Phase 4 · 邮件与多源扩展
- [ ] 定义邮件指令语法、鉴权规则与回执模板
- [ ] 开发邮件轮询/转发接入层，规范任务入队流程
- [ ] 集成 URL 抓取、附件 OCR、电子书解析的扩展点
- [ ] 规划外部接口（桌面端/移动端/Chat）所需的 API 契约

## 持续工作
- [ ] 建立度量与监控面板：处理吞吐、失败率、模型耗时
- [ ] 维护知识库 Roadmap，记录新增需求与技术债务
- [ ] 定期审查归档内容，判断是否需要回迁或重写
