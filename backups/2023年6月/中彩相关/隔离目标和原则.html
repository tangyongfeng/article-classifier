---
title: 隔离目标和原则
updated: 2013-07-13 02:48:43Z
created: 2013-07-13 02:15:16Z
---




<en-note STYLE="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
隔离目标和原则
<div>保证异常出现时影响范围可控</div><div>&nbsp; &nbsp; &nbsp;按主要介入方隔离</div><div>&nbsp; &nbsp; &nbsp;按业务隔离</div><div>&nbsp; &nbsp; &nbsp;按功能核心成都隔离</div><div>隔离方式</div><div>&nbsp; &nbsp; &nbsp;物理隔离&centerdot;逻辑隔离</div><div>&nbsp; &nbsp; &nbsp;读写隔离</div><div>保证SLA的措施</div><div>&nbsp; &nbsp; &nbsp;所有的地方加<b>超时。</b></div><div>&nbsp; &nbsp; &nbsp;谨慎的重试。异常情况下读重试可能将情况更加恶化，写情况下</div><div>&nbsp; &nbsp; &nbsp;容量规划</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;每季度至少一次例行评估</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;重大活动前容量评估</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;监控系统黄色预警</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;日常情况下30%冗余</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;资源或者系统构架调整时需要重点关注</div><div>&nbsp; &nbsp; &nbsp;failover策略</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;服务降级：保证核心功能</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;快速失败：保证不卡死</div><div>&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;流量限制：保证正常请求</div><div>构建稳定的系统-容灾预案</div><div>&nbsp; &nbsp; &nbsp;IDC容灾</div><div>&nbsp; &nbsp; &nbsp;限流</div><div>&nbsp; &nbsp; &nbsp;降级&nbsp; &nbsp;&nbsp;</div><div>&nbsp; &nbsp; &nbsp;紧急快速扩容</div><div>线上异常演练</div><div>&nbsp; &nbsp; &nbsp;模拟各种异常的情况出现，我们曾经做过的failure design是否都是正常的，出现的各种异常都是有补救措施的。</div><div>新浪自有演练系统的介绍</div><div>&nbsp; &nbsp; &nbsp;引流线上真是流量</div><div>&nbsp; &nbsp; &nbsp;异常场景搭建和模拟</div><div>&nbsp; &nbsp; &nbsp;预案预演</div><div>&nbsp; &nbsp; &nbsp;验证系统</div><div>&nbsp; &nbsp; &nbsp;</div><div>&nbsp; &nbsp; &nbsp; 引流线上真实流量</div><div>&nbsp; &nbsp; &nbsp;通过tcpcopy引流到演练服务器。使用linux tc模拟依赖资源或者服务出现异常的场景。</div><div>&nbsp; &nbsp; &nbsp;箭扣字节码形式注入sleep代码模拟接口慢的场景。</div><div><br/></div><div>验证手段</div><div>&nbsp; &nbsp; &nbsp;页面中4xx 5xx的比例</div><div>&nbsp; &nbsp; &nbsp;响应时间是否在正常范围内</div><div>&nbsp; &nbsp; &nbsp;是否满足sla的要求</div><div>&nbsp; &nbsp; &nbsp;返回包的大小</div><div>&nbsp; &nbsp; &nbsp;日志分析</div><div>注意事项</div><div>&nbsp; &nbsp; &nbsp;避免copy上行接口流量导致写请求被多次处理</div><div>&nbsp; &nbsp; &nbsp;避免对后端造成很大压力</div><div>&nbsp; &nbsp; &nbsp;避免写花缓存数据</div><div>&nbsp; &nbsp; &nbsp;尽量选择在地方和工程师在场的时间段进行演练</div><div>&nbsp; &nbsp; &nbsp;完善的缉拿空报警机制</div></en-note>      