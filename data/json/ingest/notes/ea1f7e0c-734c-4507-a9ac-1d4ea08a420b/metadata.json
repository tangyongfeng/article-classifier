{
  "ingest_source": {
    "id": "1f00397c-0077-4d9c-b691-676d8997e68a",
    "source_type": "evernote_html",
    "source_path": "backups/2023年6月/IT技术/flask 学习笔记.html",
    "collected_at": "2025-11-10T15:43:31.488221Z",
    "external_id": null,
    "title_hint": null,
    "language_hint": "en",
    "captured_at": null,
    "checksum": "c46a207b528dc7fdc5508408750de0af4649d2a04e26774075460b56e382cdcb",
    "status": "pending",
    "notes": {
      "batch_id": "phase2-backfill-202306"
    }
  },
  "note": {
    "id": "ea1f7e0c-734c-4507-a9ac-1d4ea08a420b",
    "ingest_source_id": "1f00397c-0077-4d9c-b691-676d8997e68a",
    "canonical_title": "flask 学习笔记",
    "language": "en",
    "ingested_at": "2025-11-10T15:43:31.488228Z",
    "created_at": null,
    "status": "active",
    "importance": 0,
    "attributes": {
      "source_filename": "flask 学习笔记.html"
    }
  },
  "variants": [
    {
      "id": "718263fa-693d-4e3e-a2c3-f2f965ed7e27",
      "note_id": "ea1f7e0c-734c-4507-a9ac-1d4ea08a420b",
      "variant_type": "raw_html",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-10T15:43:31.488232Z",
      "content": "---\ntitle: flask 学习笔记\nupdated: 2022-10-30 21:12:10Z\ncreated: 2022-10-30 20:32:31Z\n---\n\n\n<en-note><ul><li><div>运行前</div></li><ul><li><div>设定环境变量</div></li><li><div>Windows</div></li></ul></ul><div STYLE=\"--en-codeblock:true;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;\"><div>$env:FLASK_APP = &quot;hello.py&quot;</div><div>$env:FLASK_DEBUG=1</div><div>flask run</div></div><ul STYLE=\"--en-todo:true;\"><ul><li><div>linux mac </div></li></ul></ul><div STYLE=\"--en-codeblock:true;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;\"><div>export FLASK_APP=&apos;hello.py&apos;</div></div><ul><li><div>注册和返回框架</div></li><ul><li><div>使用装饰器将自己的的路由注册在系统里</div></li><li><div>返回值可以在对应的路由后注明</div></li><li><div><br/></div></li></ul></ul><div STYLE=\"--en-codeblock:true;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;\"><div>@app.route(&apos;/&apos;)</div><div>def index()：</div><div>&nbsp; &nbsp; return &apos;&lt;h1&gt;hello&lt;/h1&gt;&apos;,404</div><div><br/></div><div>#注意，上述函数将返回值定位404，在浏览器的页面中查看细节，可以发现收到了一个404错误，虽然页面正常显示.</div></div><ul><li><div>相应</div></li><ul><li><div>实现 </div></li></ul></ul><div STYLE=\"--en-codeblock:true;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;\"><div>from flask import make_response</div></div><ul><ul><li><div>Flask响应对象 属性或方法 说明</div></li><ul><li><div> status_code HTTP 数字状态码 </div></li><li><div>headers 一个类似字典的对象，包含随响应发送的所有首部 </div></li><li><div>set_cookie() 为响应添加一个 </div></li><li><div>cookie delete_cookie() 删除一个 cookie </div></li><li><div>content_length 响应主体的长度 </div></li><li><div>content_type 响应主体的媒体类型 </div></li><li><div>set_data() 使用字符串或字节值设定响应 </div></li><li><div>get_data() 获取响应主体</div></li></ul><li><div>redirect</div></li><ul><li><div>可以快速高效的将连接传递给指定的链接里</div></li></ul></ul></ul><div STYLE=\"--en-codeblock:true;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;\"><div>@app.route(&apos;/redirect/&apos;)</div><div>def redir():</div><div>&nbsp; &nbsp; return redirect(&apos;/page_come_here/&apos;)</div></div><ul><ul><li><div>abort</div></li><ul><li><div>在条件出现后抛出异常</div></li></ul></ul></ul><div STYLE=\"--en-codeblock:true;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;\"><div>@app.route(&apos;/find/&lt;user_name&gt;&apos;)</div><div>def find(user_name):</div><div>&nbsp; &nbsp; if user_name==&apos;tangyongfeng&apos;:</div><div>&nbsp; &nbsp; &nbsp; &nbsp; abort(404)</div><div>&nbsp; &nbsp; else:</div><div>&nbsp; &nbsp; &nbsp; &nbsp; return &apos;&lt;h1&gt; hello {}&lt;/h1&gt;&apos;.format(user_name)</div></div><div><br/></div></en-note>      ",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "checksum": "c46a207b528dc7fdc5508408750de0af4649d2a04e26774075460b56e382cdcb",
        "path": "backups/2023年6月/IT技术/flask 学习笔记.html"
      }
    },
    {
      "id": "7dfcff11-3ec3-4670-81a9-869ee6d97778",
      "note_id": "ea1f7e0c-734c-4507-a9ac-1d4ea08a420b",
      "variant_type": "clean_text",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-10T15:43:31.488236Z",
      "content": "---\ntitle: flask 学习笔记\nupdated: 2022-10-30 21:12:10Z\ncreated: 2022-10-30 20:32:31Z\n---\n\n运行前\n设定环境变量\nWindows\n$env:FLASK_APP = \"hello.py\"\n$env:FLASK_DEBUG=1\nflask run\nlinux mac\nexport FLASK_APP='hello.py'\n注册和返回框架\n使用装饰器将自己的的路由注册在系统里\n返回值可以在对应的路由后注明\n@app.route('/')\ndef index()：\n    return '<h1>hello</h1>',404\n#注意，上述函数将返回值定位404，在浏览器的页面中查看细节，可以发现收到了一个404错误，虽然页面正常显示.\n相应\n实现\nfrom flask import make_response\nFlask响应对象 属性或方法 说明\n status_code HTTP 数字状态码\nheaders 一个类似字典的对象，包含随响应发送的所有首部\nset_cookie() 为响应添加一个\ncookie delete_cookie() 删除一个 cookie\ncontent_length 响应主体的长度\ncontent_type 响应主体的媒体类型\nset_data() 使用字符串或字节值设定响应\nget_data() 获取响应主体\nredirect\n可以快速高效的将连接传递给指定的链接里\n@app.route('/redirect/')\ndef redir():\n    return redirect('/page_come_here/')\nabort\n在条件出现后抛出异常\n@app.route('/find/<user_name>')\ndef find(user_name):\n    if user_name=='tangyongfeng':\n        abort(404)\n    else:\n        return '<h1> hello {}</h1>'.format(user_name)",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "language": "en",
        "length": 910,
        "rule_count": 1,
        "applied_rules": [
          {
            "rule_id": "whitespace",
            "description": "Normalize whitespace",
            "note": "collapsed whitespace"
          }
        ]
      }
    }
  ],
  "extractions": [
    {
      "id": "367c2f9a-dc5d-4ef3-b07e-e16bf92e8a40",
      "note_id": "ea1f7e0c-734c-4507-a9ac-1d4ea08a420b",
      "extractor": "llm_enhance:v0#qwen3:30b",
      "payload": {
        "summary": "Flask是Python Web框架，学习笔记涵盖环境配置、路由注册、响应处理、重定向与异常处理等基础内容。",
        "keywords": [
          "Flask",
          "Web框架",
          "路由",
          "响应",
          "异常处理"
        ],
        "action_items": [
          "无"
        ],
        "source": "qwen3:30b",
        "category_path": [
          "Education"
        ],
        "new_category_suggestion": null
      },
      "version": 1,
      "created_at": "2025-11-12T09:40:21.992778Z",
      "created_by": "llm_enhance:v0",
      "quality_score": 0.276
    }
  ],
  "journal": {
    "id": "4f7669cd-92ea-4a5b-9c7b-bcc34e5381be",
    "note_id": "ea1f7e0c-734c-4507-a9ac-1d4ea08a420b",
    "stage": "ingest",
    "agent_id": "evernote_ingest:v0",
    "started_at": "2025-11-10T15:43:31.488242Z",
    "finished_at": "2025-11-10T15:43:31.488242Z",
    "status": "success",
    "input_ref": {
      "task_id": "acbd0432-8057-4080-a520-616aa2263af0",
      "source_path": "backups/2023年6月/IT技术/flask 学习笔记.html",
      "checksum": "c46a207b528dc7fdc5508408750de0af4649d2a04e26774075460b56e382cdcb"
    },
    "output_ref": {
      "ingest_source": "1f00397c-0077-4d9c-b691-676d8997e68a",
      "note": "ea1f7e0c-734c-4507-a9ac-1d4ea08a420b",
      "variants": [
        "718263fa-693d-4e3e-a2c3-f2f965ed7e27",
        "7dfcff11-3ec3-4670-81a9-869ee6d97778"
      ]
    },
    "error_detail": null
  },
  "llm": {
    "status": "success",
    "model": "qwen3:30b",
    "updated_at": "2025-11-12T09:40:21.992595Z",
    "latency_seconds": 42.62425579095725,
    "attempts": 1,
    "summary": {
      "summary": "Flask是Python Web框架，学习笔记涵盖环境配置、路由注册、响应处理、重定向与异常处理等基础内容。",
      "keywords": [
        "Flask",
        "Web框架",
        "路由",
        "响应",
        "异常处理"
      ],
      "action_items": [
        "无"
      ],
      "source": "qwen3:30b",
      "category_path": [
        "Education"
      ],
      "new_category_suggestion": null
    },
    "quality": {
      "score": 0.276,
      "metrics": {
        "input_chars": 910.0,
        "input_lines": 45.0,
        "summary_chars": 54.0,
        "summary_coverage_ratio": 0.059,
        "keyword_hit_rate": 0.6,
        "action_item_count": 1.0,
        "unique_summary_sentences": 1.0,
        "estimated_read_seconds": 54.6
      }
    }
  }
}