---
title: 通达信软件系统目录结构及文件数据格式
updated: 2021-01-29 19:04:44Z
created: 2021-01-29 19:04:17Z
author: tangyongfeng@gmail.com
---


<en-note><div><p STYLE="box-sizing: border-box; outline: none; padding: 0px; text-decoration: none; text-align: justify;"></p><div><span STYLE="text-decoration: none;">一、通达信软件系统目录结构</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxdr; yxhj 运行环境目录，存放当日行情数据</span></div><div><span STYLE="text-decoration: none;">&boxvr; vip8 分析系统执行程序和系统配置库</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxvr; block 系统板块公用存盘文件</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxvr; doc 通达信文档</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxdr; fzline 分钟</span></div><div><br/></div><div><span STYLE="text-decoration: none;">tdx 通达信 &boxvl; &boxvr; lday 日线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxdr; sz 深圳 &boxvh; lwek 周线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxv; &boxur; lmon 月线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxv; &boxdr; fzline 分钟线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxv; &boxvr; lday 日线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxur; vipdoc 历史数据 &boxvh; sh 上海 &boxvh; lwek 周线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxur; lmon 月线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxvr; sav6 v6版工作站信息</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxdr; fzline 分钟线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxvr; lday 日线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxvr; qh 期货 &boxvh; lwek 周线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxv; &boxur; lmon 月线</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&boxvr; tick 历史成交明细</span></div><div><br/></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">&boxur; sav 跨越2000工作站信息
</span></div><div><span STYLE="text-decoration: none;">D:\Thirdprogram\new_gtja_qq ---------- root</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; bin\ ---------- 动态链接库目录</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; Tc.exe ---------- 国泰君安锐智版网上交易V6.01交易程序</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; TdxW.exe ---------- 主程序</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; common.props ---------- common.props</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; LICENSE ---------- LICENSE</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; Meowv.Blog.sln ---------- Solution</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; </span><a HREF="http://readme.md/" STYLE="text-decoration: none;">README.md</a><span STYLE="text-decoration: none;"> ---------- </span><a HREF="http://readme.md/" STYLE="text-decoration: none;">README.md</a></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; .github ---------- github config</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; T0002\ &nbsp;&nbsp; </span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; blocknew\ ---------- 板块目录</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxv; &nbsp; &nbsp; &nbsp; &boxvr;&boxh;&boxh; blocknew.cfg ---------- 应用服务缓存</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxv; &nbsp; &nbsp; &nbsp; &boxur;&boxh;&boxh; zxg.blk ---------- 用于README.md展示图片的图片文件夹</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; diary\ ---------- 投资日记</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxv; &nbsp; &nbsp; &nbsp; &boxvr;&boxh;&boxh; sz\002930.idx ---------- 日记标题</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxv; &nbsp; &nbsp; &nbsp; &boxur;&boxh;&boxh; sz\002930.cnt---------- 日记内容</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; hq_cache\---------- 投资日记</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxvr;&boxh;&boxh; base.dbf ---------- 通达信基本财务数据（含总股本、流通股等）；含地域板块信息；</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxvr;&boxh;&boxh; block_fg.dat &nbsp; &nbsp; &nbsp; 风格板块</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxvr;&boxh;&boxh; block_gn.dat &nbsp; &nbsp;&nbsp; 概念板块</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxvr;&boxh;&boxh; block_zs.dat &nbsp; &nbsp; &nbsp; 指数板块</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxur;&boxh;&boxh; tdxhy.cfg &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 每个股票对应通达信行业和申万行业</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; vipdoc\---------- 历史数据目录,下载或缓存的历史数据目录</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxvr;&boxh;&boxh; sh\lday\sh000001.day ---------- 上海日线K线数据</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxvr;&boxh;&boxh; sh\fzline\sh000001.lc5 ---------- 上海5分钟线线数据</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &boxur;&boxh;&boxh; sh\minline\sh000001.lc1 ---------- 上海1分钟线线数据</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; tdxline.dat ---------- 画线数据文件</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; Meowv.Blog.Domain ---------- 领域层，实体，仓储接口</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; Meowv.Blog.Domain.Shared ---------- 领域层，一些常量，枚举等</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; Meowv.Blog.EntityFrameworkCore ---------- 集成EF Core，仓储接口实现</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; Meowv.Blog.EntityFrameworkCore.DbMigrations ---------- EF Core数据库迁移</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; Meowv.Blog.HttpApi ---------- API控制器</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; Meowv.Blog.HttpApi.Hosting ---------- WebApi项目，依赖于HttpApi，</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxvr;&boxh;&boxh; Meowv.Blog.Swagger ---------- Swagger扩展、Filter</span></div><div><span STYLE="text-decoration: none;"> &boxv; &nbsp; &boxur;&boxh;&boxh; Meowv.Blog.ToolKits ---------- 公共的工具类、扩展方法</span></div><div><span STYLE="text-decoration: none;"> &boxvr;&boxh;&boxh; incon.dat ---------- 板块代码数据文件，用二进制格式存储.板块名称和板块代码在D:\ThirdProgram\new_gtja_qq\incon.dat&nbsp; 定义。如：A|农业 A01|农业 A0101|种植业</span></div><div><span STYLE="text-decoration: none;"> &boxur;&boxh;&boxh; static ---------- 用于README.md展示图片的图片文件夹</span></div><div><span STYLE="text-decoration: none;">T0002\diary\sz</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><p STYLE="box-sizing: border-box; outline: none; padding: 0px; text-decoration: none; text-align: justify;"></p><div><span STYLE="text-decoration: none;">通达信在主图上用画线工具A这个文字注释工具做的文字注释系统自动保存在那个文件夹里：</span></div><div><br/></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">1、画线工具A这个文字注释工具做的文字注释系统自动保存：都放在通达信软件目录：T0002\tdxline.dat这个文件里面。
</span></div><p STYLE="box-sizing: border-box; outline: none; padding: 0px; text-decoration: none; text-align: justify;"></p><div><br STYLE="box-sizing: border-box; outline: none; padding: 0px; text-decoration: none;"/></div><div><br/></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">2、ctrl+q文字注释的内容都放在T0002\mark.dat
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">通达信软件设计的一些解释
</span></div><div><a HREF="http://fk.tdx.com.cn/dispbbs.asp?boardid=19&Id=9523" STYLE="text-decoration: none;-en-paragraph:true;">http://fk.tdx.com.cn/dispbbs.asp?boardid=19&amp;Id=9523</a></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">vipdoc:下载或缓存的历史数据目录
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 diary:投资日志目录
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 RemoteSH:缓存的上海F10
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 RemoteSZ:缓存的深圳F10
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 Ycinf缓存的公告消息
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　 　安装目录下的SZ.*,SH.*是缓存的盘中数据文件
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 T0002:个人信息目录,内有公式和自选股,个人设置等信息
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 Advhq.dat 星空图相关个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 Block.cfg 板块设置文件
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 cbset.dat 筹码分析个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 colwarn3.dat 行情栏目和预警个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 colwarnTj.dat 条件预警个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 CoolInfo.Txt 系统备忘录
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 Line.dat 画线工具数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 MyFavZX.dat 资讯收藏夹数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 newmodem.ini 交易客户端个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 padinfo.dat 定制版面个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 PriCS.dat,PriGS.dat,PriText.dat 公式相关数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 recentsearch.dat 最近资讯搜索数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 Scheme.dat 配色方案
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 tmptdx.css 临时网页CSS文件
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 user.ini 全局个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 userfx.dat K线图个性化数据
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 [blocknew] 板块目录
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 [cache] 系统数据高速缓存
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 [zst_cache] 分时图数据高速缓存
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 [coolinfo] 系统备忘录目录
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">　　 [Invest] 个人理财数据目录
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; SUPERSTK下的文件:SYS.DTA 存放系统提供的公式;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; USERDATA下的文件：AUTOBLK.CFG:自动板块设定;SELF.DTA 存放用户自编的公式;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; BLOCK文件夹下的文件： *.IBK 板块指数定义;*.BLK 板块定义;*.EBK 条件选股结果;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; SELF 文件夹下的文件： &nbsp; *.WSV 保存页面文件;ALERT.DAT 历史预警纪录;EXTDATA.INF 扩展数据定义;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *.CEP 保存组合条件选股条件;TEMPCMPD.CEP测试附加条件;*.INV 用户个人投
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 资纪录;*.TPT 保存指标模板;SELF年月日.DTA 每日自动公式备份文件;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; TEST 文件夹下的文件： *.TST 存放系统测试结果;*.OPT 存放参数优化的结果;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; PARAM参数指引文件夹: *.PRM 存放参数指引的结果;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; TABLE文件夹下的文件：*.ESS数据表文件;*.ESD数据表文件（带数据保存）;　　　
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; SelfData文件夹下的文件：*.str　字符串数据;*.oth 与股票无关序列值数据;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; Pattern 文件夹下的文件: &nbsp;*.PIN 模式匹配设计;*.PWT模式匹配方法;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; SpotAna文件夹下的文件: &nbsp;*.SPT 定位分析结果;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; Relate文件夹下的文件: &nbsp; &nbsp;*.RTL　相关分析结果;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; Posible文件夹下的文件: &nbsp; *.PSB　预测分布设计;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; DATA件夹下的文件： &nbsp; &nbsp; &nbsp;DAY.DAT 日线数据;EXTDAY.DAT 扩展数据;MIN.DAT 5分钟线数据;REPORT.DAT
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 当天的分笔成交数据;STKINFO.DAT 代码表/即时行情数据/财务数据/除权数据;*.PRP
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 历史回忆数据，一天一个文件;
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp;&nbsp; NEWS文件夹下的文件：*.TXT 财经报道、上交所公告、深交所公告
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; 通达信小常识：
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp;&nbsp; 1. 自选股放在通达信软件 \T0002\blocknew/zxg.blk &nbsp;文件中目录下
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp;&nbsp; 2. 通达信备份可用通达信自身工具数据维护工具自己备份：工具栏选 系统&mdash;&mdash;数据维护工具 (许多使用通达信的朋友不能
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 下载5分钟数据了，实际上股软并没有出现问题，只是原有的数据已满,将tdx\vipdoc\sh\fzline，tdx\vipdoc\sz\fzline，
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 将两个文件原有的数据清空（删除）后就可以继续下载了),各种版本的通达信股软，新下载安装的由于【fzline】没有分时
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 数据的记录，可以随时下载5分钟数据.
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">目录
</span></div><div><a HREF="https://www.stockso.com/blog/blogpost/5c013eb83f3ca92684f90659/#kline" STYLE="text-decoration: none;-en-paragraph:true;">通达信日K线.day、5分钟.rc5、1分钟.rc1历史数据格式</a></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><h2><span STYLE="text-decoration: none; font-weight: bold;">一、日K线数据格式
</span></h2><div><span STYLE="text-decoration: none;-en-paragraph:true;"> &nbsp; &nbsp;&nbsp; 下载安装通达信软件后，打开&ldquo;系统&rdquo;菜单，找到&ldquo;盘后数据下载&rdquo;选型，可下载日线.day、5分钟.rc5、1分钟.rc1历史数据。 如：日线数据下载后，存放位置在安装目录\vipdoc\sh\lday下（上证数据）和安装目录\vipdoc\sz\lday下（深证数据），每个股票对应一个文件。通达信的日线数据格式如下：每32个字节为一天数据每4个字节为一个字段，每个字段内低字节在前。
</span></div><h3><span STYLE="text-decoration: none; font-weight: bold;">（一）通达信日线数据格式
</span></h3><div><span STYLE="text-decoration: none;">00 ~ 03 字节 &nbsp; 年月日，整型；</span></div><div><span STYLE="text-decoration: none;">04 ~ 07 字节 &nbsp; 开盘价*100，整型；</span></div><div><span STYLE="text-decoration: none;">08 ~ 11 字节 &nbsp; 最高价*100, 整型；</span></div><div><span STYLE="text-decoration: none;">12 ~ 15 字节 &nbsp; 最低价*100, 整型；</span></div><div><span STYLE="text-decoration: none;">16 ~ 19 字节 &nbsp; 收盘价*100, 整型；</span></div><div><span STYLE="text-decoration: none;">20 ~ 23 字节 &nbsp; 成交额（元），float型；</span></div><div><span STYLE="text-decoration: none;">24 ~ 27 字节 &nbsp; 成交量（股），整型；</span></div><div><span STYLE="text-decoration: none;">28 ~ 31 字节 &nbsp; （保留）</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><p STYLE="box-sizing: border-box; outline: none; padding: 0px; text-decoration: none; text-align: justify;"></p><div><br STYLE="box-sizing: border-box; outline: none; padding: 0px; text-decoration: none;"/></div><div><br/></div><div><span STYLE="text-decoration: none;">（二） 通达信5分钟、1分钟数据格式</span></div><div><br/></div><div><span STYLE="text-decoration: none;">00 ~ 01 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">日期，整型；计算方法为：year = floor(num/2048) + 2004; &nbsp;month = floor(mod(num,2048)/100); &nbsp; day = mod(mod(num,2048), 100);</span></div><div><br/></div><div><span STYLE="text-decoration: none;">02 ~ 03 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">0点至目前的分钟数，整型</span></div><div><br/></div><div><span STYLE="text-decoration: none;">04 ~ 07 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">开盘价*100，整型</span></div><div><br/></div><div><span STYLE="text-decoration: none;">08 ~ 11 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">最高价*100，整型</span></div><div><br/></div><div><span STYLE="text-decoration: none;">12 ~ 15 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">最低价*100，整型</span></div><div><br/></div><div><span STYLE="text-decoration: none;">16 ~ 19 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">收盘价*100，整型</span></div><div><br/></div><div><span STYLE="text-decoration: none;">20 ~ 23 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">成交额*100，float型</span></div><div><br/></div><div><span STYLE="text-decoration: none;">24 ~ 27 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;">成交量（股），整型</span></div><div><br/></div><div><span STYLE="text-decoration: none;">28 ~ 31 字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">（保留）
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">c++
</span></div><div><span STYLE="text-decoration: none;"> </span></div><div><span STYLE="text-decoration: none;">struct</span><span STYLE="text-decoration: none;"> TdxRecord </span><span STYLE="text-decoration: none;">{</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 日K线数据结构</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">unsigned</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> date</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; </span><span STYLE="text-decoration: none;">// e.g. 20100304</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> _open</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// *0.01 开盘价</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> _high</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// *0.01 最高价</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> _low</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// *0.01 最低价</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> _close</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// *0.01 收盘价</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">float</span><span STYLE="text-decoration: none;"> amount</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 成交额</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> vol</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 成交量(手)</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> reserved</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; </span></div><div><span STYLE="text-decoration: none;"> </span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">float</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">open</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">{</span><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">return</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">0.01</span><span STYLE="text-decoration: none;">*</span><span STYLE="text-decoration: none;">_open</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">float</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">high</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">{</span><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">return</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">0.01</span><span STYLE="text-decoration: none;">*</span><span STYLE="text-decoration: none;">_high</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">float</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">low</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">{</span><span STYLE="text-decoration: none;"> &nbsp; </span><span STYLE="text-decoration: none;">return</span><span STYLE="text-decoration: none;"> _low</span><span STYLE="text-decoration: none;">*</span><span STYLE="text-decoration: none;">0.01</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">float</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">close</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">{</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">return</span><span STYLE="text-decoration: none;"> _close</span><span STYLE="text-decoration: none;">*</span><span STYLE="text-decoration: none;">0.01</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;">}</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">Python实现批量解析通达信day文件，导出至CSV
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">Python
</span></div><div><span STYLE="text-decoration: none;">import os</span></div><div><span STYLE="text-decoration: none;">import struct</span></div><div><span STYLE="text-decoration: none;">import datetime</span></div><div><span STYLE="text-decoration: none;">def stock_csv(filepath, name):</span></div><div><span STYLE="text-decoration: none;">data = [] with open(filepath, &apos;rb&apos;) as f:</span></div><div><span STYLE="text-decoration: none;">file_object_path = &apos;D:/通达信/vipdoc/sh/pythondata/&apos; + name +&apos;.csv&apos;</span></div><div><span STYLE="text-decoration: none;">file_object = open(file_object_path, &apos;w+&apos;)</span></div><div><span STYLE="text-decoration: none;">while True:</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_date = f.read(4)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_open = f.read(4)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_high = f.read(4)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_low= f.read(4)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_close = f.read(4)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_amount = f.read(4)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_vol = f.read(4)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_reservation = f.read(4)&nbsp; # date,open,high,low,close,amount,vol,reservation</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; if not stock_date:</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; # 4字节如20091229</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_date = struct.unpack(&quot;l&quot;, stock_date)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; #开盘价*100</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_open = struct.unpack(&quot;l&quot;, stock_open) </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; #最高价*100</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_high = struct.unpack(&quot;l&quot;, stock_high)&nbsp; </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; #最低价*100</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_low= struct.unpack(&quot;l&quot;, stock_low) </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; #收盘价*100</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_close = struct.unpack(&quot;l&quot;, stock_close) </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; #成交额</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_amount = struct.unpack(&quot;f&quot;, stock_amount) </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; #成交量</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_vol = struct.unpack(&quot;l&quot;, stock_vol) </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; #保留值</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; stock_reservation = struct.unpack(&quot;l&quot;, stock_reservation) </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; #格式化日期</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; date_format = datetime.datetime.strptime(str(stock_date[0]),&apos;%Y%M%d&apos;)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; list= date_format.strftime(&apos;%Y-%M-%d&apos;)+ &quot;,&quot; + str(stock_open[0]/100)+&quot;,&quot;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; +str(stock_high[0]/100.0) +&quot;,&quot; +str(stock_low[0]/100.0)+&quot;,&quot; </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; + str(stock_close[0]/100.0)+&quot;,&quot; + str(stock_vol[0])+&quot;\r\n&quot;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; file_object.writelines(list)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; file_object.close()</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; path = &apos;D:/通达信/vipdoc/sh/lday/&apos;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; listfile = os.listdir(&apos;D:/通达信/vipdoc/sh/lday/&apos;)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; for i in listfile:</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; stock_csv(path+i, i[:-4])</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><h2><span STYLE="text-decoration: none; font-weight: bold;">日记文件数据格式
</span></h2><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;">struct TdxDiary_Idx {</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int &nbsp; id; &nbsp; &nbsp; &nbsp; // 0xffffffff = deleted, auto incr</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; char&nbsp; dummy1; &nbsp; // = 0x00</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; char&nbsp; symbol[7]; // 7 char = 6 char symbol + 1 char &apos;\0&apos;</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int&nbsp; date; &nbsp; &nbsp; // 20110407</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int&nbsp; time; &nbsp; &nbsp; // 13:14:25 = 131425</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int&nbsp; weather; &nbsp; // 00 = 晴, 01=阴, 02=雨, 03=雪</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; char&nbsp; title[64]; // title</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int&nbsp; offset; &nbsp; // offset in &quot;symbol.cnt&quot;</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int&nbsp; length; &nbsp; // content length</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int&nbsp; date2; &nbsp;&nbsp; // date2 = date</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; int&nbsp; time2; &nbsp;&nbsp; // time2 = time</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; void set(const char *symbol, const char *title, int offset, int length){</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; memset(this-&gt;symbol, &apos;\0&apos;, 7);</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; memset(this-&gt;title, &apos;\0&apos;, 64);</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; this-&gt;dummy1 = &apos;\0&apos;;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; this-&gt;weather=0x03;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; strcpy(this-&gt;symbol, symbol);</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; strcpy(this-&gt;title, title);</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; this-&gt;offset = offset;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; this-&gt;length = length;</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; }</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; void datetime(int date, int time){</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; this-&gt;date&nbsp; = date; this-&gt;time&nbsp; = time;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; this-&gt;date2 = date; this-&gt;time2&nbsp; = time;</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; }</span></div><div><br/></div><div><span STYLE="text-decoration: none;">};</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">c#
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">读写通达信日记文件 E:\thirdprogram\国泰君安锐智版\T0002\diary\sh\600732.idx 该文件只保留了文件标题信息 文件内容在600732.cnt中
</span></div><div><span STYLE="text-decoration: none;"> /// </span><span STYLE="text-decoration: none;">&lt;</span><span STYLE="text-decoration: none;">summary</span><span STYLE="text-decoration: none;">&gt;</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; ///功能：读写通达信日记文件 E:\thirdprogram\国泰君安锐智版\T0002\diary\sh\600732.idx 该文件只保留了文件标题信息 文件内容在600732.cnt中</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; /// </span><span STYLE="text-decoration: none;">&lt;/</span><span STYLE="text-decoration: none;">summary</span><span STYLE="text-decoration: none;">&gt;</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; public class TdxDiaryFileRecordStruct</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; {</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; //E:\thirdprogram\国泰君安锐智版\T0002\diary\sh\600732.idx</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; //该文件只保留了文件标题信息</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; //文件内容在600732.cnt中</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; [StructLayout(LayoutKind.Sequential, Pack = 1)]</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; public struct DiaryFileRecordStruct &nbsp;&nbsp; //RecordSize= 104，其他数字为第几次日记，包括修改</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; {</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] //4byte FF FF FF FF 或08 00 00 00&nbsp; 如果是0XFF FF FF FF则表示记录作废 其他为第几次 </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 ValidLable;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I1)] //1byte 01</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public byte Unknow1;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 7)] //6byte 36 30 30 30 30 30 </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public string StockCode;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] //,K线日期日期 B7 DE 32 01</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 KLineLableDate;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] //,K线时间 &nbsp; &nbsp; 49 36 03 00</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 KlineLableTime;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] //,4 byte 未知 00 00 00 00</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 Unknow3;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 64)] //64 byte 文本内容</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public string DiaryTitle;</span></div><div><br/></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] //文本内容在600732.cnt 中的偏移字节数 91 01 00 00</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 CntFileOffsetPostion;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] // 文本内容在600732.cnt 中的字节数长度09 00 00 00</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 CntFileLength;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] //,最后修改日期20111031 B4 DE 32 01</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 UpdateDate;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [MarshalAs(UnmanagedType.I4)] //,最后修改时间200604=20:06:04 49 36 03 00</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public Int32 UpdateTime;</span></div><div><br/></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; }</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; </span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; }</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><h2><span STYLE="text-decoration: none; font-weight: bold;">股票代码和名称数据格式
</span></h2><div><span STYLE="text-decoration: none;"> </span></div><div><span STYLE="text-decoration: none;">struct TdxSymbolMap {</span></div><div><span STYLE="text-decoration: none;">&nbsp; char symbol[6]; &nbsp;&nbsp; // 6 digits</span></div><div><span STYLE="text-decoration: none;">&nbsp; char dummy1[18]</span></div><div><span STYLE="text-decoration: none;">&nbsp; char name[8]; &nbsp; &nbsp;&nbsp; // 4 characters in GB2312</span></div><div><span STYLE="text-decoration: none;">&nbsp; char dummy2[218];</span></div><div><span STYLE="text-decoration: none;">}</span></div><div><br/></div><div><br/></div><div><span STYLE="text-decoration: none;">read</span></div><div><span STYLE="text-decoration: none;">void tdx_read_symbols(const char *file){</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; FILE *fp=fopen(file.c_str(),&quot;rb&quot;);</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; fseek(fp, 50, SEEK_SET);</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; char buf[250];</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; while(250 == fread(buf,1,250,fp)){</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; std::string symbol(buf,0,6);</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; std::string name(buf+24,8);</span></div><div><br/></div><div><span STYLE="text-decoration: none;">&nbsp; }</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> fclose(fp);</span></div><div><br/></div><div><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">通达信股票代码数据格式
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">文件位置
</span></div><p STYLE="box-sizing: border-box; outline: none; padding: 0px; text-decoration: none; text-align: justify;"></p><div><span STYLE="text-decoration: none;">从通达信系统获取股票代码信息</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> 通达信系统股票代码信息保存在安装目录下T0002\hq_cache子目录</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> 文件名分别为shm.tnf、szm.tnf</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> 输出结果：pandas DateFrame</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> 列名含义：</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> sc:市场代码，sh沪市，sz深市</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> gpdm:股票代码（9位），如002294.SZ，索引</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> gpmc:股票名称，如信立泰</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;"> gppy:股票拼音，如XLT</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> </span></div><div><br/></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> gplb:股票类别，如深市中小板A股
</span></div><h5><span STYLE="text-decoration: none; font-weight: bold;">通达信V6.1股票代码文件格式分析:</span><a HREF="https://blog.csdn.net/starsky2006/article/details/5863438" STYLE="text-decoration: none; font-weight: bold;">https://blog.csdn.net/starsky2006/article/details/5863438</a><span STYLE="text-decoration: none; font-weight: bold;">
</span></h5><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><h2><span STYLE="text-decoration: none; font-weight: bold;">概念板块数据结构
</span></h2><div><span STYLE="text-decoration: none;">概念板块数据结构</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; 文件存储路径：tdx\T0002\hq_cache\block.dat</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; 文件存储格式：</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; 文件头：384字节</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; 板块个数：2字节</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; 各板块数据存储结构（紧跟板块数目依次存放）</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 每个板块占据的存储空间为2812个字节，可最多包含399个个股</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 板块名称：9字节</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 该板块包含的个股个数：2字节</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 板块类别：2字节</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 该板块下个股代码列表（连续存放，直到代码为空）</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 个股代码：7字节</span></div><div><br/></div><div><br/></div><div><span STYLE="text-decoration: none;">tdx\T0002\hq_cache\block.dat:</span></div><div><span STYLE="text-decoration: none;">typedef struct _TDXBLOCKDATAFILEHEADER</span></div><div><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; union</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; {</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; char &nbsp; &nbsp; Header[0x182];</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; };</span></div><div><span STYLE="text-decoration: none;">}TDXBLOCKDATAFILEHEADER,*PTDXBLOCKDATAFILEHEADER;</span></div><div><br/></div><div><span STYLE="text-decoration: none;">typedef struct _TDXBLOCKDATA</span></div><div><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; char &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BlockName[9];</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; unsigned short int&nbsp; Num;</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; unsigned short int&nbsp; Data1;</span></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; char &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CodeName[400][7];</span></div><div><span STYLE="text-decoration: none;">} TDXBLOCKDATA,*PTDXBLOCKDATA;</span></div><div><br/></div><div><span STYLE="text-decoration: none;">typedef struct _TDXBLOCKDATFILE</span></div><div><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp; TDXBLOCKDATAFILEHEADER &nbsp;&nbsp; Header;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; TDXBLOCKDATA &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Block[n];</span></div><div><span STYLE="text-decoration: none;">}TDXBLOCKDATFILE,*PTDXBLOCKDATFILE;</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><h2><span STYLE="text-decoration: none; font-weight: bold;">自定义板块存储数据结
</span></h2><div><span STYLE="text-decoration: none;">自定义板块存储数据结</span></div><div><br/></div><div><span STYLE="text-decoration: none;">板块名称文件：\tdx\T0002\block.cfg</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp;&nbsp; 存储结构：</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 空白：4字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 板块名称：10字节字符串</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 板块简码：5字节字符串</span></div><div><br/></div><div><span STYLE="text-decoration: none;">自定义的各板块个股存储</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 文件名：tdx\T0002\blocknew\&nbsp; +&nbsp; 自定义板块简码（与block.cfg文件中的各板块简码同）</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp;&nbsp; 数据存储结构：</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 个股分隔符：2字节</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 个股属性代码：1字节（1:表示上证；0:表示深证）</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 个股名称：6字节</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;">自选股票T0002\blocknew\ZXG.blk</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">通达信基本财务数据结构
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">1.D:\Thirdprogram\new_gtja_qq\T0002\hq_cache\base.dbf
</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">2.
</span></div><div><span STYLE="text-decoration: none;">/</span><span STYLE="text-decoration: none;"> 通达信格式财务数据</span></div><div><span STYLE="text-decoration: none;">#</span><span STYLE="text-decoration: none;">define</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; TDX_FHEADER_SIZE &nbsp; &nbsp; &nbsp;&nbsp; 0x521</span></div><div><span STYLE="text-decoration: none;">typedef</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">struct</span><span STYLE="text-decoration: none;"> tdx_basedata_t </span><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szMagic</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szMarket</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 市场 &apos;0&apos; 深圳 &apos;1&apos; 上海</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szCode</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">6</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szDate_modified</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">8</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 更新日期</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_total</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 总股本 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_national</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; </span><span STYLE="text-decoration: none;">// 国家股 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_orig</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 发起股 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_corp</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 法人股 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_b</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// B股 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_h</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// H股 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_currency</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; </span><span STYLE="text-decoration: none;">// 流通股 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szShare_count_employ</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 职工股 10000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szUnkown1</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szAsset</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 总资产 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szAsset_currency</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 流动资产 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szAsset_capital</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 固定资产 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szAsset_imma</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 无形资产 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szInvest_long</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 长期投资 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szDebt_currency</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 流动负债 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szDebt_long</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 长期负债 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szAcc_fund</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 公积金 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szNet_asset</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 净资产 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szMain_income</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 主营收入 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szMain_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 主营利益 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szOther_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 其他利益 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szBusiness_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 营业利益 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szInvest_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 投资收益 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szAllow_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 补贴收入 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szOut_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 业外收支 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szProfit_regulate</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 损益调整 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szTotal_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 利润总额 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szProfit_aftertax</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 税后利益 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szNet_profit</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// 净利益 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szProfit_ud</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 未分利润 1000</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szNet_asset_ps_regulate</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">14</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;">&nbsp; </span><span STYLE="text-decoration: none;">// 每股净资2</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szUnknown2</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">3</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szUnknown3</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">4</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szUnknown4</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">2</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">//</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szDate_begin</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">8</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// 上市日期</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szUnknown5</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">3</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">// </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;">&nbsp; m_szUnknown6</span><span STYLE="text-decoration: none;">[</span><span STYLE="text-decoration: none;">11</span><span STYLE="text-decoration: none;">]</span><span STYLE="text-decoration: none;">;</span><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">// </span></div><div><span STYLE="text-decoration: none;">}</span><span STYLE="text-decoration: none;">TDX_BASEDATA</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">*</span><span STYLE="text-decoration: none;">PTDX_BASEDATA</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;">3.
</span></div><div><span STYLE="text-decoration: none;">//数据管理-通达信财务数据导入-选择文件-通达信财务板块数据导入</span></div><div><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> CSelfDB</span><span STYLE="text-decoration: none;">::</span><span STYLE="text-decoration: none;">InstallBasetableTdx</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">const</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">char</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">*</span><span STYLE="text-decoration: none;"> filename</span><span STYLE="text-decoration: none;">)</span></div><div><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">if</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">NULL</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">==</span><span STYLE="text-decoration: none;"> filename </span><span STYLE="text-decoration: none;">||</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">strlen</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">filename</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">==</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">0</span><span STYLE="text-decoration: none;">)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">return</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">0</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">int</span><span STYLE="text-decoration: none;"> &nbsp; nCount&nbsp; </span><span STYLE="text-decoration: none;">=</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">0</span><span STYLE="text-decoration: none;">;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; CSPString &nbsp; &nbsp; &nbsp; sRoot &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span STYLE="text-decoration: none;">=</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">GetRootPath</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; CSPString &nbsp; &nbsp; &nbsp; sFileNameSHSZ &nbsp; </span><span STYLE="text-decoration: none;">=</span><span STYLE="text-decoration: none;"> sRoot </span><span STYLE="text-decoration: none;">+</span><span STYLE="text-decoration: none;"> self_chna_basetbl</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; CSPFile fileSHSZ</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> fileTdx</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">if</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">fileSHSZ</span><span STYLE="text-decoration: none;">.</span><span STYLE="text-decoration: none;">Open</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">sFileNameSHSZ</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> CSPFile</span><span STYLE="text-decoration: none;">::</span><span STYLE="text-decoration: none;">modeWrite </span><span STYLE="text-decoration: none;">|</span><span STYLE="text-decoration: none;"> CSPFile</span><span STYLE="text-decoration: none;">::</span><span STYLE="text-decoration: none;">modeCreate</span><span STYLE="text-decoration: none;">)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">&amp;&amp;</span><span STYLE="text-decoration: none;"> fileTdx</span><span STYLE="text-decoration: none;">.</span><span STYLE="text-decoration: none;">Open</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">filename</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> CSPFile</span><span STYLE="text-decoration: none;">::</span><span STYLE="text-decoration: none;">modeRead</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fileTdx</span><span STYLE="text-decoration: none;">.</span><span STYLE="text-decoration: none;">Seek</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">TDX_FHEADER_SIZE</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> CSPFile</span><span STYLE="text-decoration: none;">::</span><span STYLE="text-decoration: none;">begin</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">;</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; TDX_BASEDATA &nbsp;&nbsp; tdxblock</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">while</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">sizeof</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">tdxblock</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">==</span><span STYLE="text-decoration: none;"> fileTdx</span><span STYLE="text-decoration: none;">.</span><span STYLE="text-decoration: none;">Read</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">&amp;</span><span STYLE="text-decoration: none;">tdxblock</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">sizeof</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">tdxblock</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; BASEDATA &nbsp; &nbsp; &nbsp;&nbsp; block</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">if</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">convert_TDX_BASEDATA_to_BASEDATA</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">&amp;</span><span STYLE="text-decoration: none;">tdxblock</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">&amp;</span><span STYLE="text-decoration: none;">block</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">)</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">{</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fileSHSZ</span><span STYLE="text-decoration: none;">.</span><span STYLE="text-decoration: none;">Write</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">&amp;</span><span STYLE="text-decoration: none;">block</span><span STYLE="text-decoration: none;">,</span><span STYLE="text-decoration: none;"> </span><span STYLE="text-decoration: none;">sizeof</span><span STYLE="text-decoration: none;">(</span><span STYLE="text-decoration: none;">block</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">)</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; nCount&nbsp; </span><span STYLE="text-decoration: none;">++</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">}</span></div><div><br/></div><div><span STYLE="text-decoration: none;"> &nbsp; &nbsp; &nbsp;&nbsp; </span><span STYLE="text-decoration: none;">return</span><span STYLE="text-decoration: none;"> nCount</span><span STYLE="text-decoration: none;">;</span></div><div><span STYLE="text-decoration: none;">}</span></div><div><span STYLE="text-decoration: none;">Copy</span></div><div><span STYLE="text-decoration: none;-en-paragraph:true;"> 
</span></div></div><div>标签: </div><div><a HREF="https://www.stockso.com/blog/tag/%E9%80%9A%E8%BE%BE%E4%BF%A1">通达信</a></div><div>More Like this
</div></en-note>      