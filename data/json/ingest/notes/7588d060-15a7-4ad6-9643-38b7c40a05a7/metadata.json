{
  "ingest_source": {
    "id": "dcbeedee-5884-4397-b290-bd074f8fa952",
    "source_type": "evernote_html",
    "source_path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/无标题笔记-3.html",
    "collected_at": "2025-11-09T20:01:35.975177Z",
    "external_id": null,
    "title_hint": null,
    "language_hint": "en",
    "captured_at": null,
    "checksum": "14a58c5aeba9ea3fe65eac06d83f85234327d26d53821f0b541641686f4d3ac9",
    "status": "pending",
    "notes": {
      "batch_id": null
    }
  },
  "note": {
    "id": "7588d060-15a7-4ad6-9643-38b7c40a05a7",
    "ingest_source_id": "dcbeedee-5884-4397-b290-bd074f8fa952",
    "canonical_title": "无标题笔记-3",
    "language": "en",
    "ingested_at": "2025-11-09T20:01:35.975180Z",
    "created_at": null,
    "status": "active",
    "importance": 0,
    "attributes": {
      "source_filename": "无标题笔记-3.html"
    }
  },
  "variants": [
    {
      "id": "029c4988-1e86-47e7-bfba-922858bf1e1a",
      "note_id": "7588d060-15a7-4ad6-9643-38b7c40a05a7",
      "variant_type": "raw_html",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-09T20:01:35.975183Z",
      "content": "---\ntitle: 无标题笔记\nupdated: 2021-02-26 19:15:37Z\ncreated: 2021-02-26 19:14:36Z\nauthor: tangyongfeng@gmail.com\n---\n\n\n<en-note><h1 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 42px; letter-spacing: normal; font-size: 30px; color: rgb(25, 25, 25); font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 42px; letter-spacing: normal; font-size: 30px; color: rgb(25, 25, 25); font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\">Add SSL Encryption to Open edX\n</span></h1><div STYLE=\"box-sizing: border-box; color: rgb(116, 116, 116); font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><div STYLE=\"box-sizing: border-box; background-color: rgb(241, 241, 241); padding: 0px; border-top-width: 5px; border-top-style: solid; border-color: rgb(201, 201, 201); border-bottom-width: 5px; border-bottom-style: solid; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: left; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 145.125px; padding: 0px 0px 0px 14.1719px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box; -webkit-box-pack: center; justify-content: center; -webkit-box-align: center; align-items: center; min-height: 145.125px;\"><div STYLE=\"box-sizing: border-box; -webkit-box-flex: 1; flex: 1 1 0%; max-width: 100%;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: right; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">Add a free Let&rsquo;s Encrypt SSL/TLS certificate to your Open edX installation in just a few minutes using this step-by-step how-to guide.</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 145.125px; padding: 0px 9.45312px 0px 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box; -webkit-box-pack: center; justify-content: center; -webkit-box-align: center; align-items: center; min-height: 145.125px;\"><div STYLE=\"box-sizing: border-box; -webkit-box-flex: 1; flex: 1 1 0%; max-width: 100%;\"><div STYLE=\"box-sizing: border-box; text-align: center;\"><span STYLE=\"color: rgb(8, 8, 8); font-size: 18px; font-weight: bold; letter-spacing: 0px; text-align: start; --inversion-type-color: simple;\">Summary</span></div></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"https://letsencrypt.org/\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">Let&rsquo;s Encrypt</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;is a free, automated, and open Certificate Authority that is sponsored by Internet Security Research Group (ISRG) which itself is a venerable who&rsquo;s who of silicon valley Internet companies. Let&rsquo;s Encrypt has made it much easier to request, install and maintain SSL/TLS certificates on your web servers. For Ubuntu/Nginx web apps like Open edX, Let&rsquo;s Encrypt uses a platform named&nbsp;</span><a HREF=\"https://certbot.eff.org/\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">Certbot</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;that provides a simple installation process that&nbsp;</span><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">MOSTLY</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;works, barring a couple of minor hiccups. By following these instructions you should be able to get HTTPS working on your server in less than an hour.\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">If you&rsquo;re already familiar with Nginx then you can probably jump over to&nbsp;</span><a HREF=\"https://certbot.eff.org/lets-encrypt/ubuntuxenial-nginx\" STYLE=\"box-sizing: border-box; font-style: italic; color: orange;-en-paragraph:true;\">Certbot&rsquo;s installation guide for Ubuntu 16.04 / Nginx</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">, and if so then god speed.&nbsp;Otherwise by all means, please read on.</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Now, about those hiccups. First, as of the date of publication of this post at least, Certbot&rsquo;s instructions required a minor modification. Second, some of the Open edX virtual server configurations are too complex for certbot to understand, causing it to make minor though correctable mistakes when configuring HTTP redirections to HTTPS. Fortunately, both of these are minor problems which we&rsquo;ll easily avert in the procedure that follows.\n</span></div><h4 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.5; letter-spacing: 0px; font-size: 18px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.5; letter-spacing: 0px; font-size: 18px; color: rgb(51, 51, 51);\">Setup Procedure\n</span></h4></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(241, 241, 241); padding: 25px 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: left; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 223px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><ol STYLE=\"box-sizing: border-box;\"><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#1\" STYLE=\"box-sizing: border-box; color: orange;\">Edit Nginx Virtual Server Configurations</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#2\" STYLE=\"box-sizing: border-box; color: orange;\">Install Certbot</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#3\" STYLE=\"box-sizing: border-box; color: orange;\">Prepare Your Nginx Virtual Server Configurations</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#4\" STYLE=\"box-sizing: border-box; color: orange;\">Test Your Platform</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#5\" STYLE=\"box-sizing: border-box; color: orange;\">Setup a Cron Job to Auto-Renew Your Certificate(s</a></div></li></ol><div><span STYLE=\"color: rgb(8, 8, 8); font-size: 16px; font-weight: bold; letter-spacing: 0px; --inversion-type-color: simple;\"><span STYLE=\"color: rgb(133, 125, 112); --inversion-type-color: simple;\"><br/></span></span></div><div><span STYLE=\"color: rgb(8, 8, 8); font-size: 16px; font-weight: bold; letter-spacing: 0px; --inversion-type-color: simple;\"><span STYLE=\"color: rgb(133, 125, 112); --inversion-type-color: simple;\"><br/></span></span></div><div><span STYLE=\"color: rgb(8, 8, 8); font-size: 16px; font-weight: bold; letter-spacing: 0px; --inversion-type-color: simple;\"><span STYLE=\"color: rgb(133, 125, 112); --inversion-type-color: simple;\">1. Prepare Your Nginx Virtual Server Configuration Files</span></span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Open edx runs on&nbsp;</span><a HREF=\"https://www.nginx.com/\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">Nginx</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">, a fast, bare-bones web server alternative to Apache, and like Apache, Nginx can host multiple virtual web servers on the same Ubuntu server instance. In the case of the Open edX software suite there are nearly a dozen such web servers &mdash; two of them being your LMS and Course Management Studio &mdash; which you can view from either of the following two paths:\n</span></div><p STYLE=\"box-sizing: border-box; text-align: center;\"></p><div><span STYLE=\"box-sizing: border-box;\">/etc/nginx/sites-enabled/</span></div><div><br/></div><div>or</div><div><br/></div><div STYLE=\"margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">/edx/app/nginx/sites-available/</span><span STYLE=\"-en-paragraph:true;\">\n</span></div><p></p></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/c011e46e87b5aee7ef9b32b58d1e6097.png\"  hash=\"c011e46e87b5aee7ef9b32b58d1e6097\" type=\"image/png\" width=\"1610\" alt=\"\" /></en-media></div></div><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-weight: bold; text-decoration: underline;-en-paragraph:true;\">Explicitly name each server</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">. Open edx native build configuration, by design, automagically infers the fully-qualified domain name of your LMS, elminating any need on your part to explicitly name the virtual server. Unfortunately, this convenience strategy undermines Certbot&rsquo;s ability to read your virtual server configuration files to determine the names of the SSL certificates you need to request. You&rsquo;ll therefore need to edit the LMS and CMS files, adding a line near the top of each file to explicitly name each server.\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo vim /etc/nginx/sites-enabled/lms</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/9b4052cbed362974975552a806b9fd3b.png\"  hash=\"9b4052cbed362974975552a806b9fd3b\" type=\"image/png\" width=\"1542\" alt=\"\" /></en-media></div></div><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">This post only covers setting up SSL/TLS for the LMS and CMS, however, if you analyze the other virtual server configuration files in this folder you&rsquo;ll probably be able to apply these same procedures to other sites in your Open edX software suite like for example, the Ecommerce module.\n</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(241, 241, 241); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: justify; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">On an aside, you should note that many of the virtual server configurations in this folder make use of unorthodox http port assignments. For example, Studio is assigned to port 18010. For the avoidance of any doubts, the Open edX design team deliberately took this approach so that you&rsquo;d only need one fully-qualified domain name (eg </span><a HREF=\"http://edx.org\" STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">edx.org</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">) to access the entire suite of software. However, you can easily set one&nbsp; or more of the applications to it&rsquo;s own fully-qualified domain name in order to make it more accessible and user friendly for your users. For example, for obsessive-compulsive dev ops types (like me) you could create an entire series of subdomains such as:</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><ul STYLE=\"box-sizing: border-box; list-style-type: none; padding: 0px; font-size: 14px; line-height: 23.8px;\"><li STYLE=\"box-sizing: border-box; padding: 0px 0px 5.5px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://studio.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">studio.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://forum.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">forum.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li></ul></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><ul STYLE=\"box-sizing: border-box; list-style-type: none; padding: 0px; font-size: 14px; line-height: 23.8px;\"><li STYLE=\"box-sizing: border-box; padding: 0px 0px 5.5px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://ecommerce.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">ecommerce.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://discovery.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">discovery.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://notes.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">notes.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li></ul></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: justify; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">For example, for the demo server that I built for this article I created a primary domain for the LMS (</span><a HREF=\"http://edx-ssl.lawrencemcdaniel.com\" STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">edx-ssl.lawrencemcdaniel.com</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">) and a subdomain for Studio (</span><a HREF=\"http://edx-ssl-studio.lawrencemcdaniel.com\" STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">edx-ssl-studio.lawrencemcdaniel.com</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">).</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">In general, all that&rsquo;s required is that the DNS record for each sub domain points to the same server IP address, and that you edit each virtual server configuration to explicitly name each virtual server and change the &ldquo;Listen&rdquo; port back to the default 80 (or 443 for SSL). Lastly, you&rsquo;d also need to do a search &amp; replace of the server name(s) in the two edX Platform configuration files /edx/app/edxapp/lms.env.json and&nbsp;&nbsp;/edx/app/edxapp/cms.env.json.\n</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">2. Install Certbot\n</span></h5><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The published installation procedure on the Certbot web site didn&rsquo;t work earlier today as I was preparing to write this post. Here&rsquo;s the error message I received when I attempted to run the installation for Nginx running on an Ubuntu server:\n</span></div></div><div><img src=\"../_resources/43a90542c3cd8f6aefb71559b97faed2.png\"  hash=\"43a90542c3cd8f6aefb71559b97faed2\" type=\"image/png\" width=\"1746\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Fortunately, I found the following&nbsp;</span><a HREF=\"https://github.com/certbot/certbot/issues/5405\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">thread dated 9-January-2018</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;explaining both the problem and a workaround. The short story is that the following&nbsp;modified installation instructions should work:\n</span></div><div STYLE=\"box-sizing: border-box; padding: 10px; border: 1px solid rgb(136, 136, 136); overflow: auto; background-color: rgb(241, 241, 241);\"><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> update</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> install software</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">properties</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">common</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo add</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">repository universe</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo add</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">repository ppa</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">:</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">certbot</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">/</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">certbot</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> update</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> install certbot python</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">certbot</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">nginx </span></div><div><br/></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo certbot </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">authenticator standalone </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">installer nginx </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">pre</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">hook </span><span STYLE=\"box-sizing: border-box; color: rgb(0, 136, 0);\">&quot;service nginx stop&quot;</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">post</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">hook </span><span STYLE=\"box-sizing: border-box; color: rgb(0, 136, 0);\">&quot;service nginx start&quot;</span></div></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">After re-running the install procedure with these modified instructions you should see screen output substantially resembling the following.\n</span></div></div><div><img src=\"../_resources/78ee5def8b065c27d160109b685ecdfa.png\"  hash=\"78ee5def8b065c27d160109b685ecdfa\" type=\"image/png\" width=\"2462\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Choose &ldquo;2: Redirect&rdquo; and hit enter.\n</span></div></div><div><img src=\"../_resources/631d7fd90b0e3be98d5fd9278d54138e.png\"  hash=\"631d7fd90b0e3be98d5fd9278d54138e\" type=\"image/png\" width=\"2446\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">If you got similar results then CONGRATULATIONS, you are now the proud owner of your very own SSL/TLS certificates! Certbot only does two things during its installation procedure. First, it saves sets of files in&nbsp;</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">/etc/letsencrypt/live/</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">. And second, it modifies your Nginx virtual server configurations located in&nbsp;</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">/etc/nginx/sites-enabled/</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">. Using sudo you can inspect both of these to learn more about the specifics of what it did.\n</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">3. Edit Nginx Virtual Server Config Files\n</span></h5></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The Open edX virtual server configuration files for the LMS and CMS are a little too complex for Certbot to analyze, causing it make a couple of minor mistakes. First, it correctly adds a new listener on port 443 but incorrectly neglects to un-assign the existing listener on port 80. Second, it incorrectly places the SSL certificate files paths and listener directive at the bottom of the virtual server config file. Fortunately, these are easy to remedy.\n</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">First, open the lms config file and look for the new configuration code snippets that Certbot added near the bottom of the file.\n</span></div></div><div><img src=\"../_resources/0df111cf0d6fc7eb4948273c9b7da9f6.png\"  hash=\"0df111cf0d6fc7eb4948273c9b7da9f6\" type=\"image/png\" width=\"2368\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Cut and re-paste this configuration code snippet towards the top of the same file as per the screen shot below. Summarizing what we&rsquo;re doing:\n</span></div><ol STYLE=\"box-sizing: border-box;\"><li STYLE=\"box-sizing: border-box;\"><div>Add a new virtual server that listens on port 80, and redirects all traffic to https</div></li><li STYLE=\"box-sizing: border-box;\"><div>In the original virtual server declaration, remove the directive to listen on port 80</div></li><li STYLE=\"box-sizing: border-box;\"><div>Paste the Certbot code snippet immediately below the server_name directive</div></li></ol></div><div><img src=\"../_resources/ea33b036da9e93e6027eb401db811daf.png\"  hash=\"ea33b036da9e93e6027eb401db811daf\" type=\"image/png\" width=\"1786\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Certbot additionally pastes a commented-out snippet for handling redirection from http to https, however, we&rsquo;ll ignore this snippet entirely since we&rsquo;ve already taken care of this in the previous step.\n</span></div></div><div><img src=\"../_resources/f25e73a46e8090f8bc8674a20d4e21ff.png\"  hash=\"f25e73a46e8090f8bc8674a20d4e21ff\" type=\"image/png\" width=\"1396\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">After you finish all edits you&rsquo;ll need to restart Nginx:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo systemctl restart nginx</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">To verify that your configuration edits are correct you should check the server status after restarting:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo systemctl status nginx</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">4. Test Your Platform\n</span></h5></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">If everything works then your Open edX LMS and CMS should automatically redirect to https.\n</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/d33c01c5f658ea686d03d5981249f4cc.png\"  hash=\"d33c01c5f658ea686d03d5981249f4cc\" type=\"image/png\" width=\"1896\" alt=\"\" /></en-media></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">5. Setup A Cron Job To Auto-Renew Your Certificate(s)\n</span></h5><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The Certbot packages on your system come with a cron job that will renew your certificates automatically before they expire. Since Let&rsquo;s Encrypt certificates expire after only 90 days, it&rsquo;s highly advisable to take advantage of this feature. You can test automatic renewal for your certificates by running this command:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo certbot renew --dry-run</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">If that appears to be working correctly, you can arrange for automatic renewal by adding a cron job which runs the following command on a recurring basis:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">certbot renew</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The screen shot below shows a cron job that runs once a day to check for and renew any expiring certificates.\n</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/d7609dd061ae45bc6a7349a92ffe95a3.png\"  hash=\"d7609dd061ae45bc6a7349a92ffe95a3\" type=\"image/png\" width=\"1036\" alt=\"\" /></en-media></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">I hope you found this helpful. Please help me improve this article by leaving a comment below. Thank you!</span></div><h1 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 42px; letter-spacing: normal; font-size: 30px; color: rgb(25, 25, 25); font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 42px; letter-spacing: normal; font-size: 30px; color: rgb(25, 25, 25); font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\">Add SSL Encryption to Open edX\n</span></h1><div STYLE=\"box-sizing: border-box; color: rgb(116, 116, 116); font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"><div STYLE=\"box-sizing: border-box; background-color: rgb(241, 241, 241); padding: 0px; border-top-width: 5px; border-top-style: solid; border-color: rgb(201, 201, 201); border-bottom-width: 5px; border-bottom-style: solid; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: left; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 145.125px; padding: 0px 0px 0px 14.1719px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box; -webkit-box-pack: center; justify-content: center; -webkit-box-align: center; align-items: center; min-height: 145.125px;\"><div STYLE=\"box-sizing: border-box; -webkit-box-flex: 1; flex: 1 1 0%; max-width: 100%;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: right; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">Add a free Let&rsquo;s Encrypt SSL/TLS certificate to your Open edX installation in just a few minutes using this step-by-step how-to guide.</span></div></div></div></div></div></div><br/></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h4 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.5; letter-spacing: 0px; font-size: 18px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.5; letter-spacing: 0px; font-size: 18px; color: rgb(51, 51, 51);\">Summary\n</span></h4><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"https://letsencrypt.org/\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">Let&rsquo;s Encrypt</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;is a free, automated, and open Certificate Authority that is sponsored by Internet Security Research Group (ISRG) which itself is a venerable who&rsquo;s who of silicon valley Internet companies. Let&rsquo;s Encrypt has made it much easier to request, install and maintain SSL/TLS certificates on your web servers. For Ubuntu/Nginx web apps like Open edX, Let&rsquo;s Encrypt uses a platform named&nbsp;</span><a HREF=\"https://certbot.eff.org/\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">Certbot</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;that provides a simple installation process that&nbsp;</span><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">MOSTLY</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;works, barring a couple of minor hiccups. By following these instructions you should be able to get HTTPS working on your server in less than an hour.\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">If you&rsquo;re already familiar with Nginx then you can probably jump over to&nbsp;</span><a HREF=\"https://certbot.eff.org/lets-encrypt/ubuntuxenial-nginx\" STYLE=\"box-sizing: border-box; font-style: italic; color: orange;-en-paragraph:true;\">Certbot&rsquo;s installation guide for Ubuntu 16.04 / Nginx</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">, and if so then god speed.&nbsp;Otherwise by all means, please read on.</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Now, about those hiccups. First, as of the date of publication of this post at least, Certbot&rsquo;s instructions required a minor modification. Second, some of the Open edX virtual server configurations are too complex for certbot to understand, causing it to make minor though correctable mistakes when configuring HTTP redirections to HTTPS. Fortunately, both of these are minor problems which we&rsquo;ll easily avert in the procedure that follows.\n</span></div><h4 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.5; letter-spacing: 0px; font-size: 18px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.5; letter-spacing: 0px; font-size: 18px; color: rgb(51, 51, 51);\">Setup Procedure\n</span></h4></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(241, 241, 241); padding: 25px 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: left; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 223px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><ol STYLE=\"box-sizing: border-box;\"><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#1\" STYLE=\"box-sizing: border-box; color: orange;\">Edit Nginx Virtual Server Configurations</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#2\" STYLE=\"box-sizing: border-box; color: orange;\">Install Certbot</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#3\" STYLE=\"box-sizing: border-box; color: orange;\">Prepare Your Nginx Virtual Server Configurations</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#4\" STYLE=\"box-sizing: border-box; color: orange;\">Test Your Platform</a></div></li><li STYLE=\"box-sizing: border-box;\"><div><a HREF=\"https://blog.lawrencemcdaniel.com/open-edx-ssl-encryption/#5\" STYLE=\"box-sizing: border-box; color: orange;\">Setup a Cron Job to Auto-Renew Your Certificate(s)</a></div></li></ol></div></div></div><div STYLE=\"box-sizing: border-box; z-index: 2000; float: left; visibility: visible; animation-fill-mode: both; animation-duration: 0.3s; box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 8px 0px, rgba(0, 0, 0, 0.19) 0px 6px 20px 0px;\"><div STYLE=\"box-sizing: border-box; min-height: 223px; background-blend-mode: overlay; background-color: rgba(0, 0, 0, 0.25); border: 1px solid rgb(0, 0, 0); padding: 0px; background-size: cover; background-position: left top; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: center; font-size: 28px; color: rgb(85, 85, 85); margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-size: 28px; color: rgb(85, 85, 85); font-weight: bold;-en-paragraph:true;\">Need it now?</span></div></div><div STYLE=\"box-sizing: border-box; clear: both; text-align: center;\"><a HREF=\"https://clients.lawrencemcdaniel.com/product/install-ssl-certificate/\" STYLE=\"box-sizing: border-box; clear: both; color: orange; zoom: 1; border: 1px solid rgb(192, 131, 11); text-transform: uppercase; font-weight: bold; cursor: pointer; line-height: 17px; font-size: 14px; font-family: &quot;Fira Sans&quot;; letter-spacing: 1px; outline: 0px; background-image: linear-gradient(to top, rgb(248, 191, 86), rgb(251, 220, 134)); background-color: rgb(251, 220, 134); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; box-shadow: none !important;\">PROFESSIONAL INSTALLATION SERVICE</a></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: center; color: rgb(85, 85, 85); margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; color: rgb(85, 85, 85);-en-paragraph:true;\">Get SSL encryption working same day.\n</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">1. Prepare Your Nginx Virtual Server Configuration Files\n</span></h5></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Open edx runs on&nbsp;</span><a HREF=\"https://www.nginx.com/\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">Nginx</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">, a fast, bare-bones web server alternative to Apache, and like Apache, Nginx can host multiple virtual web servers on the same Ubuntu server instance. In the case of the Open edX software suite there are nearly a dozen such web servers &mdash; two of them being your LMS and Course Management Studio &mdash; which you can view from either of the following two paths:\n</span></div><p STYLE=\"box-sizing: border-box; text-align: center;\"></p><div><span STYLE=\"box-sizing: border-box;\">/etc/nginx/sites-enabled/</span></div><div><br/></div><div>or</div><div><br/></div><div STYLE=\"margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">/edx/app/nginx/sites-available/</span><span STYLE=\"-en-paragraph:true;\">\n</span></div><p></p></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/c011e46e87b5aee7ef9b32b58d1e6097.png\"  hash=\"c011e46e87b5aee7ef9b32b58d1e6097\" type=\"image/png\" width=\"1610\" alt=\"\" /></en-media></div></div><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-weight: bold; text-decoration: underline;-en-paragraph:true;\">Explicitly name each server</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">. Open edx native build configuration, by design, automagically infers the fully-qualified domain name of your LMS, elminating any need on your part to explicitly name the virtual server. Unfortunately, this convenience strategy undermines Certbot&rsquo;s ability to read your virtual server configuration files to determine the names of the SSL certificates you need to request. You&rsquo;ll therefore need to edit the LMS and CMS files, adding a line near the top of each file to explicitly name each server.\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo vim /etc/nginx/sites-enabled/lms</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/9b4052cbed362974975552a806b9fd3b.png\"  hash=\"9b4052cbed362974975552a806b9fd3b\" type=\"image/png\" width=\"1542\" alt=\"\" /></en-media></div></div><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">This post only covers setting up SSL/TLS for the LMS and CMS, however, if you analyze the other virtual server configuration files in this folder you&rsquo;ll probably be able to apply these same procedures to other sites in your Open edX software suite like for example, the Ecommerce module.\n</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(241, 241, 241); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: justify; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">On an aside, you should note that many of the virtual server configurations in this folder make use of unorthodox http port assignments. For example, Studio is assigned to port 18010. For the avoidance of any doubts, the Open edX design team deliberately took this approach so that you&rsquo;d only need one fully-qualified domain name (eg </span><a HREF=\"http://edx.org\" STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">edx.org</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">) to access the entire suite of software. However, you can easily set one&nbsp; or more of the applications to it&rsquo;s own fully-qualified domain name in order to make it more accessible and user friendly for your users. For example, for obsessive-compulsive dev ops types (like me) you could create an entire series of subdomains such as:</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><ul STYLE=\"box-sizing: border-box; list-style-type: none; padding: 0px; font-size: 14px; line-height: 23.8px;\"><li STYLE=\"box-sizing: border-box; padding: 0px 0px 5.5px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://studio.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">studio.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://forum.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">forum.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li></ul></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><ul STYLE=\"box-sizing: border-box; list-style-type: none; padding: 0px; font-size: 14px; line-height: 23.8px;\"><li STYLE=\"box-sizing: border-box; padding: 0px 0px 5.5px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://ecommerce.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">ecommerce.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://discovery.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">discovery.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li><li STYLE=\"box-sizing: border-box; padding: 5.5px 0px;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><a HREF=\"http://notes.example.com\" STYLE=\"box-sizing: border-box;-en-paragraph:true;\">notes.example.com</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">\n</span></div></div></li></ul></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; text-align: justify; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">For example, for the demo server that I built for this article I created a primary domain for the LMS (</span><a HREF=\"http://edx-ssl.lawrencemcdaniel.com\" STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">edx-ssl.lawrencemcdaniel.com</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">) and a subdomain for Studio (</span><a HREF=\"http://edx-ssl-studio.lawrencemcdaniel.com\" STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">edx-ssl-studio.lawrencemcdaniel.com</a><span STYLE=\"box-sizing: border-box; font-style: italic;-en-paragraph:true;\">).</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">In general, all that&rsquo;s required is that the DNS record for each sub domain points to the same server IP address, and that you edit each virtual server configuration to explicitly name each virtual server and change the &ldquo;Listen&rdquo; port back to the default 80 (or 443 for SSL). Lastly, you&rsquo;d also need to do a search &amp; replace of the server name(s) in the two edX Platform configuration files /edx/app/edxapp/lms.env.json and&nbsp;&nbsp;/edx/app/edxapp/cms.env.json.\n</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">2. Install Certbot\n</span></h5><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The published installation procedure on the Certbot web site didn&rsquo;t work earlier today as I was preparing to write this post. Here&rsquo;s the error message I received when I attempted to run the installation for Nginx running on an Ubuntu server:\n</span></div></div><div><img src=\"../_resources/43a90542c3cd8f6aefb71559b97faed2.png\"  hash=\"43a90542c3cd8f6aefb71559b97faed2\" type=\"image/png\" width=\"1746\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Fortunately, I found the following&nbsp;</span><a HREF=\"https://github.com/certbot/certbot/issues/5405\" STYLE=\"box-sizing: border-box; color: orange;-en-paragraph:true;\">thread dated 9-January-2018</a><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">&nbsp;explaining both the problem and a workaround. The short story is that the following&nbsp;modified installation instructions should work:\n</span></div><div STYLE=\"box-sizing: border-box; padding: 10px; border: 1px solid rgb(136, 136, 136); overflow: auto; background-color: rgb(241, 241, 241);\"><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> update</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> install software</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">properties</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">common</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo add</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">repository universe</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo add</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">repository ppa</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">:</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">certbot</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">/</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">certbot</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> update</span></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo apt</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 136);\">get</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> install certbot python</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">certbot</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">nginx </span></div><div><br/></div><div><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">sudo certbot </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">authenticator standalone </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">installer nginx </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">pre</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">hook </span><span STYLE=\"box-sizing: border-box; color: rgb(0, 136, 0);\">&quot;service nginx stop&quot;</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\"> </span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">--</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">post</span><span STYLE=\"box-sizing: border-box; color: rgb(102, 102, 0);\">-</span><span STYLE=\"box-sizing: border-box; color: rgb(0, 0, 0);\">hook </span><span STYLE=\"box-sizing: border-box; color: rgb(0, 136, 0);\">&quot;service nginx start&quot;</span></div></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">After re-running the install procedure with these modified instructions you should see screen output substantially resembling the following.\n</span></div></div><div><img src=\"../_resources/78ee5def8b065c27d160109b685ecdfa.png\"  hash=\"78ee5def8b065c27d160109b685ecdfa\" type=\"image/png\" width=\"2462\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Choose &ldquo;2: Redirect&rdquo; and hit enter.\n</span></div></div><div><img src=\"../_resources/631d7fd90b0e3be98d5fd9278d54138e.png\"  hash=\"631d7fd90b0e3be98d5fd9278d54138e\" type=\"image/png\" width=\"2446\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">If you got similar results then CONGRATULATIONS, you are now the proud owner of your very own SSL/TLS certificates! Certbot only does two things during its installation procedure. First, it saves sets of files in&nbsp;</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">/etc/letsencrypt/live/</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">. And second, it modifies your Nginx virtual server configurations located in&nbsp;</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">/etc/nginx/sites-enabled/</span><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">. Using sudo you can inspect both of these to learn more about the specifics of what it did.\n</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">3. Edit Nginx Virtual Server Config Files\n</span></h5></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The Open edX virtual server configuration files for the LMS and CMS are a little too complex for Certbot to analyze, causing it make a couple of minor mistakes. First, it correctly adds a new listener on port 443 but incorrectly neglects to un-assign the existing listener on port 80. Second, it incorrectly places the SSL certificate files paths and listener directive at the bottom of the virtual server config file. Fortunately, these are easy to remedy.\n</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">First, open the lms config file and look for the new configuration code snippets that Certbot added near the bottom of the file.\n</span></div></div><div><img src=\"../_resources/0df111cf0d6fc7eb4948273c9b7da9f6.png\"  hash=\"0df111cf0d6fc7eb4948273c9b7da9f6\" type=\"image/png\" width=\"2368\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Cut and re-paste this configuration code snippet towards the top of the same file as per the screen shot below. Summarizing what we&rsquo;re doing:\n</span></div><ol STYLE=\"box-sizing: border-box;\"><li STYLE=\"box-sizing: border-box;\"><div>Add a new virtual server that listens on port 80, and redirects all traffic to https</div></li><li STYLE=\"box-sizing: border-box;\"><div>In the original virtual server declaration, remove the directive to listen on port 80</div></li><li STYLE=\"box-sizing: border-box;\"><div>Paste the Certbot code snippet immediately below the server_name directive</div></li></ol></div><div><img src=\"../_resources/ea33b036da9e93e6027eb401db811daf.png\"  hash=\"ea33b036da9e93e6027eb401db811daf\" type=\"image/png\" width=\"1786\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">Certbot additionally pastes a commented-out snippet for handling redirection from http to https, however, we&rsquo;ll ignore this snippet entirely since we&rsquo;ve already taken care of this in the previous step.\n</span></div></div><div><img src=\"../_resources/f25e73a46e8090f8bc8674a20d4e21ff.png\"  hash=\"f25e73a46e8090f8bc8674a20d4e21ff\" type=\"image/png\" width=\"1396\" alt=\"\" /></en-media></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">After you finish all edits you&rsquo;ll need to restart Nginx:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo systemctl restart nginx</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">To verify that your configuration edits are correct you should check the server status after restarting:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo systemctl status nginx</span></div></div></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">4. Test Your Platform\n</span></h5></div><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">If everything works then your Open edX LMS and CMS should automatically redirect to https.\n</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/d33c01c5f658ea686d03d5981249f4cc.png\"  hash=\"d33c01c5f658ea686d03d5981249f4cc\" type=\"image/png\" width=\"1896\" alt=\"\" /></en-media></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><h5 STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\"><span STYLE=\"box-sizing: border-box; font-family: &quot;Fira Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold; line-height: 1.25; letter-spacing: 0px; font-size: 16px; color: rgb(51, 51, 51);\">5. Setup A Cron Job To Auto-Renew Your Certificate(s)\n</span></h5><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The Certbot packages on your system come with a cron job that will renew your certificates automatically before they expire. Since Let&rsquo;s Encrypt certificates expire after only 90 days, it&rsquo;s highly advisable to take advantage of this feature. You can test automatic renewal for your certificates by running this command:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">sudo certbot renew --dry-run</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">If that appears to be working correctly, you can arrange for automatic renewal by adding a cron job which runs the following command on a recurring basis:\n</span></div><div STYLE=\"box-sizing: border-box; text-align: center; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">certbot renew</span></div><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">The screen shot below shows a cron job that runs once a day to check for and renew any expiring certificates.\n</span></div></div></div></div><div STYLE=\"box-sizing: border-box; float: left;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><img src=\"../_resources/d7609dd061ae45bc6a7349a92ffe95a3.png\"  hash=\"d7609dd061ae45bc6a7349a92ffe95a3\" type=\"image/png\" width=\"1036\" alt=\"\" /></en-media></div></div></div></div><div STYLE=\"box-sizing: border-box; background-color: rgb(255, 255, 255); padding: 0px; background-position: center center; background-repeat: no-repeat no-repeat;\"><div STYLE=\"box-sizing: border-box; zoom: 1; z-index: 10; max-width: 1230px; padding-left: 0px; padding-right: 0px;\"><div STYLE=\"box-sizing: border-box; clear: both; float: none;\"><div STYLE=\"box-sizing: border-box; min-height: 1px; padding: 0px; background-position: left top; background-repeat: no-repeat; background-size: cover;\"><div STYLE=\"box-sizing: border-box;\"><div STYLE=\"box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;\"><span STYLE=\"box-sizing: border-box;-en-paragraph:true;\">I hope you found this helpful. Please help me improve this article by leaving a comment below. Thank you!\n</span></div></div></div></div></div></div></div></div></div></div></div></div></div><div><br/></div></en-note>      ",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "checksum": "14a58c5aeba9ea3fe65eac06d83f85234327d26d53821f0b541641686f4d3ac9",
        "path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/无标题笔记-3.html"
      }
    },
    {
      "id": "9f340370-63e5-424d-ae3a-3dd64ae4a42a",
      "note_id": "7588d060-15a7-4ad6-9643-38b7c40a05a7",
      "variant_type": "clean_text",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-09T20:01:35.975186Z",
      "content": "---\ntitle: 无标题笔记\nupdated: 2021-02-26 19:15:37Z\ncreated: 2021-02-26 19:14:36Z\nauthor: tangyongfeng@gmail.com\n---\n\nAdd SSL Encryption to Open edX\n\nAdd a free Let’s Encrypt SSL/TLS certificate to your Open edX installation in just a few minutes using this step-by-step how-to guide.\nSummary\nLet’s Encrypt\n is a free, automated, and open Certificate Authority that is sponsored by Internet Security Research Group (ISRG) which itself is a venerable who’s who of silicon valley Internet companies. Let’s Encrypt has made it much easier to request, install and maintain SSL/TLS certificates on your web servers. For Ubuntu/Nginx web apps like Open edX, Let’s Encrypt uses a platform named \nCertbot\n that provides a simple installation process that \nMOSTLY\n works, barring a couple of minor hiccups. By following these instructions you should be able to get HTTPS working on your server in less than an hour.\n\nIf you’re already familiar with Nginx then you can probably jump over to \nCertbot’s installation guide for Ubuntu 16.04 / Nginx\n, and if so then god speed. Otherwise by all means, please read on.\nNow, about those hiccups. First, as of the date of publication of this post at least, Certbot’s instructions required a minor modification. Second, some of the Open edX virtual server configurations are too complex for certbot to understand, causing it to make minor though correctable mistakes when configuring HTTP redirections to HTTPS. Fortunately, both of these are minor problems which we’ll easily avert in the procedure that follows.\n\nSetup Procedure\n\nEdit Nginx Virtual Server Configurations\nInstall Certbot\nPrepare Your Nginx Virtual Server Configurations\nTest Your Platform\nSetup a Cron Job to Auto-Renew Your Certificate(s\n1. Prepare Your Nginx Virtual Server Configuration Files\nOpen edx runs on \nNginx\n, a fast, bare-bones web server alternative to Apache, and like Apache, Nginx can host multiple virtual web servers on the same Ubuntu server instance. In the case of the Open edX software suite there are nearly a dozen such web servers — two of them being your LMS and Course Management Studio — which you can view from either of the following two paths:\n\n/etc/nginx/sites-enabled/\nor\n/edx/app/nginx/sites-available/\n\nExplicitly name each server\n. Open edx native build configuration, by design, automagically infers the fully-qualified domain name of your LMS, elminating any need on your part to explicitly name the virtual server. Unfortunately, this convenience strategy undermines Certbot’s ability to read your virtual server configuration files to determine the names of the SSL certificates you need to request. You’ll therefore need to edit the LMS and CMS files, adding a line near the top of each file to explicitly name each server.\n\nsudo vim /etc/nginx/sites-enabled/lms\nThis post only covers setting up SSL/TLS for the LMS and CMS, however, if you analyze the other virtual server configuration files in this folder you’ll probably be able to apply these same procedures to other sites in your Open edX software suite like for example, the Ecommerce module.\n\nOn an aside, you should note that many of the virtual server configurations in this folder make use of unorthodox http port assignments. For example, Studio is assigned to port 18010. For the avoidance of any doubts, the Open edX design team deliberately took this approach so that you’d only need one fully-qualified domain name (eg\nedx.org\n) to access the entire suite of software. However, you can easily set one  or more of the applications to it’s own fully-qualified domain name in order to make it more accessible and user friendly for your users. For example, for obsessive-compulsive dev ops types (like me) you could create an entire series of subdomains such as:\nexample.com\n\nstudio.example.com\n\nforum.example.com\n\necommerce.example.com\n\ndiscovery.example.com\n\nnotes.example.com\n\nFor example, for the demo server that I built for this article I created a primary domain for the LMS (\nedx-ssl.lawrencemcdaniel.com\n) and a subdomain for Studio (\nedx-ssl-studio.lawrencemcdaniel.com\n).\nIn general, all that’s required is that the DNS record for each sub domain points to the same server IP address, and that you edit each virtual server configuration to explicitly name each virtual server and change the “Listen” port back to the default 80 (or 443 for SSL). Lastly, you’d also need to do a search & replace of the server name(s) in the two edX Platform configuration files /edx/app/edxapp/lms.env.json and  /edx/app/edxapp/cms.env.json.\n\n2. Install Certbot\n\nThe published installation procedure on the Certbot web site didn’t work earlier today as I was preparing to write this post. Here’s the error message I received when I attempted to run the installation for Nginx running on an Ubuntu server:\n\nFortunately, I found the following \nthread dated 9-January-2018\n explaining both the problem and a workaround. The short story is that the following modified installation instructions should work:\n\nsudo apt\n-\nget\n update\nsudo apt\n-\nget\n install software\n-\nproperties\n-\ncommon\nsudo add\n-\napt\n-\nrepository universe\nsudo add\n-\napt\n-\nrepository ppa\n:\ncertbot\n/\ncertbot\nsudo apt\n-\nget\n update\nsudo apt\n-\nget\n install certbot python\n-\ncertbot\n-\nnginx\nsudo certbot\n--\nauthenticator standalone\n--\ninstaller nginx\n--\npre\n-\nhook\n\"service nginx stop\"\n\n--\npost\n-\nhook\n\"service nginx start\"\nAfter re-running the install procedure with these modified instructions you should see screen output substantially resembling the following.\n\nChoose “2: Redirect” and hit enter.\n\nIf you got similar results then CONGRATULATIONS, you are now the proud owner of your very own SSL/TLS certificates! Certbot only does two things during its installation procedure. First, it saves sets of files in \n/etc/letsencrypt/live/\n. And second, it modifies your Nginx virtual server configurations located in \n/etc/nginx/sites-enabled/\n. Using sudo you can inspect both of these to learn more about the specifics of what it did.\n\n3. Edit Nginx Virtual Server Config Files\n\nThe Open edX virtual server configuration files for the LMS and CMS are a little too complex for Certbot to analyze, causing it make a couple of minor mistakes. First, it correctly adds a new listener on port 443 but incorrectly neglects to un-assign the existing listener on port 80. Second, it incorrectly places the SSL certificate files paths and listener directive at the bottom of the virtual server config file. Fortunately, these are easy to remedy.\n\nFirst, open the lms config file and look for the new configuration code snippets that Certbot added near the bottom of the file.\n\nCut and re-paste this configuration code snippet towards the top of the same file as per the screen shot below. Summarizing what we’re doing:\n\nAdd a new virtual server that listens on port 80, and redirects all traffic to https\nIn the original virtual server declaration, remove the directive to listen on port 80\nPaste the Certbot code snippet immediately below the server_name directive\nCertbot additionally pastes a commented-out snippet for handling redirection from http to https, however, we’ll ignore this snippet entirely since we’ve already taken care of this in the previous step.\n\nAfter you finish all edits you’ll need to restart Nginx:\n\nsudo systemctl restart nginx\nTo verify that your configuration edits are correct you should check the server status after restarting:\n\nsudo systemctl status nginx\n4. Test Your Platform\n\nIf everything works then your Open edX LMS and CMS should automatically redirect to https.\n\n5. Setup A Cron Job To Auto-Renew Your Certificate(s)\n\nThe Certbot packages on your system come with a cron job that will renew your certificates automatically before they expire. Since Let’s Encrypt certificates expire after only 90 days, it’s highly advisable to take advantage of this feature. You can test automatic renewal for your certificates by running this command:\n\nsudo certbot renew --dry-run\nIf that appears to be working correctly, you can arrange for automatic renewal by adding a cron job which runs the following command on a recurring basis:\n\ncertbot renew\nThe screen shot below shows a cron job that runs once a day to check for and renew any expiring certificates.\n\nI hope you found this helpful. Please help me improve this article by leaving a comment below. Thank you!\nAdd SSL Encryption to Open edX\n\nAdd a free Let’s Encrypt SSL/TLS certificate to your Open edX installation in just a few minutes using this step-by-step how-to guide.\nSummary\n\nLet’s Encrypt\n is a free, automated, and open Certificate Authority that is sponsored by Internet Security Research Group (ISRG) which itself is a venerable who’s who of silicon valley Internet companies. Let’s Encrypt has made it much easier to request, install and maintain SSL/TLS certificates on your web servers. For Ubuntu/Nginx web apps like Open edX, Let’s Encrypt uses a platform named \nCertbot\n that provides a simple installation process that \nMOSTLY\n works, barring a couple of minor hiccups. By following these instructions you should be able to get HTTPS working on your server in less than an hour.\n\nIf you’re already familiar with Nginx then you can probably jump over to \nCertbot’s installation guide for Ubuntu 16.04 / Nginx\n, and if so then god speed. Otherwise by all means, please read on.\nNow, about those hiccups. First, as of the date of publication of this post at least, Certbot’s instructions required a minor modification. Second, some of the Open edX virtual server configurations are too complex for certbot to understand, causing it to make minor though correctable mistakes when configuring HTTP redirections to HTTPS. Fortunately, both of these are minor problems which we’ll easily avert in the procedure that follows.\n\nSetup Procedure\n\nEdit Nginx Virtual Server Configurations\nInstall Certbot\nPrepare Your Nginx Virtual Server Configurations\nTest Your Platform\nSetup a Cron Job to Auto-Renew Your Certificate(s)\nNeed it now?\nPROFESSIONAL INSTALLATION SERVICE\nGet SSL encryption working same day.\n\n1. Prepare Your Nginx Virtual Server Configuration Files\n\nOpen edx runs on \nNginx\n, a fast, bare-bones web server alternative to Apache, and like Apache, Nginx can host multiple virtual web servers on the same Ubuntu server instance. In the case of the Open edX software suite there are nearly a dozen such web servers — two of them being your LMS and Course Management Studio — which you can view from either of the following two paths:\n\n/etc/nginx/sites-enabled/\nor\n/edx/app/nginx/sites-available/\n\nExplicitly name each server\n. Open edx native build configuration, by design, automagically infers the fully-qualified domain name of your LMS, elminating any need on your part to explicitly name the virtual server. Unfortunately, this convenience strategy undermines Certbot’s ability to read your virtual server configuration files to determine the names of the SSL certificates you need to request. You’ll therefore need to edit the LMS and CMS files, adding a line near the top of each file to explicitly name each server.\n\nsudo vim /etc/nginx/sites-enabled/lms\nThis post only covers setting up SSL/TLS for the LMS and CMS, however, if you analyze the other virtual server configuration files in this folder you’ll probably be able to apply these same procedures to other sites in your Open edX software suite like for example, the Ecommerce module.\n\nOn an aside, you should note that many of the virtual server configurations in this folder make use of unorthodox http port assignments. For example, Studio is assigned to port 18010. For the avoidance of any doubts, the Open edX design team deliberately took this approach so that you’d only need one fully-qualified domain name (eg\nedx.org\n) to access the entire suite of software. However, you can easily set one  or more of the applications to it’s own fully-qualified domain name in order to make it more accessible and user friendly for your users. For example, for obsessive-compulsive dev ops types (like me) you could create an entire series of subdomains such as:\nexample.com\n\nstudio.example.com\n\nforum.example.com\n\necommerce.example.com\n\ndiscovery.example.com\n\nnotes.example.com\n\nFor example, for the demo server that I built for this article I created a primary domain for the LMS (\nedx-ssl.lawrencemcdaniel.com\n) and a subdomain for Studio (\nedx-ssl-studio.lawrencemcdaniel.com\n).\nIn general, all that’s required is that the DNS record for each sub domain points to the same server IP address, and that you edit each virtual server configuration to explicitly name each virtual server and change the “Listen” port back to the default 80 (or 443 for SSL). Lastly, you’d also need to do a search & replace of the server name(s) in the two edX Platform configuration files /edx/app/edxapp/lms.env.json and  /edx/app/edxapp/cms.env.json.\n\n2. Install Certbot\n\nThe published installation procedure on the Certbot web site didn’t work earlier today as I was preparing to write this post. Here’s the error message I received when I attempted to run the installation for Nginx running on an Ubuntu server:\n\nFortunately, I found the following \nthread dated 9-January-2018\n explaining both the problem and a workaround. The short story is that the following modified installation instructions should work:\n\nsudo apt\n-\nget\n update\nsudo apt\n-\nget\n install software\n-\nproperties\n-\ncommon\nsudo add\n-\napt\n-\nrepository universe\nsudo add\n-\napt\n-\nrepository ppa\n:\ncertbot\n/\ncertbot\nsudo apt\n-\nget\n update\nsudo apt\n-\nget\n install certbot python\n-\ncertbot\n-\nnginx\nsudo certbot\n--\nauthenticator standalone\n--\ninstaller nginx\n--\npre\n-\nhook\n\"service nginx stop\"\n\n--\npost\n-\nhook\n\"service nginx start\"\nAfter re-running the install procedure with these modified instructions you should see screen output substantially resembling the following.\n\nChoose “2: Redirect” and hit enter.\n\nIf you got similar results then CONGRATULATIONS, you are now the proud owner of your very own SSL/TLS certificates! Certbot only does two things during its installation procedure. First, it saves sets of files in \n/etc/letsencrypt/live/\n. And second, it modifies your Nginx virtual server configurations located in \n/etc/nginx/sites-enabled/\n. Using sudo you can inspect both of these to learn more about the specifics of what it did.\n\n3. Edit Nginx Virtual Server Config Files\n\nThe Open edX virtual server configuration files for the LMS and CMS are a little too complex for Certbot to analyze, causing it make a couple of minor mistakes. First, it correctly adds a new listener on port 443 but incorrectly neglects to un-assign the existing listener on port 80. Second, it incorrectly places the SSL certificate files paths and listener directive at the bottom of the virtual server config file. Fortunately, these are easy to remedy.\n\nFirst, open the lms config file and look for the new configuration code snippets that Certbot added near the bottom of the file.\n\nCut and re-paste this configuration code snippet towards the top of the same file as per the screen shot below. Summarizing what we’re doing:\n\nAdd a new virtual server that listens on port 80, and redirects all traffic to https\nIn the original virtual server declaration, remove the directive to listen on port 80\nPaste the Certbot code snippet immediately below the server_name directive\nCertbot additionally pastes a commented-out snippet for handling redirection from http to https, however, we’ll ignore this snippet entirely since we’ve already taken care of this in the previous step.\n\nAfter you finish all edits you’ll need to restart Nginx:\n\nsudo systemctl restart nginx\nTo verify that your configuration edits are correct you should check the server status after restarting:\n\nsudo systemctl status nginx\n4. Test Your Platform\n\nIf everything works then your Open edX LMS and CMS should automatically redirect to https.\n\n5. Setup A Cron Job To Auto-Renew Your Certificate(s)\n\nThe Certbot packages on your system come with a cron job that will renew your certificates automatically before they expire. Since Let’s Encrypt certificates expire after only 90 days, it’s highly advisable to take advantage of this feature. You can test automatic renewal for your certificates by running this command:\n\nsudo certbot renew --dry-run\nIf that appears to be working correctly, you can arrange for automatic renewal by adding a cron job which runs the following command on a recurring basis:\n\ncertbot renew\nThe screen shot below shows a cron job that runs once a day to check for and renew any expiring certificates.\n\nI hope you found this helpful. Please help me improve this article by leaving a comment below. Thank you!",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "language": "en",
        "length": 16664,
        "rule_count": 1,
        "applied_rules": [
          {
            "rule_id": "whitespace",
            "description": "Normalize whitespace",
            "note": "collapsed whitespace"
          }
        ]
      }
    }
  ],
  "extractions": [],
  "journal": {
    "id": "6a6d2d2f-7cdf-4b91-a1a1-a2be0492cc81",
    "note_id": "7588d060-15a7-4ad6-9643-38b7c40a05a7",
    "stage": "ingest",
    "agent_id": "evernote_ingest:v0",
    "started_at": "2025-11-09T20:01:35.975191Z",
    "finished_at": "2025-11-09T20:01:35.975191Z",
    "status": "success",
    "input_ref": {
      "task_id": "7a629906-7cee-4e0e-9e96-cb17e7f81996",
      "source_path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/无标题笔记-3.html",
      "checksum": "14a58c5aeba9ea3fe65eac06d83f85234327d26d53821f0b541641686f4d3ac9"
    },
    "output_ref": {
      "ingest_source": "dcbeedee-5884-4397-b290-bd074f8fa952",
      "note": "7588d060-15a7-4ad6-9643-38b7c40a05a7",
      "variants": [
        "029c4988-1e86-47e7-bfba-922858bf1e1a",
        "9f340370-63e5-424d-ae3a-3dd64ae4a42a"
      ]
    },
    "error_detail": null
  }
}