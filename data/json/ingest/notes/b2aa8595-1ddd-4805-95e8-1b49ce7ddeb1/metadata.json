{
  "ingest_source": {
    "id": "ee1d08a6-aad1-494b-b71d-0809b34ac35a",
    "source_type": "evernote_html",
    "source_path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/如何在Linux系统建立自己的闪电网络节点和通道_巴比特_服务于区块链创新者.html",
    "collected_at": "2025-11-09T20:01:35.623056Z",
    "external_id": null,
    "title_hint": null,
    "language_hint": "en",
    "captured_at": null,
    "checksum": "24e8921803918c704100a671db4370d8c8b4d1b648dd0095ed079275bdd1baa0",
    "status": "pending",
    "notes": {
      "batch_id": null
    }
  },
  "note": {
    "id": "b2aa8595-1ddd-4805-95e8-1b49ce7ddeb1",
    "ingest_source_id": "ee1d08a6-aad1-494b-b71d-0809b34ac35a",
    "canonical_title": "如何在Linux系统建立自己的闪电网络节点和通道_巴比特_服务于区块链创新者",
    "language": "en",
    "ingested_at": "2025-11-09T20:01:35.623060Z",
    "created_at": null,
    "status": "active",
    "importance": 0,
    "attributes": {
      "source_filename": "如何在Linux系统建立自己的闪电网络节点和通道_巴比特_服务于区块链创新者.html"
    }
  },
  "variants": [
    {
      "id": "c63d52f0-0d73-42d1-b2a7-9622e831afb7",
      "note_id": "b2aa8595-1ddd-4805-95e8-1b49ce7ddeb1",
      "variant_type": "raw_html",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-09T20:01:35.623063Z",
      "content": "---\ntitle: 如何在Linux系统建立自己的闪电网络节点和通道_巴比特_服务于区块链创新者\nupdated: 2019-02-18 10:00:08Z\ncreated: 2019-02-18 10:00:08Z\nsource: https://www.8btc.com/article/156211\n---\n\n\n<en-note>\n  <div>\n<div><br/></div><div STYLE=\"font-size: 16px; display:block; min-width: 100%; \"> <div STYLE=\"background-color:transparent;font:inherit;vertical-align:baseline;\"><div STYLE=\"background-color:transparent;font:inherit;vertical-align:baseline;font-family:&quot;PT Serif&quot;;font-size:16px;line-height:1.5em;color:rgb(31, 9, 9);text-align:left;\"><div STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><div STYLE=\"z-index:200;padding-left:2em;padding-right:2em;margin-left:auto;margin-right:auto;position:relative;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;width:36em;\"><div STYLE=\"position:relative;margin-left:-25px;margin-right:25px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><div STYLE=\"position:relative;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;padding-top:4.5em;padding-bottom:9em;\"><div STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><div STYLE=\"margin-bottom:0px;position:relative;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><div STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><div STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><h1 STYLE=\"padding:0px;margin:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:normal;font-size:35px;line-height:35px;margin-bottom:20px;font-family:&quot;PT Serif&quot;;text-align:left;\">如何在Linux系统建立自己的闪电网络节点和通道</h1><div STYLE=\"margin-bottom:0px;position:relative;margin:0px;height:1em;line-height:1;text-align:center;padding:0px;border:0px;font:inherit;vertical-align:baseline;padding-top:1.5em;padding-bottom:1.5em;\"><div STYLE=\"margin-bottom:0px;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;margin:0px;opacity:0.5;padding:0px;border:0px;font:inherit;vertical-align:baseline;background:-webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%);\"><span STYLE=\"font:inherit;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;margin:0px;opacity:0.5;background:-webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%);\"></span></div></div></div><div STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><span STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><a HREF=\"https://www.8btc.com/author/3019\" TARGET=\"_blank\" STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;text-decoration:none;color:rgb(6, 85, 136);\">\n            p2pbucks\n          </a><span STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">2018-01-24 13:19</span><span STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">发布在</span><span STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><a HREF=\"#\" TARGET=\"_blank\" STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;text-decoration:none;color:rgb(6, 85, 136);\">\n              技术指南\n            </a></span></span><span STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"> 26286\n        </span></div><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">有问题请及时指出，欢迎修改补充和转载</p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">如何在Linux系统建立自己的闪电网络节点和通道</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">下面你需要准备一个硬盘储存大于200G的VPS环境和Ubuntu 16.04系统。推荐用DigitalOcean的虚拟主机，文中的配置是320G硬盘/6核/16GRAM。费用为80$/月\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">uname -a\nLinux docker-s-6vcpu-16gb-sgp1-01 4.4.0-109-generic #132-Ubuntu SMP Tue Jan 9 19:52:39 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</pre>\n另外，你需要安装docker环境，如果你用的DigitalOcean，请在One-click APP 中选择Docker 17.12。<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">第一步，同步比特币网络数据</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">构建docker镜像\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">git clone https://github.com/dougvk/lightning-node.git\ncd lightning-node\ndocker build . -t dougvk/bitcoind</pre>\n运行比特币节点\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">mkdir -p /scratch/bitcoin/mainnet/bitcoind<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">docker run --name bitcoind_mainnet -d -v /scratch/bitcoin/mainnet/bitcoind:/data -p 8333:8333 -p 9735:9735 dougvk/bitcoind:latest</p><p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">docker logs bitcoind_mainnet --tail &quot;10&quot;</p></pre>\n将下列内容写到文件/usr/local/bin/bitcoin-cli\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">#!/usr/bin/env bash\ndocker run --rm --network container:bitcoind_mainnet -v /scratch/bitcoin/mainnet/bitcoind:/data dougvk/bitcoind:latest bitcoin-cli &quot;$@&quot;</pre>\n查看比特币节点运行情况\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">chmod +x /usr/local/bin/bitcoin-cli\nbitcoin-cli getinfo</pre>\n等待比特币网络同步账本，我用的新加坡节点大概9个小时同步完成<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">第二步，运行闪电网络节点</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">现在我们需要运行你的闪电网络节点了。用tmux或打开一个窗口监视闪电网络日志情况\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">mkdir -p /scratch/bitcoin/mainnet/clightning<p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">docker run --rm --name lightning --network container:bitcoind_mainnet -v /scratch/bitcoin/mainnet/bitcoind:/root/.bitcoin -v /scratch/bitcoin/mainnet/clightning:/root/.lightning --entrypoint /usr/bin/lightningd cdecker/lightningd:master --network=bitcoin --log-level=debug</p></pre>\n<div STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><div STYLE=\"margin-bottom:0px;display:block;text-align:center;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-top:1em;\"><img src=\"../_resources/201801240509118187.png\"  type=\"image/png\" hash=\"5cc90aecb6fb54e0581572e9a5d28b6c\" width=\"576\" height=\"354\" style=\"display:block;max-width:100%;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);\" alt=\"201801240509118187.png\" /></en-media></div></div>\n&nbsp;<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">将下列内容写到文件/usr/local/bin/lightning-cli 中\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">#!/usr/bin/env bash\ndocker run --rm -v /scratch/bitcoin/mainnet/clightning:/root/.lightning --entrypoint /usr/bin/lightning-cli cdecker/lightningd:master &quot;$@&quot;</pre>\n运行\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">chmod +x /usr/local/bin/lightning-cli</pre>\n检查闪电网络状况\n<div STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><img src=\"../_resources/201801240509207163.png\"  type=\"image/png\" hash=\"3d21d9c9794c57251af16b9ce5ee8379\" width=\"1280\" height=\"98\" style=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);\" alt=\"201801240509207163.png\" /></en-media></div>\n&nbsp;<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">第三步，发送比特币到你的闪电网络地址</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">现在你需要将一点比特币发送到你的闪电网络地址上，我发了0.001BTC到闪电网络地址。现在闪电网络还处于起步状态，很多地方需要改进，所以不要发送大量比特币。\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli newaddr\n{ &quot;address&quot; : &quot;34hXsNhraSsXKsJ2fu162HzEkCFSVUvFzu&quot; }</pre>\n等待确认后查看资金情况\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli listfunds\n{ &quot;outputs&quot; :&nbsp;\n&Tab;[&nbsp;\n&Tab;&Tab;{ &quot;txid&quot; : &quot;690652a94e13ae09e6a32556ce0a7b70043b321cdfb4db87ee144ce494dfd76e&quot;, &quot;output&quot; : 1, &quot;value&quot; : 100000 } ] }</pre>\n现在你需要把自己连接到闪电网络中了，去 <a HREF=\"https://lnmainnet.gaben.win/\" TARGET=\"_blank\" STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;text-decoration:none;color:rgb(6, 85, 136);\">https://lnmainnet.gaben.win/</a> 找到一个节点，点击找到详情。\n<div STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><div STYLE=\"margin-bottom:0px;display:block;text-align:center;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-top:1em;\"><img src=\"../_resources/201801240527283302.png\"  type=\"image/png\" hash=\"97d58cdacd0062c79bd5c4bf5b2aa39d\" width=\"576\" height=\"452\" style=\"display:block;max-width:100%;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;border-color:rgb(31, 9, 9);\" alt=\"201801240527283302.png\" /></en-media></div></div>\n&nbsp;<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">然后用lightning-cli 命令连接这个闪电网络节点\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli connect 02c119d2fd2e98a88f50d0d2ee4213255b7b8ec2be3a95f9aabd6afb09dd25b083 98.186.249.155:9735<p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">{ &quot;id&quot; : &quot;02c119d2fd2e98a88f50d0d2ee4213255b7b8ec2be3a95f9aabd6afb09dd25b083&quot; }</p></pre>\n查看闪电网络节点连接情况，我已经连接了两个节点\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli getpeers<p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">{ &quot;peers&quot; :&nbsp;\n&Tab;[&nbsp;\n&Tab;&Tab;{ &quot;state&quot; : &quot;GOSSIPING&quot;, &quot;peerid&quot; : &quot;02f6725f9c1c40333b67faea92fd211c183050f28df32cac3f9d69685fe9665432&quot;, &quot;netaddr&quot; :&nbsp;\n&Tab;&Tab;&Tab;[ &quot;104.198.32.198:9735&quot; ], &quot;connected&quot; : true, &quot;owner&quot; : &quot;lightning_gossipd&quot; },&nbsp;\n&Tab;&Tab;{ &quot;state&quot; : &quot;GOSSIPING&quot;, &quot;peerid&quot; : &quot;02c119d2fd2e98a88f50d0d2ee4213255b7b8ec2be3a95f9aabd6afb09dd25b083&quot;, &quot;netaddr&quot; :&nbsp;\n&Tab;&Tab;&Tab;[ &quot;98.186.249.155:9735&quot; ], &quot;connected&quot; : true, &quot;owner&quot; : &quot;lightning_gossipd&quot; } ] }</p></pre>\n&nbsp;<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">第四步，建立通道</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">在资金到账后，下面我们需要和某个已存在的闪电网络节点建立通道了。我选择了节点02f6725f9c1c40333b67faea92fd211c183050f28df32cac3f9d69685fe9665432 来建立闪电通道，其中 2000 satoshi 是通道建立费用\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">&nbsp;lightning-cli fundchannel 02f6725f9c1c40333b67faea92fd211c183050f28df32cac3f9d69685fe9665432 2000<p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">{ &quot;tx&quot; : &quot;020000000001016ed7df94e44c14ee87dbb4df1c323b04707b0ace5625a3e609ae134ea95206690100000017160014db08f81ac41d0c47ebff7ce173ddaa45b22d1253ffffffff02d007000000000000220020f92834320b66494ec5fefbf0a9052c7b4549730af446d004b477cc24ec9afb0d4750010000000000160014781b3864b779a54cf464e277a8fd93c38e8ab048024730440220549dc897e5a582a4c72a0ab8e1695b6ddc7d413e87b532b75f801d335e0e1ccf02205d5fec4bd7193dfbf6a22587ce6877bbcf9440998aaa7cd3a858a4e232cd17c601210301077c8d2e9e97fcf8f2e9a4d60bdf2c266da3b66f2103e8444ec0a7c358d88800000000&quot; }</p></pre>\n&nbsp;<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">第五步，收款和支付</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">收款</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">如果你想通过闪电网络收款的话可以运行以下命令。\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli invoice &lt;amount&gt; &lt;label&gt; &lt;description&gt;</pre>\n其中 label 和 description 是支付的标签和说明，amount是数量，单位为聪。\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">&nbsp;lightning-cli invoice 100 fist myfistLNpayment<p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">{ &quot;rhash&quot; : &quot;e762cc7be38cad612a30cc076992d3c1c897971868fffc4ca6b1e825f6e5841e&quot;, &quot;expiry_time&quot; : 1516615363, &quot;bolt11&quot; : &quot;lnbc1n1pdxt29npp5ua3vc7lr3jkkz23sesrknyknc8yf09ccdrllcn9xk85ztah9ss0qdqcd4ukv6tnw3xyuurp09kk2mn5cqpg987a88kj4t6wzthvqx6ky9zyys8ued6p5y7eh2k74u9z4nsqr4l8fh5e38gpch0syv6tuq7u83486c9hk3xs9pfuzx8r48evn757y0spd9fvph&quot; }</p></pre>\n这样我们就生成了<strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">bolt11地址</strong>，即上面那个JSON结构中的lnbcXXXX<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">bolt11地址中包含了支付的所有信息，我们可以解码一下这个地址\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli decodepay lnbc1n1pdxt29npp5ua3vc7lr3jkkz23sesrknyknc8yf09ccdrllcn9xk85ztah9ss0qdqcd4ukv6tnw3xyuurp09kk2mn5cqpg987a88kj4t6wzthvqx6ky9zyys8ued6p5y7eh2k74u9z4nsqr4l8fh5e38gpch0syv6tuq7u83486c9hk3xs9pfuzx8r48evn757y0spd9fvph<p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">{ &quot;currency&quot; : &quot;bc&quot;, &quot;timestamp&quot; : 1516611763, &quot;expiry&quot; : 3600, &quot;payee&quot; : &quot;03c3fa4e2b2c11ab9d4a078e13f0dfb091423e0f06d7d9cc1d9c9ba3b9a5ad5d50&quot;, &quot;msatoshi&quot; : 100, &quot;description&quot; : &quot;myfistLNpayment&quot;, &quot;payment_hash&quot; : &quot;e762cc7be38cad612a30cc076992d3c1c897971868fffc4ca6b1e825f6e5841e&quot;, &quot;signature&quot; : &quot;3044022029fdd39ed2aaf4e12eec01b5621444240fccb741a13d9baadeaf0a2ace001d7e022074de9989d01c5df02334be03dc3c6a7d60b7b44d02853c118e3a9f2c9fa9e23e&quot; }</p></pre>\n上面收款的金额和描述就显示了出来<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">把上面的bolt11支付地址发给对方就可以等待收款了</p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">支付</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">在我们知道了对方的bolt11支付地址后，我们就可以用以下命令进行支付了\n</p><pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli pay bolt11_addr</pre>\n在拿到付款方的bolt11地址后，我们用上面的lightning-cli decodepay bolt11解码出收款方的payee hash 然后查看通道\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">lightning-cli getroute 03c3fa4e2b2c11ab9d4a078e13f0dfb091423e0f06d7d9cc1d9c9ba3b9a5ad5d50</pre>\n如果通道存在的话就可以付款了\n<pre STYLE=\"width:auto;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-size:0.875em;line-height:1.71429em;background-color:rgb(243, 242, 238);font-family:Inconsolata;\">&nbsp;lightning-cli pay lnbc1n1pdxt29npp5ua3vc7lr3jkkz23sesrknyknc8yf09ccdrllcn9xk85ztah9ss0qdqcd4ukv6tnw3xyuurp09kk2mn5cqpg987a88kj4t6wzthvqx6ky9zyys8ued6p5y7eh2k74u9z4nsqr4l8fh5e38gpch0syv6tuq7u83486c9hk3x9pfuzx8r48evn757y0spd9fvph<p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">{ &quot;preimage&quot; : &quot;xd2005e012ff32b79f88fe976599c5dceeb99b111b81aa5087b815f2e4cdc59a&quot; }</p></pre>\n这样我们就完成了收付款的流程<p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><strong STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;\">参考说明</strong></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">本文主要参考了 <a HREF=\"https://medium.com/@dougvk/run-your-own-mainnet-lightning-node-2d2eab628a8b\" TARGET=\"_blank\" STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;text-decoration:none;color:rgb(6, 85, 136);\">https://medium.com/@dougvk/run-your-own-mainnet-lightning-node-2d2eab628a8b</a> 和 <a HREF=\"https://github.com/ElementsProject/lightning#opening-a-channel-on-the-bitcoin-testnet\" TARGET=\"_blank\" STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;text-decoration:none;color:rgb(6, 85, 136);\">https://github.com/ElementsProject/lightning#opening-a-channel-on-the-bitcoin-testnet</a></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">其他文档包括：</p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">闪电网络测试网络部署</p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\"><a HREF=\"https://interfect.github.io/#!/posts/009-Ride-the-Lightning.md\" TARGET=\"_blank\" STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;text-decoration:none;color:rgb(6, 85, 136);\">https://interfect.github.io/#!/posts/009-Ride-the-Lightning.md</a></p><p STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">闪电网络 windows 部署</p><p STYLE=\"margin-bottom:0px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\"><a HREF=\"https://medium.com/@jadmubaslat/bitcoin-lightning-network-node-easy-setup-tutorial-for-windows-desktop-users-a-how-to-guide-9937b5a8a669\" TARGET=\"_blank\" STYLE=\"margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;text-decoration:none;color:rgb(6, 85, 136);\">https://medium.com/@jadmubaslat/bitcoin-lightning-network-node-easy-setup-tutorial-for-windows-desktop-users-a-how-to-guide-9937b5a8a669</a></p></div></div></div><div STYLE=\"position:absolute;top:-1000px;left:-1000px;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;\">Measure</div><div STYLE=\"margin-bottom:0px;position:absolute;top:-1000px;left:-1000px;line-height:1;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;\">Measure</div></div></div></div></div></div></div></div>\n</div>\n</en-note>      ",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "checksum": "24e8921803918c704100a671db4370d8c8b4d1b648dd0095ed079275bdd1baa0",
        "path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/如何在Linux系统建立自己的闪电网络节点和通道_巴比特_服务于区块链创新者.html"
      }
    },
    {
      "id": "a1806066-2b40-4fd2-a820-4947a89b3091",
      "note_id": "b2aa8595-1ddd-4805-95e8-1b49ce7ddeb1",
      "variant_type": "clean_text",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-09T20:01:35.623065Z",
      "content": "---\ntitle: 如何在Linux系统建立自己的闪电网络节点和通道_巴比特_服务于区块链创新者\nupdated: 2019-02-18 10:00:08Z\ncreated: 2019-02-18 10:00:08Z\nsource: https://www.8btc.com/article/156211\n---\n\n如何在Linux系统建立自己的闪电网络节点和通道\n\n            p2pbucks\n         \n2018-01-24 13:19\n发布在\n\n              技术指南\n           \n 26286\n       \n有问题请及时指出，欢迎修改补充和转载\n如何在Linux系统建立自己的闪电网络节点和通道\n下面你需要准备一个硬盘储存大于200G的VPS环境和Ubuntu 16.04系统。推荐用DigitalOcean的虚拟主机，文中的配置是320G硬盘/6核/16GRAM。费用为80$/月\n\nuname -a\nLinux docker-s-6vcpu-16gb-sgp1-01 4.4.0-109-generic #132-Ubuntu SMP Tue Jan 9 19:52:39 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n另外，你需要安装docker环境，如果你用的DigitalOcean，请在One-click APP 中选择Docker 17.12。\n第一步，同步比特币网络数据\n构建docker镜像\n\ngit clone https://github.com/dougvk/lightning-node.git\ncd lightning-node\ndocker build . -t dougvk/bitcoind\n\n运行比特币节点\n\nmkdir -p /scratch/bitcoin/mainnet/bitcoind\ndocker run --name bitcoind_mainnet -d -v /scratch/bitcoin/mainnet/bitcoind:/data -p 8333:8333 -p 9735:9735 dougvk/bitcoind:latest\ndocker logs bitcoind_mainnet --tail \"10\"\n\n将下列内容写到文件/usr/local/bin/bitcoin-cli\n\n#!/usr/bin/env bash\ndocker run --rm --network container:bitcoind_mainnet -v /scratch/bitcoin/mainnet/bitcoind:/data dougvk/bitcoind:latest bitcoin-cli \"$@\"\n\n查看比特币节点运行情况\n\nchmod +x /usr/local/bin/bitcoin-cli\nbitcoin-cli getinfo\n\n等待比特币网络同步账本，我用的新加坡节点大概9个小时同步完成\n第二步，运行闪电网络节点\n现在我们需要运行你的闪电网络节点了。用tmux或打开一个窗口监视闪电网络日志情况\n\nmkdir -p /scratch/bitcoin/mainnet/clightning\ndocker run --rm --name lightning --network container:bitcoind_mainnet -v /scratch/bitcoin/mainnet/bitcoind:/root/.bitcoin -v /scratch/bitcoin/mainnet/clightning:/root/.lightning --entrypoint /usr/bin/lightningd cdecker/lightningd:master --network=bitcoin --log-level=debug\n\n将下列内容写到文件/usr/local/bin/lightning-cli 中\n\n#!/usr/bin/env bash\ndocker run --rm -v /scratch/bitcoin/mainnet/clightning:/root/.lightning --entrypoint /usr/bin/lightning-cli cdecker/lightningd:master \"$@\"\n\n运行\n\nchmod +x /usr/local/bin/lightning-cli\n\n检查闪电网络状况\n\n第三步，发送比特币到你的闪电网络地址\n现在你需要将一点比特币发送到你的闪电网络地址上，我发了0.001BTC到闪电网络地址。现在闪电网络还处于起步状态，很多地方需要改进，所以不要发送大量比特币。\n\nlightning-cli newaddr\n{ \"address\" : \"34hXsNhraSsXKsJ2fu162HzEkCFSVUvFzu\" }\n\n等待确认后查看资金情况\n\nlightning-cli listfunds\n{ \"outputs\" : \n [ \n { \"txid\" : \"690652a94e13ae09e6a32556ce0a7b70043b321cdfb4db87ee144ce494dfd76e\", \"output\" : 1, \"value\" : 100000 } ] }\n\n现在你需要把自己连接到闪电网络中了，去\nhttps://lnmainnet.gaben.win/\n 找到一个节点，点击找到详情。\n\n然后用lightning-cli 命令连接这个闪电网络节点\n\nlightning-cli connect 02c119d2fd2e98a88f50d0d2ee4213255b7b8ec2be3a95f9aabd6afb09dd25b083 98.186.249.155:9735\n{ \"id\" : \"02c119d2fd2e98a88f50d0d2ee4213255b7b8ec2be3a95f9aabd6afb09dd25b083\" }\n\n查看闪电网络节点连接情况，我已经连接了两个节点\n\nlightning-cli getpeers\n{ \"peers\" : \n [ \n { \"state\" : \"GOSSIPING\", \"peerid\" : \"02f6725f9c1c40333b67faea92fd211c183050f28df32cac3f9d69685fe9665432\", \"netaddr\" : \n [ \"104.198.32.198:9735\" ], \"connected\" : true, \"owner\" : \"lightning_gossipd\" }, \n { \"state\" : \"GOSSIPING\", \"peerid\" : \"02c119d2fd2e98a88f50d0d2ee4213255b7b8ec2be3a95f9aabd6afb09dd25b083\", \"netaddr\" : \n [ \"98.186.249.155:9735\" ], \"connected\" : true, \"owner\" : \"lightning_gossipd\" } ] }\n\n第四步，建立通道\n在资金到账后，下面我们需要和某个已存在的闪电网络节点建立通道了。我选择了节点02f6725f9c1c40333b67faea92fd211c183050f28df32cac3f9d69685fe9665432 来建立闪电通道，其中 2000 satoshi 是通道建立费用\n\n lightning-cli fundchannel 02f6725f9c1c40333b67faea92fd211c183050f28df32cac3f9d69685fe9665432 2000\n{ \"tx\" : \"020000000001016ed7df94e44c14ee87dbb4df1c323b04707b0ace5625a3e609ae134ea95206690100000017160014db08f81ac41d0c47ebff7ce173ddaa45b22d1253ffffffff02d007000000000000220020f92834320b66494ec5fefbf0a9052c7b4549730af446d004b477cc24ec9afb0d4750010000000000160014781b3864b779a54cf464e277a8fd93c38e8ab048024730440220549dc897e5a582a4c72a0ab8e1695b6ddc7d413e87b532b75f801d335e0e1ccf02205d5fec4bd7193dfbf6a22587ce6877bbcf9440998aaa7cd3a858a4e232cd17c601210301077c8d2e9e97fcf8f2e9a4d60bdf2c266da3b66f2103e8444ec0a7c358d88800000000\" }\n\n第五步，收款和支付\n收款\n如果你想通过闪电网络收款的话可以运行以下命令。\n\nlightning-cli invoice <amount> <label> <description>\n\n其中 label 和 description 是支付的标签和说明，amount是数量，单位为聪。\n\n lightning-cli invoice 100 fist myfistLNpayment\n{ \"rhash\" : \"e762cc7be38cad612a30cc076992d3c1c897971868fffc4ca6b1e825f6e5841e\", \"expiry_time\" : 1516615363, \"bolt11\" : \"lnbc1n1pdxt29npp5ua3vc7lr3jkkz23sesrknyknc8yf09ccdrllcn9xk85ztah9ss0qdqcd4ukv6tnw3xyuurp09kk2mn5cqpg987a88kj4t6wzthvqx6ky9zyys8ued6p5y7eh2k74u9z4nsqr4l8fh5e38gpch0syv6tuq7u83486c9hk3xs9pfuzx8r48evn757y0spd9fvph\" }\n\n这样我们就生成了\nbolt11地址\n，即上面那个JSON结构中的lnbcXXXX\nbolt11地址中包含了支付的所有信息，我们可以解码一下这个地址\n\nlightning-cli decodepay lnbc1n1pdxt29npp5ua3vc7lr3jkkz23sesrknyknc8yf09ccdrllcn9xk85ztah9ss0qdqcd4ukv6tnw3xyuurp09kk2mn5cqpg987a88kj4t6wzthvqx6ky9zyys8ued6p5y7eh2k74u9z4nsqr4l8fh5e38gpch0syv6tuq7u83486c9hk3xs9pfuzx8r48evn757y0spd9fvph\n{ \"currency\" : \"bc\", \"timestamp\" : 1516611763, \"expiry\" : 3600, \"payee\" : \"03c3fa4e2b2c11ab9d4a078e13f0dfb091423e0f06d7d9cc1d9c9ba3b9a5ad5d50\", \"msatoshi\" : 100, \"description\" : \"myfistLNpayment\", \"payment_hash\" : \"e762cc7be38cad612a30cc076992d3c1c897971868fffc4ca6b1e825f6e5841e\", \"signature\" : \"3044022029fdd39ed2aaf4e12eec01b5621444240fccb741a13d9baadeaf0a2ace001d7e022074de9989d01c5df02334be03dc3c6a7d60b7b44d02853c118e3a9f2c9fa9e23e\" }\n\n上面收款的金额和描述就显示了出来\n把上面的bolt11支付地址发给对方就可以等待收款了\n支付\n在我们知道了对方的bolt11支付地址后，我们就可以用以下命令进行支付了\n\nlightning-cli pay bolt11_addr\n\n在拿到付款方的bolt11地址后，我们用上面的lightning-cli decodepay bolt11解码出收款方的payee hash 然后查看通道\n\nlightning-cli getroute 03c3fa4e2b2c11ab9d4a078e13f0dfb091423e0f06d7d9cc1d9c9ba3b9a5ad5d50\n\n如果通道存在的话就可以付款了\n\n lightning-cli pay lnbc1n1pdxt29npp5ua3vc7lr3jkkz23sesrknyknc8yf09ccdrllcn9xk85ztah9ss0qdqcd4ukv6tnw3xyuurp09kk2mn5cqpg987a88kj4t6wzthvqx6ky9zyys8ued6p5y7eh2k74u9z4nsqr4l8fh5e38gpch0syv6tuq7u83486c9hk3x9pfuzx8r48evn757y0spd9fvph\n{ \"preimage\" : \"xd2005e012ff32b79f88fe976599c5dceeb99b111b81aa5087b815f2e4cdc59a\" }\n\n这样我们就完成了收付款的流程\n参考说明\n本文主要参考了\nhttps://medium.com/@dougvk/run-your-own-mainnet-lightning-node-2d2eab628a8b\n 和\nhttps://github.com/ElementsProject/lightning#opening-a-channel-on-the-bitcoin-testnet\n其他文档包括：\n闪电网络测试网络部署\nhttps://interfect.github.io/#!/posts/009-Ride-the-Lightning.md\n闪电网络 windows 部署\nhttps://medium.com/@jadmubaslat/bitcoin-lightning-network-node-easy-setup-tutorial-for-windows-desktop-users-a-how-to-guide-9937b5a8a669\nMeasure",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "language": "en",
        "length": 6120,
        "rule_count": 2,
        "applied_rules": [
          {
            "rule_id": "dedupe_lines",
            "description": "Collapse adjacent duplicate lines",
            "note": "collapsed duplicate adjacent lines"
          },
          {
            "rule_id": "whitespace",
            "description": "Normalize whitespace",
            "note": "collapsed whitespace"
          }
        ]
      }
    }
  ],
  "extractions": [],
  "journal": {
    "id": "c98c352a-ff36-4724-95c6-310e7c56f3ea",
    "note_id": "b2aa8595-1ddd-4805-95e8-1b49ce7ddeb1",
    "stage": "ingest",
    "agent_id": "evernote_ingest:v0",
    "started_at": "2025-11-09T20:01:35.623070Z",
    "finished_at": "2025-11-09T20:01:35.623071Z",
    "status": "success",
    "input_ref": {
      "task_id": "31c79fc3-ecd8-41dd-8d45-8385098b1283",
      "source_path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/如何在Linux系统建立自己的闪电网络节点和通道_巴比特_服务于区块链创新者.html",
      "checksum": "24e8921803918c704100a671db4370d8c8b4d1b648dd0095ed079275bdd1baa0"
    },
    "output_ref": {
      "ingest_source": "ee1d08a6-aad1-494b-b71d-0809b34ac35a",
      "note": "b2aa8595-1ddd-4805-95e8-1b49ce7ddeb1",
      "variants": [
        "c63d52f0-0d73-42d1-b2a7-9622e831afb7",
        "a1806066-2b40-4fd2-a820-4947a89b3091"
      ]
    },
    "error_detail": null
  }
}