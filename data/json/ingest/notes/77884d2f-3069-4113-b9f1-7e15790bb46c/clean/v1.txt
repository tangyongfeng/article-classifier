---
title: linux下无线网卡的ioctl接口命令
updated: 2018-11-14 08:07:11Z
created: 2018-11-14 07:50:09Z
source: https://blog.csdn.net/u013711616/article/details/52935991
tags:
  - wifi
---

原

linux下无线网卡的ioctl接口命令

2016年10月26日 16:55:17

zgs2014

阅读数：1644

标签：

网卡
linux

更多

个人分类：

linux 网络编程

 版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/u013711616/article/details/52935991
在linux系统当中通过使用ioctl函数可以获取，或者设置wifi相关的硬件信息
#include<unistd.h>
#include<sys/ioctl.h>
int ioctl( int fd, int request,
...
/* void *arg */ );
//返回
0
：成功   -
1
：出错
//第三个参数总是一个指针，但指针的类型依赖于request参数。
1
2
3
4
5
6
request 参数为如下：
/*
-------------------------- IOCTL LIST-------------------------- */
/* Basic operations */
#define SIOCSIWCOMMIT      0x8B00          /* 提交修改结果 */
#define SIOCGIWNAME    0x8B01          /* 获取设备名字 */
#define SIOCSIWNWID     0x8B02          /* 设置网络ID */
#define SIOCGIWNWID     0x8B03          /* 获取网络ID */
#define SIOCSIWFREQ 0x8B04          /* 设置信道（频率） */
#define SIOCGIWFREQ      0x8B05          /*  获取信道（频率）  */
#define SIOCSIWMODE    0x8B06          /* 设置网卡模式*/
#define SIOCGIWMODE    0x8B07          /* 获取网卡模式 */
#define SIOCSIWSENS 0x8B08          /* 设置灵敏度(dBm) */
#define SIOCGIWSENS 0x8B09          /* 获取灵敏度 (dBm) */
/* Informative stuff */
#define SIOCSIWRANGE   0x8B0A         /* Unused */
#define SIOCGIWRANGE  0x8B0B          /* 获取参数范围 */
#define SIOCSIWPRIV  0x8B0C         /* Unused */
#define SIOCGIWPRIV 0x8B0D         /* 获取网卡特有的ioctl接口 */
#define SIOCSIWSTATS     0x8B0E          /* Unused */
#define SIOCGIWSTATS    0x8B0F          /* 获取 /proc/net/wireless的stats */
/* Mobile IP support */
#define SIOCSIWSPY    0x8B10          /* 设置spy 地址*/
#define SIOCGIWSPY   0x8B11          /* 获取spy信息（连接质量） */
/* Access Point manipulation */
#define SIOCSIWAP     0x8B14          /* 设置AP的mac地址 */
#define SIOCGIWAP     0x8B15          /* 获取AP的mac地址 */
#define SIOCGIWAPLIST   0x8B17          /* 获取周围Ap信息列表 */
#define SIOCSIWSCAN      0x8B18          /* 开始扫描 */
#define SIOCGIWSCAN     0x8B19          /* 获取扫描信息 */
/*
802.11
 specific support */
#define SIOCSIWESSID      0x8B1A         /* 设置ESSID  */
#define SIOCGIWESSID     0x8B1B          /* 获取ESSID */
#define SIOCSIWNICKN    0x8B1C         /* 设置节点别名 */
#define SIOCGIWNICKN   0x8B1D         /* 获取节点别名 */
/* As
the
 ESSID
and
 NICKN are strings upto
32
 bytes long,
it
 doesn't fit
 * within
the
 'iwreq' structure, sowe need
to
 use
the
 'data' member
to
 * point
to
 a
string

in
 user
space
,like
it

is
 done
for
 RANGE...
 * The
"flags"
 memberindicate
if

the
 ESSID
is
 active
or

not
 (promiscuous).
 */
/* Other parameters useful
in

802.11
 andsome other devices */
#define SIOCSIWRATE 0x8B20          /* 设置默认传输速率(bps) */
#define SIOCGIWRATE 0x8B21          /* 获取默认传输速率 (bps) */
#define SIOCSIWRTS    0x8B22          /* 设置 RTS/CTS 的临界值(bytes) */
#define SIOCGIWRTS   0x8B23          /* 获取 RTS/CTS 的临界值 (bytes) */
#define SIOCSIWFRAG 0x8B24          /* 设置分片传输的包大小 (bytes) */
#define SIOCGIWFRAG     0x8B25          /*  获取分片传输的包大小 (bytes)*/
#define SIOCSIWTXPOW  0x8B26          /* 设置传输功率 (dBm) */
#define SIOCGIWTXPOW  0x8B27          /* 获取传输功率(dBm) */
#define SIOCSIWRETRY     0x8B28          /* 设置重传次数和生存时间 */
#define SIOCGIWRETRY    0x8B29          /*  获取重传次数和生存时间  */
/* Encoding stuff (scrambling, hardwaresecurity, WEP...) */
#define SIOCSIWENCODE 0x8B2A         /* 设置编码模式 */
#define SIOCGIWENCODE     0x8B2B          /* 获取编码模式 */
/* Power saving stuff (power management,unicast
and
 multicast) */
#define SIOCSIWPOWER  0x8B2C         /* 设置电源管理模式 */
#define SIOCGIWPOWER  0x8B2D         /* 获取电源管理模式*/
/*
-------------------- DEV PRIVATE IOCTLLIST -------------------- */
/* These
16
 ioctl are wireless deviceprivate.
 * Each driver
is
 free
to
 use themfor whatever purpose
it
 chooses,
 * however
the
 driver *must* exportthe description
of
 those ioctls
 *
with
 SIOCGIWPRIV
and
 *must* usearguments
as
 defined
below
.
 * If you don't follow those rules,DaveM
is
 going
to
 hate you (reason :
 *
it
 make mixed
32
/
64
bit operationimpossible).
 */
#define SIOCIWFIRSTPRIV      0x8BE0
#define SIOCIWLASTPRIV 0x8BFF
/* Previously, we were usingSIOCDEVPRIVATE,
but
 we now have our
 * separate range because ofcollisions
with
 other tools such
as
 * 'mii-tool'.
 * We now have
32
 commands, so a bitmore
space
 ;-).
 * Also, all 'odd' commands are onlyusable
by
 root
and
 don't
return

the
 * content
of
 ifr/iwr
to
 user (butyou are
not
 obliged
to
 use
the

set
/
get
 * convention, just use
every
 othertwo command).
 * And I
repeat
 : you are
not
 obligedto use them
with
 iwspy,
but
 you
 * must be compliant
with

it
.
 */
/*
------------------------- IOCTL STUFF------------------------- */
/* The
first

and

the

last
 (range) */
#define SIOCIWFIRST   0x8B00
#define SIOCIWLAST    SIOCIWLASTPRIV          /* 0x8BFF */
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180