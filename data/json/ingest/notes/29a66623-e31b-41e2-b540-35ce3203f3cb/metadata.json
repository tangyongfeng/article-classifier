{
  "ingest_source": {
    "id": "0a477cb1-9b3a-4579-bfd1-3e24ec48f393",
    "source_type": "evernote_html",
    "source_path": "backups/2023年6月/IT技术/无标题笔记-2.html",
    "collected_at": "2025-11-10T15:43:32.832966Z",
    "external_id": null,
    "title_hint": null,
    "language_hint": "no",
    "captured_at": null,
    "checksum": "0bc81e3f3edc3290928b01dec477082f48f5a234ad2dd1e7541139a09bb7602f",
    "status": "pending",
    "notes": {
      "batch_id": "phase2-backfill-202306"
    }
  },
  "note": {
    "id": "29a66623-e31b-41e2-b540-35ce3203f3cb",
    "ingest_source_id": "0a477cb1-9b3a-4579-bfd1-3e24ec48f393",
    "canonical_title": "无标题笔记-2",
    "language": "no",
    "ingested_at": "2025-11-10T15:43:32.832970Z",
    "created_at": null,
    "status": "active",
    "importance": 0,
    "attributes": {
      "source_filename": "无标题笔记-2.html"
    }
  },
  "variants": [
    {
      "id": "3fa9e80b-3c88-4b5f-a9e1-0ecee381eabf",
      "note_id": "29a66623-e31b-41e2-b540-35ce3203f3cb",
      "variant_type": "raw_html",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-10T15:43:32.832972Z",
      "content": "---\ntitle: 无标题笔记\nupdated: 2021-04-19 21:03:06Z\ncreated: 2021-04-19 21:02:38Z\nauthor: tangyongfeng@gmail.com\n---\n\n\n<en-note><blockquote><div>每家公司都希望业务高速增长，最好能出几个爆款产品或者爆款业务，从而带动公司营收高速攀升。但站在数据库管理员的角度，这却是实实在在的压力，业务高速增长必然带来数据量的暴增。数据库系统的选型和设计是支撑整个业务系统的重要因素。</div><div><br/></div><div>MySQL数据库是基于云原生的数据库产品之一，云原生为云数据库提供了重要动力，相比于传统自建数据库，云数据库比单个数据库具有更大的弹性和可扩展性。\n</div></blockquote><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"-en-paragraph:true;\">数据库审计主要用于监视并记录对数据库服务器的各类操作行为，并记入审计日志或数据库中以便日后进行跟踪、查询、分析，以实现对用户操作的监控和审计。审计是一项非常重要的工作，也是企业数据安全体系的重要组成部分。\n</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>MySQL企业版自带审计功能，但是需要付费。MySQL社区版没有审计功能，基于成本的考虑，很多用户采用社区版MySQL作为业务系统数据库。采用社区版MySQL如何实现重要的审计功能，本文从自建和云服务两种情况来解答这个问题。</div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">自建MySQL数据库的场景</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>本文自建数据库所有实验环境是基于window10下MySQL5.7这个版本。</div><div><br/></div><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">方法一 Genreal Log</span><span STYLE=\"-en-paragraph:true;\">\n</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>默认情况下，MySQL不开启General log; 开启General log后，MySQL将所有到达MySQL Server的SQL语句记录下来。</div><div><span STYLE=\"font-weight: bold;\">开启General log步骤：</span></div><div><span STYLE=\"font-weight: bold;\">1、</span>查看General Log开启情况：执行SQL命令show variables like &apos;%general_log%&rsquo; ;可以看到默认general_log是OFF的：</div><div><img src=\"../_resources/b7551b31e69babefa9c76f02d1fb4e2a.jpg\"  hash=\"b7551b31e69babefa9c76f02d1fb4e2a\" type=\"image/jpeg\" width=\"992\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">2、</span>开启General Log: 执行SQL命令set global general_log=on 而后查看general_log打开了：</div><div><img src=\"../_resources/29d42901a04ffa100ecad8b138163af0.jpg\"  hash=\"29d42901a04ffa100ecad8b138163af0\" type=\"image/jpeg\" width=\"992\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">3、</span>验证：general_log打开后，所有SQL的访问都会记录在general_log_file指向的日志文件。我们执行几个SQL语句测试：</div><div><img src=\"../_resources/28d76bcc2418ae90498891ee9e74e977.jpg\"  hash=\"28d76bcc2418ae90498891ee9e74e977\" type=\"image/jpeg\" width=\"1006\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>而后查看ZB-PF11H2E3.log日志文件里面的内容，我们看到刚才做的操作都已经记录在日志里了：</div><div><img src=\"../_resources/c867bfae78c366e26626828e9022530f.jpg\"  hash=\"c867bfae78c366e26626828e9022530f\" type=\"image/jpeg\" width=\"1010\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>开启General Log只要用户执行了操作，无论对错，MySQL就会记录日志，这样的话日志量会非常庞大，对数据库效率有影响。所以我们一般不建议开启开功能，个别情况下可能会临时的开一段时间以供排查故障等使用。</div><div><br/></div><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">方法二 BinLog+Init_connect</span><span STYLE=\"-en-paragraph:true;\">\n</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>BinLog是MySQL操作时留下的日志，BinLog一方面可以用在数据库的恢复与主从复制上，另外一方面可以用来做数据库的审计。</div><div>由于BinLog日志里面无法查询是谁在哪个时间段登录的等信息，缺少审计必要的信息。在MySQL中，每个连接都会先执行init_connect进行连接的初始化，我们可以在这里获取用户的登录名称和thread ID值。然后配合BinLog，就可以追踪到每个操作语句的操作时间，操作人等信息,再加上BinLog的日志信息实现审计。</div><div><span STYLE=\"font-weight: bold;\">配置和验证过程如下：</span></div><div><span STYLE=\"font-weight: bold;\">1、</span>创建审计用的数据库和表：</div><div><img src=\"../_resources/df2a74de2570da13ef399abafe167f45.jpg\"  hash=\"df2a74de2570da13ef399abafe167f45\" type=\"image/jpeg\" width=\"938\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">2、</span>创建具有操作auditdb数据权限的用户：</div><div><img src=\"../_resources/0d3188420234a6a965bf7879e00c34fd.png\"  hash=\"0d3188420234a6a965bf7879e00c34fd\" type=\"image/png\" width=\"942\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"-en-paragraph:true;\">如果已经有用户，需要对现有用户添加操作auditdb的权限：\n</span></div><div>1 MySQL&gt; insert into mysql.db (Host,Db,User1,Insert_priv) values (&apos;%&apos;,&apos;auditdb&apos;,&apos;&apos;,&apos;Y&apos;);</div><div>2 Query OK, 1 row affected (0.03 sec)</div><div>3 MySQL&gt; flush privileges;</div><div>4 Query OK, 0 rows affected (0.00 sec)</div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>3、设置init_connect,并重启MySQL数据库在初始化参数文件[mysql]部分添加如下内容：</div><div>1 log-bin=mysql-bin #开启Binlog</div><div>2 init_connect=&apos;insert into auditdb.accesslog(connectionid, connectionuser,logintime) values(connection_id(),user(),now());&apos; #设置初始化连接参数</div><div><img src=\"../_resources/1a619c5950b220b0f9faed43d5fe7ddb.jpg\"  hash=\"1a619c5950b220b0f9faed43d5fe7ddb\" type=\"image/jpeg\" width=\"936\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><br/></div><div><span STYLE=\"font-weight: bold;\">4、</span>用user1用户登录，执行一些写入和删除的操作；</div><div><img src=\"../_resources/cb86af03e10499c14333383ed9554a49.jpg\"  hash=\"cb86af03e10499c14333383ed9554a49\" type=\"image/jpeg\" width=\"908\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">5、</span>用mysqlbinlog工具查看BinLog，根据delete操作找到相应的ThreadId,而后在前面创建的审计日志表auditdb.accesslog里面根据ThreadID找到用户登录信息：</div><div><img src=\"../_resources/61f7beb8cfa7ac437f128b819c0fa7bb.jpg\"  hash=\"61f7beb8cfa7ac437f128b819c0fa7bb\" type=\"image/jpeg\" width=\"1052\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>查看当前binlog mysqlbin.000029的内容，并找到delete操作对应的ThreadID D:\\mysql57\\bin&gt;mysqlbinlog ../data/mysql-bin.000029</div><div><img src=\"../_resources/ce51afb028aed51fc2de4e80506b7a63.png\"  hash=\"ce51afb028aed51fc2de4e80506b7a63\" type=\"image/png\" width=\"1044\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>从Binlog中可以得知删除Test2表对应的threadid是8，根据ThreadID在审计表里查看用户的登录信息，可以得知这个删除操作是user1用户在本机执行的操作。</div><div><br/></div><div><img src=\"../_resources/dd5f3ca18753728fc8dcc18dc2cde2c1.jpg\"  hash=\"dd5f3ca18753728fc8dcc18dc2cde2c1\" type=\"image/jpeg\" width=\"1048\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">说明：</span>采用这种方式进行审计，由于init-connect只会在连接时执行，不会对数据库产生大的性能影响，但是init-connect不会记录拥有root权限的用户记录.</div><div><br/></div><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">方法三 使用审计插件</span><span STYLE=\"-en-paragraph:true;\">\n</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>除了商业版的审计插件外，常见的还有三类审计插件Percona Audit Log Plugin、MariaDB Audit Plugin、McAfee MySQL Audit Plugin。这几个插件功能上大同小异，只是展示的内容和格式略有不同。</div><div><span STYLE=\"-en-paragraph:true;\">我们以MariaDB Audit Plugin为例，给大家介绍如何采用插件的方式实现对Mysql数据的审计。\n</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">一、下载与安装</span></div><div><span STYLE=\"font-weight: bold;\">1、</span>下载MariaDB Audit Plugin插件(下载地址：<a HREF=\"https://link.zhihu.com/?target=https%3A//downloads.mariadb.org/mariadb/5.5.64/\" STYLE=\"font-style: normal; font-weight: normal;\">https://</a><a HREF=\"https://link.zhihu.com/?target=https%3A//downloads.mariadb.org/mariadb/5.5.64/\">downloads.mariadb.org/m</a><a HREF=\"https://link.zhihu.com/?target=https%3A//downloads.mariadb.org/mariadb/5.5.64/\" STYLE=\"font-style: normal; font-weight: normal;\">ariadb/5.5.64/</a>)</div><div><img src=\"../_resources/1288e5bd0ea633956efa8fee12cb254d.jpg\"  hash=\"1288e5bd0ea633956efa8fee12cb254d\" type=\"image/jpeg\" width=\"1066\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">2、</span>安装:把server_audit.dll复制到对应的mysql插件库中D:\\mysql57\\lib\\plugin，执行install安装命令：</div><div><img src=\"../_resources/314f126488291a1a6f6d625807c6cc0d.jpg\"  hash=\"314f126488291a1a6f6d625807c6cc0d\" type=\"image/jpeg\" width=\"1080\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">3、</span>安装验证：Mysql&gt;show variables like &apos;%audit%&apos;</div><div><img src=\"../_resources/647e36a6a3d6e449dfe46e88db1d74c8.jpg\"  hash=\"647e36a6a3d6e449dfe46e88db1d74c8\" type=\"image/jpeg\" width=\"1076\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><br/></div><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">二、关键审计参数说明</span></div><ul><li><div>server_audit_logging：启动或关闭审计</div></li><li><div>server_audit_events：指定记录事件的类型，可以用逗号分隔的多个值(connect,query,table) ，默认为空代表审计所有事件。</div></li><li><div>server_audit_incl_users：指定哪些用户的活动将记录，默认审计所有用户，该变量比server_audit_excl_users优先级高</div></li><li><div>server_audit_excl_users：指定哪些用户行为不记录</div></li><li><div>server_audit_output_type：指定日志输出类型，可为SYSLOG或FILE，缺省输出至审计文件</div></li></ul><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">三、审计过程示例</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">1、</span>开启审计mysql&gt;set global server_audit_logging=on</div><div><img src=\"../_resources/a0dcbbf977117f90dfd77b250530398e.jpg\"  hash=\"a0dcbbf977117f90dfd77b250530398e\" type=\"image/jpeg\" width=\"1026\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"-en-paragraph:true;\">由于是验证测试，我们其余参数都按默认设置。\n</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">2、</span>执行一些数据库操作：</div><div><img src=\"../_resources/fa645d84f8d277f730cd098f37b00dc8.jpg\"  hash=\"fa645d84f8d277f730cd098f37b00dc8\" type=\"image/jpeg\" width=\"928\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;\">3、</span>查看审计记录日志，server_audit.log，默认在data目录下：</div><div><img src=\"../_resources/6b6d1c42d9f364fe7487f5d077814736.jpg\"  hash=\"6b6d1c42d9f364fe7487f5d077814736\" type=\"image/jpeg\" width=\"988\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>我们看见，刚才在Mysql数据库的操作都已经审计上了。</div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">使用公有云RDS服务的场景</span></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div>目前云计算的普及，云供应商都提供云数据库服务，当然Mysql是云数据库服务重要的一员。相比传统数据库，云数据库易于部署、管理和扩展，提供数据可靠性、安全性、运行状态监控等全套解决方案。</div><div>那么在云数据库Mysql上是如何实现对数据库的审计的呢？我们以京东云云数据库Mysql为例，京东云的Mysql审计功能是通过MariaDB Audit Plugin插件实现的。下面给大家介绍云数据库Mysql审计的开启、使用、关闭等功能。</div><div><span STYLE=\"font-weight: bold;\">1、</span>登录云数据库 RDS 管理控制台；</div><div><span STYLE=\"font-weight: bold;\">2、</span>选择需要查询 SQL 审计的目标实例，点击目标实例， 进入实例详情页，切换至 SQL 审计 Tab 页；</div><div><span STYLE=\"font-weight: bold;\">3、</span>点击审计状态开关就可以在线切换审计的开启与关闭；</div><div><span STYLE=\"font-weight: bold;-en-paragraph:true;\">4、</span><span STYLE=\"-en-paragraph:true;\">执行一些数据库的操作，而后看审计数据。审计开启后，SQL 审计查询功能说明如下：\n</span></div><ul><li><div>执行时间：可以选择从当前时间往前推 7 天的时间区间，作为 SQL 审计查询的时间段；</div></li><li><div>数据库：可以查看指定数据库的 SQL 语句；</div></li><li><div>账号：可以查看指定账号的 SQL 语句。</div></li></ul><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><span STYLE=\"font-weight: bold;\">5、</span>点击查询按钮，查看符合要求的SQL审计结果列表：</div><div><img src=\"../_resources/164ec3d19a673b3bf8e03311fc8744ed.jpg\"  hash=\"164ec3d19a673b3bf8e03311fc8744ed\" type=\"image/jpeg\" width=\"974\" alt=\"\" /></en-media></div><p STYLE=\"color: rgb(18, 18, 18); font-family: -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);\"></p><div><br/></div><div><span STYLE=\"-en-paragraph:true;\">通过上面的例子，可以看见，云数据库的管理和运维比自建数据库确实要简单很多，用户不用关心审计的方式、审计数据的存储位置等等。只不过，云数据库由于是以云服务的形式提供给最终用户，用户就需要按照云服务的要求和使用说明进行操作。\n</span></div></en-note>      ",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "checksum": "0bc81e3f3edc3290928b01dec477082f48f5a234ad2dd1e7541139a09bb7602f",
        "path": "backups/2023年6月/IT技术/无标题笔记-2.html"
      }
    },
    {
      "id": "311f329b-56e9-455f-900a-6c8667ad26e2",
      "note_id": "29a66623-e31b-41e2-b540-35ce3203f3cb",
      "variant_type": "clean_text",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-10T15:43:32.832975Z",
      "content": "---\ntitle: 无标题笔记\nupdated: 2021-04-19 21:03:06Z\ncreated: 2021-04-19 21:02:38Z\nauthor: tangyongfeng@gmail.com\n---\n\n每家公司都希望业务高速增长，最好能出几个爆款产品或者爆款业务，从而带动公司营收高速攀升。但站在数据库管理员的角度，这却是实实在在的压力，业务高速增长必然带来数据量的暴增。数据库系统的选型和设计是支撑整个业务系统的重要因素。\nMySQL数据库是基于云原生的数据库产品之一，云原生为云数据库提供了重要动力，相比于传统自建数据库，云数据库比单个数据库具有更大的弹性和可扩展性。\n\n数据库审计主要用于监视并记录对数据库服务器的各类操作行为，并记入审计日志或数据库中以便日后进行跟踪、查询、分析，以实现对用户操作的监控和审计。审计是一项非常重要的工作，也是企业数据安全体系的重要组成部分。\n\nMySQL企业版自带审计功能，但是需要付费。MySQL社区版没有审计功能，基于成本的考虑，很多用户采用社区版MySQL作为业务系统数据库。采用社区版MySQL如何实现重要的审计功能，本文从自建和云服务两种情况来解答这个问题。\n自建MySQL数据库的场景\n本文自建数据库所有实验环境是基于window10下MySQL5.7这个版本。\n方法一 Genreal Log\n\n默认情况下，MySQL不开启General log; 开启General log后，MySQL将所有到达MySQL Server的SQL语句记录下来。\n开启General log步骤：\n1、\n查看General Log开启情况：执行SQL命令show variables like '%general_log%’ ;可以看到默认general_log是OFF的：\n2、\n开启General Log: 执行SQL命令set global general_log=on 而后查看general_log打开了：\n3、\n验证：general_log打开后，所有SQL的访问都会记录在general_log_file指向的日志文件。我们执行几个SQL语句测试：\n而后查看ZB-PF11H2E3.log日志文件里面的内容，我们看到刚才做的操作都已经记录在日志里了：\n开启General Log只要用户执行了操作，无论对错，MySQL就会记录日志，这样的话日志量会非常庞大，对数据库效率有影响。所以我们一般不建议开启开功能，个别情况下可能会临时的开一段时间以供排查故障等使用。\n方法二 BinLog+Init_connect\n\nBinLog是MySQL操作时留下的日志，BinLog一方面可以用在数据库的恢复与主从复制上，另外一方面可以用来做数据库的审计。\n由于BinLog日志里面无法查询是谁在哪个时间段登录的等信息，缺少审计必要的信息。在MySQL中，每个连接都会先执行init_connect进行连接的初始化，我们可以在这里获取用户的登录名称和thread ID值。然后配合BinLog，就可以追踪到每个操作语句的操作时间，操作人等信息,再加上BinLog的日志信息实现审计。\n配置和验证过程如下：\n1、\n创建审计用的数据库和表：\n2、\n创建具有操作auditdb数据权限的用户：\n如果已经有用户，需要对现有用户添加操作auditdb的权限：\n\n1 MySQL> insert into mysql.db (Host,Db,User1,Insert_priv) values ('%','auditdb','','Y');\n2 Query OK, 1 row affected (0.03 sec)\n3 MySQL> flush privileges;\n4 Query OK, 0 rows affected (0.00 sec)\n3、设置init_connect,并重启MySQL数据库在初始化参数文件[mysql]部分添加如下内容：\n1 log-bin=mysql-bin #开启Binlog\n2 init_connect='insert into auditdb.accesslog(connectionid, connectionuser,logintime) values(connection_id(),user(),now());' #设置初始化连接参数\n4、\n用user1用户登录，执行一些写入和删除的操作；\n5、\n用mysqlbinlog工具查看BinLog，根据delete操作找到相应的ThreadId,而后在前面创建的审计日志表auditdb.accesslog里面根据ThreadID找到用户登录信息：\n查看当前binlog mysqlbin.000029的内容，并找到delete操作对应的ThreadID D:\\mysql57\\bin>mysqlbinlog ../data/mysql-bin.000029\n从Binlog中可以得知删除Test2表对应的threadid是8，根据ThreadID在审计表里查看用户的登录信息，可以得知这个删除操作是user1用户在本机执行的操作。\n说明：\n采用这种方式进行审计，由于init-connect只会在连接时执行，不会对数据库产生大的性能影响，但是init-connect不会记录拥有root权限的用户记录.\n方法三 使用审计插件\n\n除了商业版的审计插件外，常见的还有三类审计插件Percona Audit Log Plugin、MariaDB Audit Plugin、McAfee MySQL Audit Plugin。这几个插件功能上大同小异，只是展示的内容和格式略有不同。\n我们以MariaDB Audit Plugin为例，给大家介绍如何采用插件的方式实现对Mysql数据的审计。\n\n一、下载与安装\n1、\n下载MariaDB Audit Plugin插件(下载地址：\nhttps://\ndownloads.mariadb.org/m\nariadb/5.5.64/\n)\n2、\n安装:把server_audit.dll复制到对应的mysql插件库中D:\\mysql57\\lib\\plugin，执行install安装命令：\n3、\n安装验证：Mysql>show variables like '%audit%'\n二、关键审计参数说明\nserver_audit_logging：启动或关闭审计\nserver_audit_events：指定记录事件的类型，可以用逗号分隔的多个值(connect,query,table) ，默认为空代表审计所有事件。\nserver_audit_incl_users：指定哪些用户的活动将记录，默认审计所有用户，该变量比server_audit_excl_users优先级高\nserver_audit_excl_users：指定哪些用户行为不记录\nserver_audit_output_type：指定日志输出类型，可为SYSLOG或FILE，缺省输出至审计文件\n三、审计过程示例\n1、\n开启审计mysql>set global server_audit_logging=on\n由于是验证测试，我们其余参数都按默认设置。\n\n2、\n执行一些数据库操作：\n3、\n查看审计记录日志，server_audit.log，默认在data目录下：\n我们看见，刚才在Mysql数据库的操作都已经审计上了。\n使用公有云RDS服务的场景\n目前云计算的普及，云供应商都提供云数据库服务，当然Mysql是云数据库服务重要的一员。相比传统数据库，云数据库易于部署、管理和扩展，提供数据可靠性、安全性、运行状态监控等全套解决方案。\n那么在云数据库Mysql上是如何实现对数据库的审计的呢？我们以京东云云数据库Mysql为例，京东云的Mysql审计功能是通过MariaDB Audit Plugin插件实现的。下面给大家介绍云数据库Mysql审计的开启、使用、关闭等功能。\n1、\n登录云数据库 RDS 管理控制台；\n2、\n选择需要查询 SQL 审计的目标实例，点击目标实例， 进入实例详情页，切换至 SQL 审计 Tab 页；\n3、\n点击审计状态开关就可以在线切换审计的开启与关闭；\n4、\n执行一些数据库的操作，而后看审计数据。审计开启后，SQL 审计查询功能说明如下：\n\n执行时间：可以选择从当前时间往前推 7 天的时间区间，作为 SQL 审计查询的时间段；\n数据库：可以查看指定数据库的 SQL 语句；\n账号：可以查看指定账号的 SQL 语句。\n5、\n点击查询按钮，查看符合要求的SQL审计结果列表：\n通过上面的例子，可以看见，云数据库的管理和运维比自建数据库确实要简单很多，用户不用关心审计的方式、审计数据的存储位置等等。只不过，云数据库由于是以云服务的形式提供给最终用户，用户就需要按照云服务的要求和使用说明进行操作。",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "language": "no",
        "length": 3685,
        "rule_count": 0,
        "applied_rules": []
      }
    }
  ],
  "extractions": [
    {
      "id": "0b8c050b-840d-4ea1-a312-8290efab6a91",
      "note_id": "29a66623-e31b-41e2-b540-35ce3203f3cb",
      "extractor": "llm_enhance:v0#qwen3:30b",
      "payload": {
        "summary": "MySQL数据库审计方案解析：涵盖自建环境的General Log、BinLog+Init_connect及审计插件，以及云数据库RDS的审计功能实现。",
        "keywords": [
          "MySQL",
          "数据库审计",
          "自建数据库",
          "云数据库",
          "审计插件"
        ],
        "action_items": [
          "无"
        ],
        "source": "qwen3:30b",
        "category_path": [
          "商务",
          "技术创新"
        ],
        "new_category_suggestion": null
      },
      "version": 1,
      "created_at": "2025-11-11T16:58:21.524731Z",
      "created_by": "llm_enhance:v0",
      "quality_score": 0.377
    }
  ],
  "journal": {
    "id": "b93bfda5-1553-4e78-a638-a7183bb6c9f8",
    "note_id": "29a66623-e31b-41e2-b540-35ce3203f3cb",
    "stage": "ingest",
    "agent_id": "evernote_ingest:v0",
    "started_at": "2025-11-10T15:43:32.832980Z",
    "finished_at": "2025-11-10T15:43:32.832980Z",
    "status": "success",
    "input_ref": {
      "task_id": "319d3b31-2a48-41ed-b2d1-ece5de0aa01a",
      "source_path": "backups/2023年6月/IT技术/无标题笔记-2.html",
      "checksum": "0bc81e3f3edc3290928b01dec477082f48f5a234ad2dd1e7541139a09bb7602f"
    },
    "output_ref": {
      "ingest_source": "0a477cb1-9b3a-4579-bfd1-3e24ec48f393",
      "note": "29a66623-e31b-41e2-b540-35ce3203f3cb",
      "variants": [
        "3fa9e80b-3c88-4b5f-a9e1-0ecee381eabf",
        "311f329b-56e9-455f-900a-6c8667ad26e2"
      ]
    },
    "error_detail": null
  },
  "llm": {
    "status": "success",
    "model": "qwen3:30b",
    "updated_at": "2025-11-11T16:58:21.524476Z",
    "latency_seconds": 23.80235387501307,
    "attempts": 1,
    "summary": {
      "summary": "MySQL数据库审计方案解析：涵盖自建环境的General Log、BinLog+Init_connect及审计插件，以及云数据库RDS的审计功能实现。",
      "keywords": [
        "MySQL",
        "数据库审计",
        "自建数据库",
        "云数据库",
        "审计插件"
      ],
      "action_items": [
        "无"
      ],
      "source": "qwen3:30b",
      "category_path": [
        "商务",
        "技术创新"
      ],
      "new_category_suggestion": null
    },
    "quality": {
      "score": 0.377,
      "metrics": {
        "input_chars": 3685.0,
        "input_lines": 93.0,
        "summary_chars": 76.0,
        "summary_coverage_ratio": 0.021,
        "keyword_hit_rate": 1.0,
        "action_item_count": 1.0,
        "unique_summary_sentences": 1.0,
        "estimated_read_seconds": 221.1
      }
    }
  }
}