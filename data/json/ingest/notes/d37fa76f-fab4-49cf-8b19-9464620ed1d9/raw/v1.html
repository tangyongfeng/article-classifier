---
title: C118+OsmocomBB+openbts 组建家庭移动网络
updated: 2021-06-13 17:22:58Z
created: 2021-06-13 17:22:21Z
---



<en-note><div STYLE="word-wrap: break-word; min-height: 30px; caret-color: rgb(68, 68, 68); color: rgb(68, 68, 68); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Tahoma, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, Simsun, sans-serif; font-size: 12px; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.3); -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><table STYLE="border-collapse: collapse; min-width: 100%;"><colgroup><col STYLE="width: 390px;"/></colgroup><tbody STYLE="word-wrap: break-word;"><tr STYLE="word-wrap: break-word;"><td STYLE="word-wrap: break-word; font-size: 14px; width: 390px; padding: 8px; border: 1px solid;"><div STYLE="word-wrap: break-word; margin-bottom: -30px; font-size: 12px; text-align: center; line-height: 32px; color: rgb(153, 153, 153);"><span STYLE="word-wrap: break-word; font-size: 12px; line-height: 32px; color: rgb(153, 153, 153);">本帖最后由 waigeit 于 2016-4-21 21:39 编辑</span><span STYLE="word-wrap: break-word; font-size: 12px; line-height: 32px; color: rgb(153, 153, 153);">&nbsp;</span></div><div><br STYLE="word-wrap: break-word;"/></div><div><br STYLE="word-wrap: break-word;"/></div><div><span STYLE="font-weight: bold; word-wrap: break-word; font-size: 21px; color: rgb(255, 0, 0);">C118+OsmocomBB+openbts</span><span STYLE="font-weight: bold; word-wrap: break-word; font-size: 21px; color: rgb(255, 0, 0);">&nbsp;</span><span STYLE="font-weight: bold; word-wrap: break-word; font-size: 21px; color: rgb(255, 0, 0);">组建家庭移动网络</span><span STYLE="font-weight: bold; word-wrap: break-word; font-size: 21px; color: rgb(255, 0, 0);">&nbsp;</span></div><div><br STYLE="word-wrap: break-word;"/></div><div><br STYLE="word-wrap: break-word;"/></div><div><span STYLE="font-weight: bold; word-wrap: break-word; font-size: 21px; color: rgb(255, 0, 0);">先上图：</span></div><div STYLE="word-wrap: break-word;"><img src="../_resources/08038c9ed22683574cb4dac1672b8d7e.jpg"  hash="08038c9ed22683574cb4dac1672b8d7e" title="Attachment" width="540" type="image/jpeg" alt="" /></en-media></div><div STYLE="word-wrap: break-word;"><img src="../_resources/a4968c4df7b14a715755f0dc9d0e3c54.jpg"  hash="a4968c4df7b14a715755f0dc9d0e3c54" title="Attachment" width="540" type="image/jpeg" alt="" /></en-media></div><div STYLE="word-wrap: break-word;"><img src="../_resources/e7efdb83ea84cb623a74cdb8528a609f.jpg"  hash="e7efdb83ea84cb623a74cdb8528a609f" title="Attachment" width="540" type="image/jpeg" alt="" /></en-media></div><div STYLE="word-wrap: break-word;"><img src="../_resources/322d19565745b030b815ba53aa183dbe.jpg"  hash="322d19565745b030b815ba53aa183dbe" title="Attachment" width="540" type="image/jpeg" alt="" /></en-media></div><div STYLE="word-wrap: break-word;"><img src="../_resources/1157f13df4d57db9fb23afba79e3fee1.jpg"  hash="1157f13df4d57db9fb23afba79e3fee1" title="Attachment" width="955" type="image/jpeg" alt="" /></en-media></div><div><br STYLE="word-wrap: break-word;"/></div><div><br STYLE="word-wrap: break-word;"/></div><div><br STYLE="word-wrap: break-word;"/></div><div><span STYLE="word-wrap: break-word; font-size: 21px; color: rgb(255, 0, 0); font-weight: bold;">教程：</span><span STYLE="word-wrap: break-word; font-size: 21px; color: rgb(255, 0, 0); font-weight: bold;"><a HREF="http://www.vgego.com">www.vgego.com</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">以下所有命令在</span><span STYLE="word-wrap: break-word; font-weight: bold;">root</span><span STYLE="word-wrap: break-word; font-weight: bold;">用户下执行，工作目录为</span><span STYLE="word-wrap: break-word; font-weight: bold;">/opt/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">新系统先执行apt-get update</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">Ox01</span><span STYLE="word-wrap: break-word; font-weight: bold;">交叉编译环境安装</span><span STYLE="word-wrap: break-word; font-weight: bold;">(</span><span STYLE="word-wrap: break-word; font-weight: bold;">这一步很关键，也很容易出错</span><span STYLE="word-wrap: break-word; font-weight: bold;">)</span><span STYLE="word-wrap: break-word; font-weight: bold;">：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">①&nbsp;&nbsp;</span><span STYLE="word-wrap: break-word; font-weight: bold;">安装依赖包（宁多勿少，避免出错）：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$sudo apt-get install libtool libtalloc-dev build-essential libgmp3-dev libmpfr-dev libx11-6 libx11-dev texinfo flex bison libncurses5 libncurses5-dbg libncurses5-dev libncursesw5 libncursesw5-dbg libncursesw5-dev zlibc zlib1g-dev libmpfr4 libmpc-dev</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo apt-get install libusb-dev libpcsclite-dev</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo apt-get install libusb-0.1-4 libpcsclite1 libccid pcscd</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">②&nbsp;&nbsp;</span><span STYLE="word-wrap: break-word; font-weight: bold;">开始安装ARM</span><span STYLE="word-wrap: break-word; font-weight: bold;">编译器</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd /opt/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ mkdir GnuArmToolchain</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd GnuArmToolchain/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ wget <a HREF="http://bb.osmocom.org/trac/raw-attachment/wiki/GnuArmToolchain/gnu-arm-build.2.sh">http://bb.osmocom.org/trac/raw-attachment/wiki/GnuArmToolchain/gnu-arm-build.2.sh</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ chmod +x gnu-arm-build.2.sh</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ mkdir build install src</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd src/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ wget <a HREF="http://ftp.gnu.org/gnu/gcc/gcc-4.8.2/gcc-4.5.2.tar.bz2">http://ftp.gnu.org/gnu/gcc/gcc-4.8.2/gcc-4.5.2.tar.bz2</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ wget <a HREF="http://ftp.gnu.org/gnu/binutils/binutils-2.21.1a.tar.bz2">http://ftp.gnu.org/gnu/binutils/binutils-2.21.1a.tar.bz2</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ wget <a HREF="ftp://sources.redhat.com/pub/newlib/newlib-1.19.0.tar.gz">ftp://sources.redhat.com/pub/newlib/newlib-1.19.0.tar.gz</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd ../</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ ./gnu-arm-build.2.sh</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">执行以上命令需要漫长的等待，博主电脑配置高，半个小时就好了，kali</span><span STYLE="word-wrap: break-word; font-weight: bold;">下更快，10</span><span STYLE="word-wrap: break-word; font-weight: bold;">分钟！</span></div><div><br STYLE="word-wrap: break-word;"/></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold; font-style: italic;">下面的这一步骤很关键，用来添加环境变量，忽略前面的半个小时等于白搭！</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">③&nbsp;&nbsp;</span><span STYLE="word-wrap: break-word; font-weight: bold;">追加新的环境变量到配置文件：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$echo &quot;export PATH=\$PATH:/opt/GnuArmToolchain/install/bin&quot;&gt;&gt;/root/.bashrc</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">执行以下命令让追加环境变量生效：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$source /root/.bashrc</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">可用&ldquo;echo $PATH&rdquo;命令查看加入的环境变量是否生效。</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">至此，arm编译器安装完成！</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">Ox02</span><span STYLE="word-wrap: break-word; font-weight: bold;">安装</span><span STYLE="word-wrap: break-word; font-weight: bold;">libosmo-dsp</span><span STYLE="word-wrap: break-word; font-weight: bold;">（这个简单，表紧张，舒口气）</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$cd /opt/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$git clone <a HREF="git://git.osmocom.org/libosmo-dsp.git">git://git.osmocom.org/libosmo-dsp.git</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$cd libosmo-dsp/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$autoreconf -i</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$./configure</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$make</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">Ox03</span><span STYLE="word-wrap: break-word; font-weight: bold;">编译</span><span STYLE="word-wrap: break-word; font-weight: bold;">libosmocore</span><span STYLE="word-wrap: break-word; font-weight: bold;">（一样简单）</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd /opt/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ git clone <a HREF="git://git.osmocom.org/libosmocore.git">git://git.osmocom.org/libosmocore.git</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd libosmocore/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ autoreconf -i</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ ./configure</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ make</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo make install</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd ..</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo ldconfig</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">Ox04</span><span STYLE="word-wrap: break-word; font-weight: bold;">在</span><span STYLE="word-wrap: break-word; font-weight: bold;">sylvain/testing</span><span STYLE="word-wrap: break-word; font-weight: bold;">分支安装</span><span STYLE="word-wrap: break-word; font-weight: bold;">osmocom-bb</span><span STYLE="word-wrap: break-word; font-weight: bold;">：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd /opt/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">安装必要的依赖：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo aptitude install libtool shtool autoconf git-core pkg-config make gcc</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ git clone <a HREF="git://git.osmocom.org/osmocom-bb.git">git://git.osmocom.org/osmocom-bb.git</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd osmocom-bb</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ git checkout sylvain/testing</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd src/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ make HOST_layer23_CONFARGS=--enable-transceiver</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">如果没有错的话到这里OSMOCOM-BB安装完成！！</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">下面就是重头戏----openbts了！！</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">Ox05</span><span STYLE="word-wrap: break-word; font-weight: bold;">安装</span><span STYLE="word-wrap: break-word; font-weight: bold;">OpenBTS 5.0:</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">①&nbsp;&nbsp;</span><span STYLE="word-wrap: break-word; font-weight: bold;">依然是依赖可能有重复：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$sudo apt-get install autoconf libtool libosip2-dev libortp-dev libusb-1.0-0-dev g++ sqlite3 libsqlite3-dev erlang libreadline6-dev libncurses5-dev libortp8</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$apt-get install subversion</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$apt-get install fftw3 fftw3-dev(这个用于BTS信号处理中的傅里叶变换，大学数字信号处理)</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">②&nbsp;&nbsp;</span><span STYLE="word-wrap: break-word; font-weight: bold;">安装libosmo-dsp</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$cd /opt/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$git clone <a HREF="git://git.osmocom.org/libosmo-dsp.git">git://git.osmocom.org/libosmo-dsp.git</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$cd libosmo-dsp/</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$autoreconf -i</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$./configure</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$make</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$sudo make install</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$cd ../</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">③</span><span STYLE="word-wrap: break-word; font-weight: bold;">&nbsp;</span><span STYLE="word-wrap: break-word; font-weight: bold;">安装</span><span STYLE="word-wrap: break-word; font-weight: bold;">openbts</span><span STYLE="word-wrap: break-word; font-weight: bold;">：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">先升级git：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo apt-get install software-properties-common python-software-properties</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo add-apt-repository ppa:git-core/ppa</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">(press enter to continue)</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo apt-get update</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ sudo apt-get install git</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">查看版本git --version&nbsp;&nbsp;我的是2.1.4。</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ git clone <a HREF="https://github.com/RangeNetworks/dev.git">https://github.com/RangeNetworks/dev.git</a></span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ cd dev</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ ./clone.sh</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ ./switchto.sh master （验证下载）</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">又是依赖（有重复，请忽视）：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$sudo apt-get install autoconf libtool libosip2-dev libortp-dev libusb-1.0-0-dev g++ sqlite3 libsqlite3-dev erlang libreadline6-dev libncurses5-dev</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$cd liba53</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$sudo make install</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$cd ../</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$ ./build.sh SDR1（执行这一步会用到google的东西，所以要翻墙，用稳定的VPN，因为需要自动下载asterisk-11.7.0.tar.gz）</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word; font-weight: bold;">④&nbsp;&nbsp;</span><span STYLE="word-wrap: break-word; font-weight: bold;">漫长的等待结束后，openbts</span><span STYLE="word-wrap: break-word; font-weight: bold;">安装完成，开始配置：</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">在openbts文件夹下执行以下代码创建OpenBTS的配置数据</span></div><div STYLE="word-wrap: break-word; text-align: left;"><span STYLE="word-wrap: break-word;">$sudo sqlite3 -init ./apps/OpenBTS.example.sql /etc/OpenBTS/OpenBTS.db</span><span STYLE="word-wrap: break-word;">&nbsp;</span></div><div><br STYLE="word-wrap: break-word;"/></div><div><br STYLE="word-wrap: break-word;"/></div></td></tr></tbody></table></div><div><br/></div></en-note>      