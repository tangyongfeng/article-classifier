---
title: 第三方设备连进用户的WiFi
updated: 2018-05-05 19:32:19Z
created: 2018-05-05 19:32:19Z
---


<en-note><div>[cp]IoT 设备需要连进用户的 WiFi，但是设计上没有蓝牙模块，而自己做 AP 让用户连上来输密码的体验又太差，用户自己的 WiFi 又是加密的不可能直接广播出 SSID 和密码给设备来侦听到，怎么办呢？<br/><br/>今天学到一个骚操作：用户保持连接自己的正常 WiFi，设备的手机 app 将 WiFi SSID 和密码拼成一个字符串，然后依次取出这个字符串的每个字节作为一个 UDP 组播包的目标地址最低位，并发出这个组播。二层组播地址最低字节与三层一致，而 802.11 帧中 Receiver address 字段总是明文的，因此只要智能设备持续侦听有流量的信道，抓到全部这种组播帧，就可以把所有帧的最低字节组合起来得到用户输入的 SSID 和密码。这样一来，就可以实现用户不需要切换 WiFi、也不需要解除 WiFi 加密就能让智能设备联网的目标了。真的是太机智了！（当然，实际上不止用了最低那一字节）<br/><br/></div><div>之前了解到有些安防摄像头联网的方式是手机把 SSID 和密码做成一个二维码，然后把手机举到摄像头前给它扫。我觉得这种方式已经很骚了，没想到还有更骚的，开眼界了[跪了][/cp]</div></en-note>      