---
title: 隔离目标和原则
updated: 2013-07-13 02:48:43Z
created: 2013-07-13 02:15:16Z
---

隔离目标和原则

保证异常出现时影响范围可控
     按主要介入方隔离
     按业务隔离
     按功能核心成都隔离
隔离方式
     物理隔离·逻辑隔离
     读写隔离
保证SLA的措施
     所有的地方加
超时。
     谨慎的重试。异常情况下读重试可能将情况更加恶化，写情况下
     容量规划
          每季度至少一次例行评估
          重大活动前容量评估
          监控系统黄色预警
          日常情况下30%冗余
          资源或者系统构架调整时需要重点关注
     failover策略
          服务降级：保证核心功能
          快速失败：保证不卡死
          流量限制：保证正常请求
构建稳定的系统-容灾预案
     IDC容灾
     限流
     降级    
     紧急快速扩容
线上异常演练
     模拟各种异常的情况出现，我们曾经做过的failure design是否都是正常的，出现的各种异常都是有补救措施的。
新浪自有演练系统的介绍
     引流线上真是流量
     异常场景搭建和模拟
     预案预演
     验证系统
     
      引流线上真实流量
     通过tcpcopy引流到演练服务器。使用linux tc模拟依赖资源或者服务出现异常的场景。
     箭扣字节码形式注入sleep代码模拟接口慢的场景。
验证手段
     页面中4xx 5xx的比例
     响应时间是否在正常范围内
     是否满足sla的要求
     返回包的大小
     日志分析
注意事项
     避免copy上行接口流量导致写请求被多次处理
     避免对后端造成很大压力
     避免写花缓存数据
     尽量选择在地方和工程师在场的时间段进行演练
     完善的缉拿空报警机制