{
  "ingest_source": {
    "id": "b399c554-df55-4cb0-afa6-2670b0c21299",
    "source_type": "evernote_html",
    "source_path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/解密微博红包：架构、防刷、监控和资源调度.html",
    "collected_at": "2025-11-09T20:05:15.426309Z",
    "external_id": null,
    "title_hint": null,
    "language_hint": "zh-cn",
    "captured_at": null,
    "checksum": "721a2e4343875128d721ad42f642f1b7d1008c43b9dc042d5e6f065c90761bf9",
    "status": "pending",
    "notes": {
      "batch_id": null
    }
  },
  "note": {
    "id": "838ce986-aaf3-4f75-b8d4-9f775839564c",
    "ingest_source_id": "b399c554-df55-4cb0-afa6-2670b0c21299",
    "canonical_title": "解密微博红包：架构、防刷、监控和资源调度",
    "language": "zh-cn",
    "ingested_at": "2025-11-09T20:05:15.426316Z",
    "created_at": null,
    "status": "active",
    "importance": 0,
    "attributes": {
      "source_filename": "解密微博红包：架构、防刷、监控和资源调度.html"
    }
  },
  "variants": [
    {
      "id": "c850680a-5031-4ed1-b1eb-89b821812de8",
      "note_id": "838ce986-aaf3-4f75-b8d4-9f775839564c",
      "variant_type": "raw_html",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-09T20:05:15.426319Z",
      "content": "---\ntitle: 解密微博红包：架构、防刷、监控和资源调度\nupdated: 2016-03-19 05:07:14Z\ncreated: 2016-03-19 05:07:14Z\nsource: http://www.infoq.com/cn/articles/2016-hongbao-weibo\nlatitude: 46.16528942\nlongitude: 14.35196417\naltitude: 0.0000\n---\n\n\n\n<en-note>\n\n&Tab;<div STYLE=\"font-family: Helvetica, Arial, sans-serif; -webkit-text-size-adjust: 100%; color: rgb(51, 51, 51); background-color: rgb(247, 248, 250); padding: 0px; font-size: 16px; line-height: 22px;\">\n        \n        \n        \n\n        \n        \n            \n            \n        \n\n        \n            \n            \n        \n        \n\n        \n        \n            \n                \n            \n        \n\n        \n\n\n\n\n\n\n\n\n\n&Tab;&Tab;<div STYLE=\"display: block; height: 43px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234); position: relative;\">\n    <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; height: 24px; width: 80px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/infoq_logo.svg); overflow: hidden; text-indent: -9999em; position: absolute; left: 10px; top: 10px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/\"></a>\n    \n    \n&Tab;&Tab;&Tab;<ul STYLE=\"position: absolute; right: 0px; top: 0px; list-style-type: none; margin: 0px; padding: 0px; display: block;\">\n        \n&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; display: block; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(219, 219, 234);\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; width: 44px; height: 44px; overflow: hidden; text-indent: 0px; background-size: 28px; text-align: center; line-height: 44px; font-weight: bold; background-position: 0px 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">中文</a></li>\n        \n        \n            \n&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; display: block; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(219, 219, 234);\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/menu_icons/icon_account_logged_in.svg); display: none !important; visibility: hidden !important; width: 44px; height: 44px; overflow: hidden; text-indent: -999em; background-size: 28px; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\"></a></li>\n            \n&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; display: block; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(219, 219, 234);\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/menu_icons/icon_account.svg); display: block; width: 44px; height: 44px; overflow: hidden; text-indent: -999em; background-size: 28px; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\"></a></li>\n        \n        \n&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; display: block; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(219, 219, 234);\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/menu_icons/icon_search.svg); display: block; width: 44px; height: 44px; overflow: hidden; text-indent: -999em; background-size: 28px; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\"></a></li>\n        \n&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; display: block; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(219, 219, 234);\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/menu_icons/icon_menu.svg); display: block; width: 44px; height: 44px; overflow: hidden; text-indent: -999em; background-size: 28px; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\"></a></li>\n    \n&Tab;&Tab;&Tab;</ul>\n\n    \n    \n        \n\n\n\n\n\n\n\n\n\n\n&Tab;&Tab;&Tab;<div STYLE=\"position: relative; top: 44px; background-color: white; z-index: 10; width: 100%; -webkit-box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; display: none;\">\n    \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 24px; line-height: 30px; display: block; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); text-align: center; padding: 7px 0px; margin: 0px; color: white; background-color: rgb(34, 101, 169);\">Choose language</h2>\n    \n&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"display: block; margin: 0px; padding: 5px; min-height: 46px; overflow: auto;\">\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: inline-block; box-sizing: border-box; width: 20%; float: left;\"><a STYLE=\"color: white; text-decoration: none; display: block; text-align: center; margin: 4px; border: 1px solid rgb(34, 101, 169); padding: 10px 0px; font-weight: bold; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 24px; background-image: linear-gradient(rgb(255, 255, 255) 0px, rgb(239, 239, 239) 100%); background-color: rgb(34, 101, 169);\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">中文</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: inline-block; box-sizing: border-box; width: 20%; float: left;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; text-align: center; margin: 4px; border: 1px solid rgb(170, 170, 170); padding: 10px 0px; font-weight: bold; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 24px; background-image: linear-gradient(rgb(255, 255, 255) 0px, rgb(239, 239, 239) 100%);\" HREF=\"http://www.infoq.com/\">En</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: inline-block; box-sizing: border-box; width: 20%; float: left;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; text-align: center; margin: 4px; border: 1px solid rgb(170, 170, 170); padding: 10px 0px; font-weight: bold; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 24px; background-image: linear-gradient(rgb(255, 255, 255) 0px, rgb(239, 239, 239) 100%);\" HREF=\"http://www.infoq.com/jp/\">日本</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: inline-block; box-sizing: border-box; width: 20%; float: left;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; text-align: center; margin: 4px; border: 1px solid rgb(170, 170, 170); padding: 10px 0px; font-weight: bold; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 24px; background-image: linear-gradient(rgb(255, 255, 255) 0px, rgb(239, 239, 239) 100%);\" HREF=\"http://www.infoq.com/fr/\">Fr</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: inline-block; box-sizing: border-box; width: 20%; float: left;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; text-align: center; margin: 4px; border: 1px solid rgb(170, 170, 170); padding: 10px 0px; font-weight: bold; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 24px; background-image: linear-gradient(rgb(255, 255, 255) 0px, rgb(239, 239, 239) 100%);\" HREF=\"http://www.infoq.com/br/\">Br</a></li>\n    \n&Tab;&Tab;&Tab;&Tab;</ul>\n\n&Tab;&Tab;&Tab;</div>\n    \n\n    \n    \n&Tab;&Tab;&Tab;<div STYLE=\"position: relative; top: 44px; background-color: white; z-index: 10; width: 100%; -webkit-box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; display: none;\">\n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 24px; line-height: 30px; display: block; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); text-align: center; padding: 7px 0px; margin: 0px; color: white; background-color: rgb(34, 101, 169);\">Search InfoQ</h2>\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"padding: 10px; display: block;\">\n            \n            \n            \n            \n            \n        </div>\n    \n&Tab;&Tab;&Tab;</div>\n    \n\n    \n&Tab;&Tab;&Tab;<div STYLE=\"position: relative; top: 44px; background-color: white; z-index: 10; width: 100%; -webkit-box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; display: none;\">\n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 24px; line-height: 30px; display: block; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); text-align: center; padding: 7px 0px; margin: 0px; color: white; background-color: rgb(32, 134, 66);\">欢迎， <span STYLE=\"\">guest</span>!</h2>\n        \n&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"margin: 0px; padding: 10px; list-style-type: none;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-bottom: 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 10px; margin: 0px; text-align: center;\" HREF=\"http://www.infoq.com/cn/showbookmarks.action\">我的阅读清单</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-bottom: 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 10px; margin: 0px; text-align: center;\" HREF=\"http://www.infoq.com/cn/edituser.action\">偏好设置</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-bottom: 0px; text-align: right;\"><a STYLE=\"color: white; text-decoration: none; background-color: rgb(32, 134, 66); border: 0px; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; padding: 12px 16px 12px 40px; font-weight: bold; display: inline-block; text-align: center; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/menu_icons/icon_logout.svg); background-size: 30px; background-position: 6px 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/logout.action\">注销</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;</div>\n    \n    \n&Tab;&Tab;&Tab;<div STYLE=\"position: relative; top: 44px; background-color: white; z-index: 10; width: 100%; -webkit-box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; box-shadow: rgba(0, 0, 0, 0.298039) 0px 10px 20px; display: none;\">\n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 24px; line-height: 30px; display: block; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); text-align: center; padding: 7px 0px; margin: 0px; color: white; background-color: rgb(34, 101, 169);\">登录</h2>\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: block; padding: 20px;\">\n            <span STYLE=\"display: block; margin-bottom: 4px;\">E-mail:</span>\n            \n            <span STYLE=\"display: block; margin-bottom: 4px;\">密码:</span>\n            \n            <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: inline-block; width: 90px;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">忘记密码？</a>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: none !important; visibility: hidden !important;\"></div>\n        \n&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"background-color: rgb(247, 248, 250); border-top-left-radius: 12px; border-top-right-radius: 12px; border-bottom-right-radius: 12px; border-bottom-left-radius: 12px; padding: 10px; margin: 0px 20px;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px; margin: 0px 0px 10px;\">登陆为:</h2>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"display: block; margin: 0px; padding: 0px; list-style-type: none; overflow: auto;\">\n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px; padding: 0px; width: 25%;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/social_icons/microsoft.svg); display: block; text-align: center; padding-top: 48px; font-size: 13px; background-size: 44px; background-position: 50% 0px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/social/liveLogin.action?fl=login&orig=/cn/articles/2016-hongbao-weibo\">使用Microsoft账号登录</a></li>\n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px; padding: 0px; width: 25%;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/social_icons/google.svg); display: block; text-align: center; padding-top: 48px; font-size: 13px; background-size: 44px; background-position: 50% 0px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/social/googleLogin.action?fl=login&orig=/cn/articles/2016-hongbao-weibo\">使用Google账号登录</a></li>\n                \n                \n                    \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px; padding: 0px; width: 25%;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/social_icons/weibo.svg); display: block; text-align: center; padding-top: 48px; font-size: 13px; background-size: 44px; background-position: 50% 0px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/social/weiboLogin.action?fl=login&orig=/cn/articles/2016-hongbao-weibo\">使用Weibo账号登录</a></li>\n                    \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px; padding: 0px; width: 25%;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/social_icons/qq.png); display: block; text-align: center; padding-top: 48px; font-size: 13px; background-size: 44px; background-position: 50% 0px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/social/qqLogin.action?fl=login&orig=/cn/articles/2016-hongbao-weibo\">使用QQ账号登录</a></li>\n                \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n        \n&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"padding: 20px;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 44px; display: inline-block; height: 44px; margin: 0px;\">新的用户:</h2>\n            <a STYLE=\"color: white; text-decoration: none; background-color: rgb(32, 134, 66); border: 0px; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; padding: 12px 24px; font-weight: bold; display: inline-block; text-align: center; float: right; width: 112px;\" HREF=\"http://www.infoq.com/cn/reginit.action\">立即注册</a>\n        \n&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: none !important; padding: 20px; visibility: hidden !important;\">\n            <span STYLE=\"display: block; margin-bottom: 4px;\">InfoQ账号使用的E-mail:</span>\n            \n            <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; line-height: 20px; padding-top: 24px; display: inline-block;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">Back to login</a>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: none !important; visibility: hidden !important;\"></div>\n        \n&Tab;&Tab;&Tab;&Tab;</div>\n    \n&Tab;&Tab;&Tab;</div>\n    \n    \n    \n&Tab;&Tab;&Tab;<div STYLE=\"display: none; position: relative; top: 44px; z-index: 10;\">\n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 24px; line-height: 30px; display: block; background-color: rgb(34, 101, 169); border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); text-align: center; padding: 7px 0px; margin: 0px; color: white;\">InfoQ contents</h2>\n        \n&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"display: block; list-style-type: none; margin: 0px; padding: 0px; overflow: auto;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"box-sizing: border-box; width: 33%; float: left; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_news.svg); background-color: white; display: block; text-align: center; padding: 60px 0px 10px; background-position: 50% 10px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/news\">新闻</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"box-sizing: border-box; width: 34%; float: left; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221);\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_articles.svg); background-color: white; display: block; text-align: center; padding: 60px 0px 10px; background-position: 50% 10px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles\">文章</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"box-sizing: border-box; width: 33%; float: left; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_presentations.svg); font-size: 12px; background-color: white; display: block; text-align: center; padding: 60px 0px 10px; background-position: 50% 10px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/presentations\">演讲</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"box-sizing: border-box; width: 33%; float: left; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_interviews.svg); background-color: white; display: block; text-align: center; padding: 60px 0px 10px; background-position: 50% 10px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/interviews\">访谈</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"box-sizing: border-box; width: 34%; float: left; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(221, 221, 221); border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221);\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_books.svg); background-color: white; display: block; text-align: center; padding: 60px 0px 10px; background-position: 50% 10px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/minibooks\">迷你书</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"box-sizing: border-box; width: 33%; float: left; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_research.svg); background-color: white; display: block; text-align: center; padding: 60px 0px 10px; background-position: 50% 10px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/research\">调查</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;</ul>\n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 24px; line-height: 30px; display: block; background-color: rgb(228, 232, 239); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); text-align: center; padding: 7px 0px; margin: 0px;\">领域</h2>\n        \n        \n            \n\n\n\n\n\n\n\n\n\n&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; background-color: white;\">\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\">\n        <a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">语言 &amp; 开发</a>\n        <a STYLE=\"color: white; text-decoration: none; display: none; padding: 3px 8px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); position: absolute; right: 7px; top: 7px; background-color: rgb(34, 101, 169); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; line-height: 22px; font-size: 14px;\" HREF=\"http://www.infoq.com/cn/development/\">显示全部</a>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; background-color: rgb(247, 248, 250); display: none;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"Java\">Java</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"Clojure\">Clojure</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"Scala\">Scala</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\".Net\">.Net</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"移动\">移动</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"Android\">Android</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"iOS\">iOS</a></li>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"HTML 5\">HTML 5</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"JavaScript\">JavaScript</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"函数式编程\">函数式编程</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"Web API\">Web API</a></li>\n\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\">\n        <a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">架构 &amp; 设计</a>\n        <a STYLE=\"color: white; text-decoration: none; display: none; padding: 3px 8px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); position: absolute; right: 7px; top: 7px; background-color: rgb(34, 101, 169); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; line-height: 22px; font-size: 14px;\" HREF=\"http://www.infoq.com/cn/architecture-design/\">显示全部</a>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; background-color: rgb(247, 248, 250); display: none;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"架构 \">架构</a></li>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"企业架构\">企业架构</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"性能和可伸缩性\">性能和可伸缩性</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"设计\">设计</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"案例分析\">案例分析</a></li>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"设计模式\">设计模式</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"安全\">安全</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\">\n        \n        <a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">数据科学</a>\n        <a STYLE=\"color: white; text-decoration: none; display: none; padding: 3px 8px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); position: absolute; right: 7px; top: 7px; background-color: rgb(34, 101, 169); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; line-height: 22px; font-size: 14px;\" HREF=\"http://www.infoq.com/cn/data-science/\">显示全部</a>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; background-color: rgb(247, 248, 250); display: none;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"大数据\">大数据</a></li>\n            \n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"NoSQL\">NoSQL</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"关系型数据库\">关系型数据库</a></li>\n            \n            \n            \n            \n\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\">\n        <a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">文化 &amp; 方法</a>\n        <a STYLE=\"color: white; text-decoration: none; display: none; padding: 3px 8px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); position: absolute; right: 7px; top: 7px; background-color: rgb(34, 101, 169); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; line-height: 22px; font-size: 14px;\" HREF=\"http://www.infoq.com/cn/culture-methods/\">显示全部</a>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; background-color: rgb(247, 248, 250); display: none;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"Agile\">Agile</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"领导能力\">领导能力</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"团队协作\">团队协作</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"测试\">测试</a></li>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"用户体验\">用户体验</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"Scrum\">Scrum</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"精益\">精益</a></li>\n            \n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\">\n        <a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo\">DevOps</a>\n        <a STYLE=\"color: white; text-decoration: none; display: none; padding: 3px 8px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); position: absolute; right: 7px; top: 7px; background-color: rgb(34, 101, 169); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; line-height: 22px; font-size: 14px;\" HREF=\"http://www.infoq.com/cn/devops/\">显示全部</a>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; background-color: rgb(247, 248, 250); display: none;\">\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"持续交付\">持续交付</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"自动化操作\">自动化操作</a></li>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 6px 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TITLE=\"云计算\">云计算</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n\n&Tab;&Tab;&Tab;&Tab;</ul>\n        \n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 24px; line-height: 30px; display: block; background-color: rgb(228, 232, 239); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221); text-align: center; padding: 7px 0px; margin: 0px;\"></h2>\n        \n&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; background-color: white;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/\">首页</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" TARGET=\"_blank\" HREF=\"http://www.qconferences.com/\">QCon Conferences</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/about-us\">关于我们</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/about-you\">关于您</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/contribute\">投稿</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block; position: relative;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);\" HREF=\"http://www.infoq.com/cn/purpose\">Purpose Index</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;</div>\n\n&Tab;&Tab;</div>\n        \n&Tab;&Tab;<div STYLE=\"\">\n            \n    \n&Tab;&Tab;&Tab;<div STYLE=\"\">\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: block; padding: 20px; background-color: white;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<h1 STYLE=\"font-size: 28px; margin: 0px; font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; line-height: 1.2em;\">\n                \n                    <img src=\"../_resources/1976a3aa6480926d7a693393fb783ad9.jpg\"  style=\"border: 0px; float: right; max-width: 50px;\" hash=\"1976a3aa6480926d7a693393fb783ad9\" width=\"100\" height=\"100\" type=\"image/jpeg\" alt=\"\" /></en-media>\n                \n                解密微博红包：架构、防刷、监控和资源调度\n                \n            </h1>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"font-size: 13px; line-height: 18px; color: rgb(153, 153, 153); margin-top: 10px; margin-bottom: 2px;\">\n                \n                    \n                \n                作者\n                <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://www.infoq.com/cn/author/%E6%9F%AF%E7%AB%8B%E5%BF%97\">柯立志</a>\n                \n                发布于\n                2016年3月1日\n            </p>\n            \n            \n\n\n\n\n\n\n\n\n\n            \n\n\n\n\n\n\n\n\n\n\n            \n                \n\n\n\n\n\n\n\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; display: block; width: 100%; overflow: auto;\">\n    \n    \n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; width: 50%; box-sizing: border-box; padding: 0px 10px 0px 0px;\"><a STYLE=\"color: white; text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(35, 101, 169); display: none !important; padding: 6px; margin: 0px; text-align: left; font-size: 14px; line-height: 1.2em; background-size: 40px; border-right-width: 6px; border-right-style: solid; border-right-color: rgb(35, 101, 169); background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_reading_list_remove.svg); visibility: hidden !important; background-position: 100% 0%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo\">添加到<br STYLE=\"\"/>阅读列表</a></li>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; width: 50%; box-sizing: border-box; padding: 0px 10px 0px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 6px; margin: 0px; text-align: left; font-size: 14px; line-height: 1.2em; background-size: 40px; border-right-width: 6px; border-right-style: solid; border-right-color: rgb(228, 232, 239); background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_reading_list_add.svg); background-position: 100% 0%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo\">添加至阅<br STYLE=\"\"/>读列表</a></li>\n    \n    \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; width: 50%; box-sizing: border-box; padding: 0px 0px 0px 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 6px; margin: 0px; text-align: left; font-size: 14px; line-height: 1.2em; background-size: 40px; border-right-width: 6px; border-right-style: solid; border-right-color: rgb(228, 232, 239); background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_reading_list_view.svg); background-position: 100% 0%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/showbookmarks.action\">查看我的<br STYLE=\"\"/>阅读列表</a></li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"color: rgb(217, 83, 79); display: none !important; visibility: hidden !important;\">We failed to create the bookmark.<br STYLE=\"\"/>If the behaviour persists please contact us.</div>\n            \n            \n            \n        \n&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"padding: 0px 20px 20px; background-color: white;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"overflow-wrap: break-word;\">\n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px; margin-top: 0px;\">编者按</h2>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">与传统意义上的红包相比，近两年火起来的&ldquo;红包&rdquo;，似乎才是如今春节的一大重头戏。历经上千年时代传承与变迁，春节发红包早已成为历史沉淀的文化习俗，融入了民族的血脉。按照各家公布的数据，除夕全天<b STYLE=\"font-weight: bold; margin-top: 0px;\">微信用户</b>红包总发送量达到10.1亿次，摇一摇互动量达到110亿次，红包峰值发送量为8.1亿次/分钟。而<b STYLE=\"font-weight: bold;\">支付宝的红包</b>收发总量达到2.4亿次，参与人数达到6.83亿人次，红包总金额40亿元，峰值为8.83亿次/分钟。春晚直播期间讨论春晚的微博达到5191万条，网友互动量达到1.15亿，网友抢微博红包的总次数超过8亿次。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">为此，InfoQ策划了&ldquo;春节红包&rdquo;系列文章，以期为读者剖析各大平台的红包活动背后的技术细节。本文为微博篇。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">随着互联网的发展，打破了以往传统的发红包，带给了红包全新的玩法。微博红包已经成为用户给粉丝拜年的一种途径，土豪版成为土豪刷存在感的方式。每年的红包大战都是用户的现金盛宴，对于整个系统却是残酷的考验。</p>\n                \n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博有8亿注册用户，单日活跃用户数1.34亿的社交平台。红包在微博平台上运行，针对所有的微博用户开放，微博所有用户都可参与红包活动。微博红包有如下特点：</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">红包价值高、种类多、覆盖用户广，亿级别用户参与。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"2\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">半点准时开抢，高并发访问、瞬间峰值高，每分钟带来上亿次的抢红包峰值。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"3\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">请求快速响应，更新亿级用户中奖状态及红包状态。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"4\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">单个红包数额大。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">春晚当天红包总价值超过10亿，有1.34亿用户参与，产生了8亿多次的抢红包行为，其中并发量为平时峰值的10倍左右。在服务器数量一定的情况下，如何构建高并发操作、瞬间峰值高的稳定服务？对于团队和架构师都是一个极大的挑战。这时候系统的架构尤为重要！</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px;\">红包架构</h2>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博红包支持每秒几十万次的操作，应对突发性的热点事件，快速响应，高内聚低耦合的服务成了架构首先要考虑的因素。</p>\n                \n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">(点击放大图像)</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px;\" HREF=\"http://cdn4.infoqstatic.com/statics_s1_20160301-0105u7/resource/articles/2016-hongbao-weibo/zh/resources/201.png\"><img src=\"../_resources/3d2eeb4f9a4c4c96a3ad2248126fa3ed.png\"  style=\"border: 0px; max-width: 100% !important; margin-top: 0px;\" hash=\"3d2eeb4f9a4c4c96a3ad2248126fa3ed\" width=\"865\" height=\"752\" type=\"image/png\" alt=\"\" /></en-media></a></p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博是社交型应用，红包在用户数据、关系、抢红包等结构上存在着各种各样复杂的依赖，这些依赖相比其它应用来说，调用频率更高，性能要求也更高。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">如上图所示，有多个应用模块接入红包的服务层，服务层由多个节点组成，每个节点对应相应的功能并且相对独立。代码模块的使用和组织上相对独立，保证主功能的快速和稳定，将附属的新功能分离在独立模块中。其中红色虚线框内为核心的功能模块，是重点需要保护的功能。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博红包提供获取红包属性（红包金额、红包设置、红包状态、获取抽取结果列表、拆包，抽奖等）接口。服务层调用红包SDK相应的API，会根据应用层逻辑需求提供数据和定制化得数据，完成前端完成交互，达到应用层需要展现的效果。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">&nbsp;</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px;\">防刷策略</h2>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博红包有别于微信用户发出的红包，微信用户发出的红包是针对自己所认识的朋友或者已存在于微信群的用户；微博红包是针对于微博所有用户的红包，通过分析参与红包的用户数据每年都会产生一些囤积大量账号准备在春晚大发横财的公司和个人。如何防止微博红包被自动注册或者通过转卖账号来领取红包？这成为面对我们需要解决的一大问题。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">(点击放大图像)</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px;\" HREF=\"http://cdn4.infoqstatic.com/statics_s1_20160301-0105u7/resource/articles/2016-hongbao-weibo/zh/resources/202.png\"><img src=\"../_resources/52d744ac7dc38fb45403730597f1c497.png\"  style=\"border: 0px; max-width: 100% !important; margin-top: 0px;\" hash=\"52d744ac7dc38fb45403730597f1c497\" width=\"865\" height=\"398\" type=\"image/png\" alt=\"\" /></en-media></a></p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博通过基于用户在微博上的行为分析，通过登录，发微博，身份验证等方面来进行分析。主要有：</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">用户注册：通过用户行为分析来识别机器注册的用户，则注册环节进行拦截。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"2\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">用户登录：分析用户登录的行为，通过验证码，身份验证以及手机号验证等措施来提高机器自动登录的门槛。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"3\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">账号质量：通过实名认证，微博的动态等方面来计算出用户的质量。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"4\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">参与红包：红包战场一贯是刷奖账号的获利主战场， 通过用户平时在微博的行为、属性以及实时的登录状态和常用设备来进行分析，判断是否是正常账号来确定是否可以中奖。</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px;\">完善的监控</h2>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">红包系统是一个大而规则复杂的系统，系统越大，依赖的资源越多，也就越容易出现各种各样的问题。为了给提供稳定运行的服务，必须要能时刻知晓各个资源当前的运行状态。并且在系统出现异常之前或者出现异常的时候，对问题进行排查和定位。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">(点击放大图像)</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\"><img src=\"../_resources/5d4780108098808bb060e3af6c883700.jpg\"  type=\"image/jpeg\" style=\"border: 0px; max-width: 100% !important; margin-top: 0px; width: 550px;\" alt=\"\" width=\"1718\" height=\"830\" hash=\"5d4780108098808bb060e3af6c883700\" /></en-media></p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px;\" HREF=\"http://cdn4.infoqstatic.com/statics_s1_20160301-0105u7/resource/articles/2016-hongbao-weibo/zh/resources/205.png\"><img src=\"../_resources/ffbb3a6165e5083b5bc6755a7a9867ed.png\"  style=\"border: 0px; max-width: 100% !important; margin-top: 0px;\" hash=\"ffbb3a6165e5083b5bc6755a7a9867ed\" width=\"864\" height=\"277\" type=\"image/png\" alt=\"\" /></en-media></a></p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px;\" HREF=\"http://cdn4.infoqstatic.com/statics_s1_20160301-0105u7/resource/articles/2016-hongbao-weibo/zh/resources/204.png\"><img src=\"../_resources/8d371987f5ecb7fbf0629f9d302d16fe.png\"  style=\"border: 0px; max-width: 100% !important; margin-top: 0px;\" hash=\"8d371987f5ecb7fbf0629f9d302d16fe\" width=\"865\" height=\"282\" type=\"image/png\" alt=\"\" /></en-media></a></p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px;\" HREF=\"http://cdn4.infoqstatic.com/statics_s1_20160301-0105u7/resource/articles/2016-hongbao-weibo/zh/resources/206.png\"><img src=\"../_resources/099a746cbf4d7e9e80d98a0adbce2327.png\"  style=\"border: 0px; max-width: 100% !important; margin-top: 0px;\" hash=\"099a746cbf4d7e9e80d98a0adbce2327\" width=\"865\" height=\"177\" type=\"image/png\" alt=\"\" /></en-media></a></p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">如上图所示，完善的监控系统，为微博红包顺利度过春晚提供了很好的保障。主要涉及的监控如下：</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">1、应用层接口响应时间监控</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">通过实时的分析access log日志，以HTTP code和响应时间维度实时统计出接口的状态和性能，根据占比来查看接口的健康程度。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">2、服务层各模块性能监控</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">在模块中记录开始时间和结束时间，每次处理完计算出模块的耗时，通过这种方式很好的发现各个模块是否正常。&nbsp;&nbsp;&nbsp;&nbsp;</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">3、网络层监控</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博红包的出口网络是一个单独的app池，出口带宽使用到80%的时候网络稳定性就可能受到影响。通过计算后端服务器输出计算出带宽，以便能够做到及时响应扩容。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">4、资源层的监控</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">对各种资源的监控，比如Redis、MySQL、MC等资源的连接时间、状态和操作的实时统计分析，快速定位是否存在资源瓶颈。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">5、服务器的性能监控</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">通过运维监控系统，对服务器的CPU、内存使用情况，做到了能够观察每台服务器具体的运行情况。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">6、系统错误日志的监控</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">系统错误监控包括服务器负载，服务进程状态，资源连接，网络连接出现的问题，实时通过手机，邮件和私信知道。为快速响应创造了条件。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">&nbsp;</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px;\">弹性资源管理和调度</h2>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">1、故障的秒级切换</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">微博红包服务部署在了三个机房（包括云服务），任何一个机房如果出现网络或者其它不可预测的问题可以在几秒钟之内将服务切换到其它机房。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">2、资源的相互独立</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">资源的相互独立，让资源的可扩展性变得容易。而且使得各个服务之间交叉影响达到了最小。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">3、引入阿里云做为第三机房，使用Docker快速部署服务</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">红包的核心服务主要分布在 2 个机房，两者互相做为灾难备份用途，为应对超预期的峰值，引入阿里云做为第三机房。使用定制化的红包Docker快速部署服务来实现弹性调度架构。通过Docker自动化操作大规模集群，进行弹性调度资源的任务，实现快速部署服务来应付超预期的峰值。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px;\">系统的挑战和性能优化</h2>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">为了保证用户体验，微博红包需要解决以下几个问题：</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">系统性能的可靠性</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"2\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">关键节点的可用性</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"3\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">如何应对突发热点</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ol STYLE=\"\" START=\"4\">\n&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-top: 0px;\">业务频繁迭代的处理</li>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ol>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">1、系统架构的升级</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">模块的独立化，避免出现模块间的相互影响。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">nginx+lua的使用，使得服务器的QPS有了数量级的提升，同时服务器集群做到了秒级重启。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">2、修枝剪页</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">减少对于系统外部的依赖，梳理完整的调用关系图。非核心功能使用异步调用，合并相关的调用，去掉重复的调用。保证核心调用逻辑，避免非核心业务影响核心业务。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">3、多级缓存</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">服务端本地缓存，使用nginx本身缓存和服务器的L0缓存，来提升模块的响应速度，做到了90%以上核心接口的响应时间在50ms以内，减少了进程等待时间，提升了服务器的处理速度。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">一年一度的各大平台抢红包还会延续下去，这是一个斗智斗勇的过程，在服务器有限的情况下每一次与峰值的对抗都是对技术一次极大的挑战，每次挑战都是带来技术上的成长和收获。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<hr STYLE=\"box-sizing: content-box; height: 0px;\"/>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">感谢<a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px;\" HREF=\"http://www.infoq.com/cn/author/%E9%83%AD%E8%95%BE\">郭蕾</a>对本文的策划和审校。</p>\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">给InfoQ中文站投稿或者参与内容翻译工作，请邮件至<a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px;\" HREF=\"mailto:editors@cn.infoq.com\">editors@cn.infoq.com</a>。也欢迎大家通过新浪微博（<a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://www.weibo.com/infoqchina\">@InfoQ</a>，<a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://weibo.com/u/1451714913\">@丁晓昀</a>），微信（微信号：<a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://weixin.sogou.com/gzh?openid=oIWsFt0HnZ93MfLi3pW2ggVJFRxY\">InfoQChina</a>）关注我们。</p>\n\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n            \n            \n\n            \n                \n                \n                \n                \n            \n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 18px; line-height: 26px;\">领域</h2>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; padding: 0px; margin: 0px 0px 10px; overflow: auto;\">\n                        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px 6px 6px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 4px 8px; margin: 0px; text-align: center; font-size: 13px; line-height: 16px;\" HREF=\"http://www.infoq.com/cn/architecture-design\" NAME=\"architecture-design\">架构 &amp; 设计</a></li>\n                        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px 6px 6px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 4px 8px; margin: 0px; text-align: center; font-size: 13px; line-height: 16px;\" HREF=\"http://www.infoq.com/cn/development\" NAME=\"development\">语言 &amp; 开发</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 18px; line-height: 26px;\">专栏</h2>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; padding: 0px; margin: 0px; overflow: auto;\">\n                        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px 6px 6px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 4px 8px; margin: 0px; text-align: center; font-size: 13px; line-height: 16px;\" HREF=\"http://www.infoq.com/cn/weibo\" NAME=\"weibo\">微博</a></li>\n                        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px 6px 6px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 4px 8px; margin: 0px; text-align: center; font-size: 13px; line-height: 16px;\" HREF=\"http://www.infoq.com/cn/gaobing\" NAME=\"gaobing\">高并发</a></li>\n                        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px 6px 6px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 4px 8px; margin: 0px; text-align: center; font-size: 13px; line-height: 16px;\" HREF=\"http://www.infoq.com/cn/cloud-service\" NAME=\"cloud-service\">云服务</a></li>\n                        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px 6px 6px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 4px 8px; margin: 0px; text-align: center; font-size: 13px; line-height: 16px;\" HREF=\"http://www.infoq.com/cn/operation\" NAME=\"operation\">运维</a></li>\n                        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"float: left; margin: 0px 6px 6px 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 4px 8px; margin: 0px; text-align: center; font-size: 13px; line-height: 16px;\" HREF=\"http://www.infoq.com/cn/Hongbao\" NAME=\"Hongbao\">春节红包</a></li>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n\n\n\n            \n\n\n\n\n\n\n\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"background-color: white; border: 1px solid rgb(219, 219, 234); border-top-left-radius: 12px; border-top-right-radius: 12px; border-bottom-right-radius: 12px; border-bottom-left-radius: 12px; margin: 10px;\">\n    \n    \n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"background-color: rgb(247, 248, 250); margin: 10px; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; padding: 10px;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 1.4em; text-align: center; display: block; margin: 0px 0px 10px;\">相关赞助商</h2>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"margin: 0px; overflow: auto;\">\n                \n                    <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; width: 100px; float: right; margin-left: 20px;\" TARGET=\"_blank\">\n                        <img src=\"../_resources/f47efa11fdacb6a0f39810ee4e2dc511.jpg\"  style=\"border: 0px; max-width: 100px;\" hash=\"f47efa11fdacb6a0f39810ee4e2dc511\" width=\"175\" height=\"59\" type=\"image/jpeg\" alt=\"\" /></en-media>\n                    </a>\n                \n                \n                <strong STYLE=\"font-weight: bold;\">\n                    <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" TARGET=\"_blank\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo\">\n                        \n                    </a>\n                </strong>\n                <br STYLE=\"\"/>\n                \n                </p>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"margin: 0px; overflow: auto;\"><span STYLE=\"line-height: 20.8px;\">QCon北京2016大会，4月21-23日，北京&centerdot;国际会议中心，<a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" TARGET=\"_blank\" HREF=\"http://www.infoq.com/infoq/url.action?i=8963&t=f\">精彩内容</a>邀您参与！</span></p>\n\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"margin: 0px; overflow: auto;\"></p>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n    \n\n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;</div>\n\n        \n\n\n\n\n\n\n\n\n\n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"\">\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"border-top-width: 1px; border-top-style: solid; border-top-color: rgb(219, 219, 234); background-image: linear-gradient(rgb(255, 255, 255) 0px, rgb(227, 231, 238) 100%); position: relative;\">\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h1 STYLE=\"font-size: 26px; margin: 0px; font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; line-height: 44px; display: block; padding-left: 42px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_editorial.svg); background-size: 22px; background-position: 10px 50%; background-repeat: no-repeat no-repeat;\">相关内容</h1>\n        <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; width: 44px; height: 44px; position: absolute; right: 0px; top: 0px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_collapse.svg); background-size: 22px; display: block; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\" NAME=\"editorial\"></a>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"\">\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"background-color: white; list-style-type: none; margin: 0px; padding: 0px; min-height: 22px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"padding: 10px 40px 10px 42px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234); position: relative;\"><img src=\"../_resources/033e887d0cf8939abb78d270e8761aa8.svg\"  style=\"border: 0px; position: absolute; left: 10px; top: 50%; margin-top: -10px; width: 22px; height: 22px; opacity: 0.3;\" hash=\"033e887d0cf8939abb78d270e8761aa8\" type=\"image/svg+xml\" alt=\"\" /></en-media><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block;\">新浪微博高可用服务保障体系演进</a><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; position: absolute; right: 0px; top: 0px; height: 100%; width: 40px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_arrow.svg); background-position: 50% 50%; background-repeat: no-repeat no-repeat;\"></a></li>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"padding: 10px 40px 10px 42px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234); position: relative;\"><img src=\"../_resources/033e887d0cf8939abb78d270e8761aa8.svg\"  style=\"border: 0px; position: absolute; left: 10px; top: 50%; margin-top: -10px; width: 22px; height: 22px; opacity: 0.3;\" hash=\"033e887d0cf8939abb78d270e8761aa8\" type=\"image/svg+xml\" alt=\"\" /></en-media><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block;\">新浪微博应对峰值压力的混合云架构实践</a><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; position: absolute; right: 0px; top: 0px; height: 100%; width: 40px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_arrow.svg); background-position: 50% 50%; background-repeat: no-repeat no-repeat;\"></a></li>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"padding: 10px 40px 10px 42px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234); position: relative;\"><img src=\"../_resources/c9dbdc5193df90addc3ddd2565ecf003.svg\"  style=\"border: 0px; position: absolute; left: 10px; top: 50%; margin-top: -10px; width: 22px; height: 22px; opacity: 0.3;\" hash=\"c9dbdc5193df90addc3ddd2565ecf003\" type=\"image/svg+xml\" alt=\"\" /></en-media><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block;\">李庆丰：新浪微博服务高可用新技术、新架构的尝试</a><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; position: absolute; right: 0px; top: 0px; height: 100%; width: 40px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_arrow.svg); background-position: 50% 50%; background-repeat: no-repeat no-repeat;\"></a></li>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"padding: 10px 40px 10px 42px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234); position: relative;\"><img src=\"../_resources/e05f62da1565d6b9d1c7ac35123fc56a.svg\"  style=\"border: 0px; position: absolute; left: 10px; top: 50%; margin-top: -10px; width: 22px; height: 22px; opacity: 0.3;\" hash=\"e05f62da1565d6b9d1c7ac35123fc56a\" type=\"image/svg+xml\" alt=\"\" /></en-media><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block;\">微博推荐架构的演进</a><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; position: absolute; right: 0px; top: 0px; height: 100%; width: 40px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_arrow.svg); background-position: 50% 50%; background-repeat: no-repeat no-repeat;\"></a></li>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"padding: 10px 40px 10px 42px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234); position: relative;\"><img src=\"../_resources/e05f62da1565d6b9d1c7ac35123fc56a.svg\"  style=\"border: 0px; position: absolute; left: 10px; top: 50%; margin-top: -10px; width: 22px; height: 22px; opacity: 0.3;\" hash=\"e05f62da1565d6b9d1c7ac35123fc56a\" type=\"image/svg+xml\" alt=\"\" /></en-media><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block;\">微博背后的那些算法</a><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; position: absolute; right: 0px; top: 0px; height: 100%; width: 40px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_arrow.svg); background-position: 50% 50%; background-repeat: no-repeat no-repeat;\"></a></li>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n\n&Tab;&Tab;&Tab;&Tab;</div>\n\n        \n            \n        \n\n\n\n\n\n\n\n\n\n    <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo\" NAME=\"discuss\"></a>\n    \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"\">\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"border-top-width: 1px; border-top-style: solid; border-top-color: rgb(219, 219, 234); background-image: linear-gradient(rgb(255, 255, 255) 0px, rgb(227, 231, 238) 100%); position: relative;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h1 STYLE=\"font-size: 26px; margin: 0px; font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; line-height: 44px; display: block; padding-left: 42px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/category_icons/icon_discuss.svg); background-size: 22px; background-position: 10px 50%; background-repeat: no-repeat no-repeat;\">讨论!</h1>\n            <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; width: 44px; height: 44px; position: absolute; right: 0px; top: 0px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_collapse.svg); background-size: 22px; display: block; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\" NAME=\"discuss\"></a>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: none !important; visibility: hidden !important;\">\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"background-color: white; padding-top: 20px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234);\">\n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px; margin: 0px 20px 10px;\">告诉我们您的想法</h2>\n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"margin: 0px 20px 20px;\">\n                    <span STYLE=\"display: block; margin-bottom: 0.5em; box-sizing: border-box; width: 100%;\">主题:</span> \n                    <span STYLE=\"display: block; margin-bottom: 0.5em; box-sizing: border-box; width: 100%;\">信息:</span> <span STYLE=\"font-family: inherit; font-size: 100%; margin: 0px; overflow: auto; vertical-align: top; color: rgb(51, 51, 51); resize: vertical; border: 1px solid rgb(204, 204, 204); padding: 9px; line-height: 24px; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; display: block; box-sizing: border-box; width: 100%; max-width: 100%;\"></span>\n                    \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"font-size: 13px; line-height: 18px; color: rgb(153, 153, 153); margin: 0px 0px 10px;\">允许的HTML标签: a,b,br,blockquote,i,li,pre,u,ul,p</p>\n                    \n                    <span STYLE=\"display: block; margin-bottom: 0.5em; min-height: 32px; box-sizing: border-box; width: 100%;\">当有人回复此评论时请E-mail通知我</span>\n                    \n                    \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: none !important; visibility: hidden !important;\"></div>\n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px; margin: 0px 20px 10px;\">0 社区评论</h2>\n                \n                    <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(228, 232, 239); display: block; padding: 10px; margin: 10px 20px; text-align: center; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/comments_watch.svg); background-size: 32px; background-position: 6px 6px; background-repeat: no-repeat no-repeat;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo#\">\n                        \n                        \n                            邮件订阅这个讨论\n                        \n                    </a>\n                \n                \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: none !important; visibility: hidden !important;\"></div>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"padding: 20px; text-align: center; background-color: white; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234);\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px; margin-top: 0px;\">您好，朋友！</h2>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"\">您需要 <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; margin-top: 0px; margin-bottom: 0px;\" HREF=\"http://www.infoq.com/reginit.action\">注册一个InfoQ账号</a> 才能进行评论。在您完成注册后还需要进行一些设置。</p>\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<p STYLE=\"margin-bottom: 0px;\">获得来自InfoQ的更多体验。</p>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n        \n&Tab;&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px;\">\n            \n        </ul>\n    \n&Tab;&Tab;&Tab;&Tab;</div>\n\n\n\n    \n&Tab;&Tab;&Tab;</div>\n\n    \n\n    \n    \n        \n            \n        \n    \n\n        \n&Tab;&Tab;</div>\n        \n\n\n\n\n\n\n\n\n\n&Tab;&Tab;<div STYLE=\"display: block;\">\n    \n    \n&Tab;&Tab;&Tab;<div STYLE=\"margin: 10px; border: 1px solid rgb(219, 219, 234); border-top-left-radius: 12px; border-top-right-radius: 12px; border-bottom-right-radius: 12px; border-bottom-left-radius: 12px; padding: 20px; background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/bg_newsletter.jpg); background-color: white; background-size: 160px; background-position: 100% 100%; background-repeat: no-repeat no-repeat;\">\n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 1.4em; text-align: center; display: block; margin: 0px 0px 10px;\">InfoQ每周精要</h2>\n        \n&Tab;&Tab;&Tab;&Tab;<p STYLE=\"display: block; padding-right: 100px; margin: 0px 0px 10px;\">通过个性化定制的新闻邮件、RSS Feeds和InfoQ业界邮件通知，保持您对感兴趣的社区内容的时刻关注。</p>\n        \n&Tab;&Tab;&Tab;&Tab;<div STYLE=\"\">\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: none !important; visibility: hidden !important;\"></div>\n            \n        \n&Tab;&Tab;&Tab;&Tab;</div>\n    \n&Tab;&Tab;&Tab;</div>\n    \n    \n&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px 10px 10px; padding: 0px;\">\n        \n        \n&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-bottom: 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; background-color: rgb(228, 232, 239); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; padding: 8px; height: 28px;\" HREF=\"http://www.infoq.com/cn/feed?token=\"><span STYLE=\"background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/icon_rss.svg); background-color: rgb(255, 128, 0); background-size: 20px; display: inline-block; width: 28px; height: 28px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; vertical-align: middle; margin-right: 8px; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\"></span>属于您的个性化RSS</a></li>\n        \n            \n&Tab;&Tab;&Tab;&Tab;<li STYLE=\"margin-bottom: 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none; display: block; background-color: rgb(228, 232, 239); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; padding: 8px; height: 28px;\" TARGET=\"_blank\" HREF=\"http://e.weibo.com/infoqchina\"><span STYLE=\"background-image: url(http://cdn3.infoqstatic.com/statics_s1_20160301-0105u7/styles/mobile/css/img/social_icons/weibo.svg); background-color: rgb(255, 255, 255); background-size: 28px; display: inline-block; width: 28px; height: 28px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; vertical-align: middle; margin-right: 8px; background-position: 50% 50%; background-repeat: no-repeat no-repeat;\"></span>InfoQ中文站官方微博</a></li>\n        \n        \n        \n    \n&Tab;&Tab;&Tab;</ul>\n    \n    \n&Tab;&Tab;&Tab;<div STYLE=\"margin: 0px 10px 10px;\">\n        \n&Tab;&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 26px;\"></h2>\n        \n&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"list-style-type: none; margin: 0px; padding: 0px; display: block; border: 1px solid rgb(219, 219, 234); border-top-left-radius: 12px; border-top-right-radius: 12px; border-bottom-right-radius: 12px; border-bottom-left-radius: 12px; background-color: white;\">\n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234);\" HREF=\"http://www.infoq.com/cn/about-us\">关于我们</a></li>\n            \n            \n                \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234);\" HREF=\"http://www.infoq.com/cn/partners\">合作伙伴</a></li>\n            \n            \n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"display: block;\"><a STYLE=\"color: rgb(51, 51, 51); text-decoration: none; display: block; padding: 10px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234);\" HREF=\"http://www.infoq.com/cn/contribute\">投稿</a></li>\n            \n        \n&Tab;&Tab;&Tab;&Tab;</ul>\n    \n&Tab;&Tab;&Tab;</div>\n    \n    \n&Tab;&Tab;&Tab;<dl STYLE=\"border-top-width: 1px; border-top-style: solid; border-top-color: rgb(219, 219, 234); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(219, 219, 234); padding: 10px; margin: 0px 0px 10px; text-align: center;\">\n        \n&Tab;&Tab;&Tab;&Tab;<dt STYLE=\"text-align: center; margin: 0px; padding: 0px; color: rgb(153, 153, 153);\">提供反馈</dt>\n&Tab;&Tab;&Tab;&Tab;<dd STYLE=\"text-align: center; padding: 0px; margin: 0px 0px 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"mailto:feedback@cn.infoq.com\">feedback@cn.infoq.com</a></dd>\n        \n&Tab;&Tab;&Tab;&Tab;<dt STYLE=\"text-align: center; margin: 0px; padding: 0px; color: rgb(153, 153, 153);\">错误报告</dt>\n&Tab;&Tab;&Tab;&Tab;<dd STYLE=\"text-align: center; padding: 0px; margin: 0px 0px 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"mailto:bugs@cn.infoq.com\">bugs@cn.infoq.com</a></dd>\n        \n&Tab;&Tab;&Tab;&Tab;<dt STYLE=\"text-align: center; margin: 0px; padding: 0px; color: rgb(153, 153, 153);\">商务合作</dt>\n&Tab;&Tab;&Tab;&Tab;<dd STYLE=\"text-align: center; padding: 0px; margin: 0px 0px 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"mailto:sales@cn.infoq.com\">sales@cn.infoq.com</a></dd>\n        \n&Tab;&Tab;&Tab;&Tab;<dt STYLE=\"text-align: center; margin: 0px; padding: 0px; color: rgb(153, 153, 153);\">内容合作</dt>\n&Tab;&Tab;&Tab;&Tab;<dd STYLE=\"text-align: center; padding: 0px; margin: 0px 0px 10px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"mailto:editors@cn.infoq.com\">editors@cn.infoq.com</a></dd>\n        \n&Tab;&Tab;&Tab;&Tab;<dd STYLE=\"text-align: center; padding: 0px; margin: 0px;\"><a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://www.infoq.com/cn/articles/2016-hongbao-weibo\">桌面版</a></dd>\n    \n&Tab;&Tab;&Tab;</dl>\n    \n    \n&Tab;&Tab;&Tab;<p STYLE=\"margin: 0px; text-align: center; padding: 10px 20px; color: rgb(153, 153, 153);\">\n        InfoQ.com及所有内容，版权所有 &copy; 2006-2016 C4Media Inc. InfoQ.com 服务器由 <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://www.contegix.com/\">Contegix</a>提供, 我们最信赖的ISP伙伴。 <br STYLE=\"\"/>\n        <a STYLE=\"color: rgb(34, 101, 169); text-decoration: none;\" HREF=\"http://www.infoq.com/cn/privacypolicy\">隐私政策</a>\n    </p>\n\n&Tab;&Tab;</div>\n\n        \n\n&Tab;&Tab;\n        \n&Tab;&Tab;\n\n\n\n\n\n\n\n\n\n\n\n&Tab;&Tab;<div STYLE=\"background-color: rgb(255, 255, 255); -webkit-box-shadow: rgba(0, 0, 0, 0.498039) 0px 0px 20px; box-shadow: rgba(0, 0, 0, 0.498039) 0px 0px 20px; width: 100%; position: absolute; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; display: none;\">\n&Tab;\n&Tab;&Tab;&Tab;<h2 STYLE=\"font-family: HelveticaNeue-CondensedBold, 'Helvetica Neue Bold', 'Arial Narrow', Helvetica, Arial, sans-serif; font-size: 22px; line-height: 30px; display: block; text-align: center; padding: 7px 0px; margin: 0px; color: rgb(255, 255, 255); background-color: rgb(34, 101, 169); border-top-left-radius: 9px; border-top-right-radius: 9px;\">更新个人资料</h2>&Tab;\n&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;<div STYLE=\"padding: 20px;\">\n&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;<p STYLE=\"margin-top: 0px;\"><strong STYLE=\"font-weight: bold;\">您的个人介绍是最新的么？请确认并更新。</strong></p>&Tab;&Tab;\n&Tab;&Tab;&Tab;\n\n&Tab;&Tab;&Tab;\n\n&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;<ul STYLE=\"margin: 0px; padding: 0px; list-style-type: none;\">\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"position: relative; display: block; margin-bottom: 10px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">E-mail<span STYLE=\"font-weight: bold; color: red; font-size: 22px;\">*</span></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"font-size: 13px; line-height: 16px; margin-bottom: 10px; color: rgb(153, 153, 153); display: block;\">注意：如果要修改您的邮箱，我们将会发送确认邮件到您原来的邮箱。</span>\n&Tab;&Tab;&Tab;&Tab;</li>&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"position: relative; display: block; margin-bottom: 10px;\">&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<strong STYLE=\"font-weight: bold; display: block; margin-bottom: 0.5em;\">公司名称</strong>\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;仍使用  <span STYLE=\"font-weight: bold; color: rgb(32, 134, 66);\"></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;</span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">修改公司名称为：<span STYLE=\"font-weight: bold; color: red; font-size: 22px;\">*</span></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;</li>\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"position: relative; display: block; margin-bottom: 10px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;<strong STYLE=\"font-weight: bold; display: block; margin-bottom: 0.5em;\">您的职位</strong>\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;仍使用 <span STYLE=\"font-weight: bold; color: rgb(32, 134, 66);\"></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;</span>&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">修改公司性质为:<span STYLE=\"font-weight: bold; color: red; font-size: 22px;\">*</span></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: inline-block; box-sizing: border-box; padding: 9px; margin: 0px 0px 10px; white-space: pre; -webkit-appearance: menulist-button; align-items: center; font-family: inherit; font-size: 100%; text-transform: none; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); line-height: 24px; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; width: 100%;\"></div>\n\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"position: relative; display: block; margin-bottom: 10px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;<strong STYLE=\"font-weight: bold; display: block; margin-bottom: 0.5em;\">公司规模</strong>&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"\">仍使用</span> <span STYLE=\"font-weight: bold; color: rgb(32, 134, 66);\"></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">修改公司规模为：<span STYLE=\"font-weight: bold; color: red; font-size: 22px;\"></span></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"\">\n\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"\">\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: inline-block; box-sizing: border-box; padding: 9px; margin: 0px 0px 10px; white-space: pre; -webkit-appearance: menulist-button; align-items: center; font-family: inherit; font-size: 100%; text-transform: none; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); line-height: 24px; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; width: 100%;\"></div>\n\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</div> \n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</div>\n\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"position: relative; display: block; margin-bottom: 10px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;<strong STYLE=\"font-weight: bold; display: block; margin-bottom: 0.5em;\">国家/地区</strong>\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;仍使用 <span STYLE=\"font-weight: bold; color: rgb(32, 134, 66);\"></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;</span>&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">更新国家:<span STYLE=\"font-weight: bold; color: red; font-size: 22px;\"></span></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: inline-block; box-sizing: border-box; padding: 9px; margin: 0px 0px 10px; white-space: pre; -webkit-appearance: menulist-button; align-items: center; font-family: inherit; font-size: 100%; text-transform: none; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); line-height: 24px; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; width: 100%;\">--- 选择您的国家 ---</div>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;仍使用 <span STYLE=\"font-weight: bold; color: rgb(32, 134, 66);\"></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\"><span STYLE=\"\">更新省份:</span></span>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<div STYLE=\"display: inline-block; box-sizing: border-box; padding: 9px; margin: 0px 0px 10px; white-space: pre; -webkit-appearance: menulist-button; align-items: center; font-family: inherit; font-size: 100%; text-transform: none; color: rgb(51, 51, 51); border: 1px solid rgb(204, 204, 204); line-height: 24px; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; width: 100%;\"></div>\n\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"position: relative; display: block; margin-bottom: 10px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;订阅InfoQ每周精要\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</span>\n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;<li STYLE=\"position: relative; display: block; margin-bottom: 10px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;<span STYLE=\"display: block; margin-bottom: 4px;\">\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;订阅InfoQ行业用户邮件通知&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;&Tab;&Tab;</span>\n&Tab;&Tab;&Tab;&Tab;&Tab;</li>\n&Tab;&Tab;&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;&Tab;</ul>&Tab;&Tab;&Tab;\n&Tab;&Tab;&Tab;\n&Tab;&Tab;\n&Tab;&Tab;&Tab;</div>\n&Tab;&Tab;\n&Tab;\n\n&Tab;&Tab;</div>\n\n        \n\n\n\n\n\n\n\n\n    \n\n\n\n\n    \n\n\n\n        \n\n        \n            \n            \n        \n        \n    \n\n\n&Tab;</div>\n\n</en-note>      ",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "checksum": "721a2e4343875128d721ad42f642f1b7d1008c43b9dc042d5e6f065c90761bf9",
        "path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/解密微博红包：架构、防刷、监控和资源调度.html"
      }
    },
    {
      "id": "ed96922d-3839-4fb8-95fc-298000180c78",
      "note_id": "838ce986-aaf3-4f75-b8d4-9f775839564c",
      "variant_type": "clean_text",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-09T20:05:15.426322Z",
      "content": "---\ntitle: 解密微博红包：架构、防刷、监控和资源调度\nupdated: 2016-03-19 05:07:14Z\ncreated: 2016-03-19 05:07:14Z\nsource: http://www.infoq.com/cn/articles/2016-hongbao-weibo\nlatitude: 46.16528942\nlongitude: 14.35196417\naltitude: 0.0000\n---\n\n中文\n\nChoose language\n\n中文\n\nEn\n\n日本\n\nFr\n\nBr\n\nSearch InfoQ\n\n欢迎，\nguest\n!\n\n我的阅读清单\n\n偏好设置\n\n注销\n\n登录\n\nE-mail:\n\n密码:\n\n忘记密码？\n\n登陆为:\n\n使用Microsoft账号登录\n\n使用Google账号登录\n\n使用Weibo账号登录\n\n使用QQ账号登录\n\n新的用户:\n\n立即注册\n\nInfoQ账号使用的E-mail:\n\nBack to login\n\nInfoQ contents\n\n新闻\n\n文章\n\n演讲\n\n访谈\n\n迷你书\n\n调查\n\n领域\n\n语言 & 开发\n\n显示全部\n\nJava\n\nClojure\n\nScala\n\n.Net\n\n移动\n\nAndroid\n\niOS\n\nHTML 5\n\nJavaScript\n\n函数式编程\n\nWeb API\n\n架构 & 设计\n\n显示全部\n\n架构\n\n企业架构\n\n性能和可伸缩性\n\n设计\n\n案例分析\n\n设计模式\n\n安全\n\n数据科学\n\n显示全部\n\n大数据\n\nNoSQL\n\n关系型数据库\n\n文化 & 方法\n\n显示全部\n\nAgile\n\n领导能力\n\n团队协作\n\n测试\n\n用户体验\n\nScrum\n\n精益\n\nDevOps\n\n显示全部\n\n持续交付\n\n自动化操作\n\n云计算\n\n首页\n\nQCon Conferences\n\n关于我们\n\n关于您\n\n投稿\n\nPurpose Index\n\n                解密微博红包：架构、防刷、监控和资源调度\n               \n                作者\n               \n柯立志\n\n                发布于\n                2016年3月1日\n           \n添加到\n阅读列表\n\n添加至阅\n读列表\n\n查看我的\n阅读列表\n\nWe failed to create the bookmark.\nIf the behaviour persists please contact us.\n\n编者按\n\n与传统意义上的红包相比，近两年火起来的“红包”，似乎才是如今春节的一大重头戏。历经上千年时代传承与变迁，春节发红包早已成为历史沉淀的文化习俗，融入了民族的血脉。按照各家公布的数据，除夕全天\n微信用户\n红包总发送量达到10.1亿次，摇一摇互动量达到110亿次，红包峰值发送量为8.1亿次/分钟。而\n支付宝的红包\n收发总量达到2.4亿次，参与人数达到6.83亿人次，红包总金额40亿元，峰值为8.83亿次/分钟。春晚直播期间讨论春晚的微博达到5191万条，网友互动量达到1.15亿，网友抢微博红包的总次数超过8亿次。\n\n为此，InfoQ策划了“春节红包”系列文章，以期为读者剖析各大平台的红包活动背后的技术细节。本文为微博篇。\n\n随着互联网的发展，打破了以往传统的发红包，带给了红包全新的玩法。微博红包已经成为用户给粉丝拜年的一种途径，土豪版成为土豪刷存在感的方式。每年的红包大战都是用户的现金盛宴，对于整个系统却是残酷的考验。\n\n微博有8亿注册用户，单日活跃用户数1.34亿的社交平台。红包在微博平台上运行，针对所有的微博用户开放，微博所有用户都可参与红包活动。微博红包有如下特点：\n\n红包价值高、种类多、覆盖用户广，亿级别用户参与。\n\n半点准时开抢，高并发访问、瞬间峰值高，每分钟带来上亿次的抢红包峰值。\n\n请求快速响应，更新亿级用户中奖状态及红包状态。\n\n单个红包数额大。\n\n春晚当天红包总价值超过10亿，有1.34亿用户参与，产生了8亿多次的抢红包行为，其中并发量为平时峰值的10倍左右。在服务器数量一定的情况下，如何构建高并发操作、瞬间峰值高的稳定服务？对于团队和架构师都是一个极大的挑战。这时候系统的架构尤为重要！\n\n红包架构\n\n微博红包支持每秒几十万次的操作，应对突发性的热点事件，快速响应，高内聚低耦合的服务成了架构首先要考虑的因素。\n\n(点击放大图像)\n\n微博是社交型应用，红包在用户数据、关系、抢红包等结构上存在着各种各样复杂的依赖，这些依赖相比其它应用来说，调用频率更高，性能要求也更高。\n\n如上图所示，有多个应用模块接入红包的服务层，服务层由多个节点组成，每个节点对应相应的功能并且相对独立。代码模块的使用和组织上相对独立，保证主功能的快速和稳定，将附属的新功能分离在独立模块中。其中红色虚线框内为核心的功能模块，是重点需要保护的功能。\n\n微博红包提供获取红包属性（红包金额、红包设置、红包状态、获取抽取结果列表、拆包，抽奖等）接口。服务层调用红包SDK相应的API，会根据应用层逻辑需求提供数据和定制化得数据，完成前端完成交互，达到应用层需要展现的效果。\n\n防刷策略\n\n微博红包有别于微信用户发出的红包，微信用户发出的红包是针对自己所认识的朋友或者已存在于微信群的用户；微博红包是针对于微博所有用户的红包，通过分析参与红包的用户数据每年都会产生一些囤积大量账号准备在春晚大发横财的公司和个人。如何防止微博红包被自动注册或者通过转卖账号来领取红包？这成为面对我们需要解决的一大问题。\n\n(点击放大图像)\n\n微博通过基于用户在微博上的行为分析，通过登录，发微博，身份验证等方面来进行分析。主要有：\n\n用户注册：通过用户行为分析来识别机器注册的用户，则注册环节进行拦截。\n\n用户登录：分析用户登录的行为，通过验证码，身份验证以及手机号验证等措施来提高机器自动登录的门槛。\n\n账号质量：通过实名认证，微博的动态等方面来计算出用户的质量。\n\n参与红包：红包战场一贯是刷奖账号的获利主战场， 通过用户平时在微博的行为、属性以及实时的登录状态和常用设备来进行分析，判断是否是正常账号来确定是否可以中奖。\n\n完善的监控\n\n红包系统是一个大而规则复杂的系统，系统越大，依赖的资源越多，也就越容易出现各种各样的问题。为了给提供稳定运行的服务，必须要能时刻知晓各个资源当前的运行状态。并且在系统出现异常之前或者出现异常的时候，对问题进行排查和定位。\n\n(点击放大图像)\n\n如上图所示，完善的监控系统，为微博红包顺利度过春晚提供了很好的保障。主要涉及的监控如下：\n\n1、应用层接口响应时间监控\n\n通过实时的分析access log日志，以HTTP code和响应时间维度实时统计出接口的状态和性能，根据占比来查看接口的健康程度。\n\n2、服务层各模块性能监控\n\n在模块中记录开始时间和结束时间，每次处理完计算出模块的耗时，通过这种方式很好的发现各个模块是否正常。    \n\n3、网络层监控\n\n微博红包的出口网络是一个单独的app池，出口带宽使用到80%的时候网络稳定性就可能受到影响。通过计算后端服务器输出计算出带宽，以便能够做到及时响应扩容。\n\n4、资源层的监控\n\n对各种资源的监控，比如Redis、MySQL、MC等资源的连接时间、状态和操作的实时统计分析，快速定位是否存在资源瓶颈。\n\n5、服务器的性能监控\n\n通过运维监控系统，对服务器的CPU、内存使用情况，做到了能够观察每台服务器具体的运行情况。\n\n6、系统错误日志的监控\n\n系统错误监控包括服务器负载，服务进程状态，资源连接，网络连接出现的问题，实时通过手机，邮件和私信知道。为快速响应创造了条件。\n\n弹性资源管理和调度\n\n1、故障的秒级切换\n\n微博红包服务部署在了三个机房（包括云服务），任何一个机房如果出现网络或者其它不可预测的问题可以在几秒钟之内将服务切换到其它机房。\n\n2、资源的相互独立\n\n资源的相互独立，让资源的可扩展性变得容易。而且使得各个服务之间交叉影响达到了最小。\n\n3、引入阿里云做为第三机房，使用Docker快速部署服务\n\n红包的核心服务主要分布在 2 个机房，两者互相做为灾难备份用途，为应对超预期的峰值，引入阿里云做为第三机房。使用定制化的红包Docker快速部署服务来实现弹性调度架构。通过Docker自动化操作大规模集群，进行弹性调度资源的任务，实现快速部署服务来应付超预期的峰值。\n\n系统的挑战和性能优化\n\n为了保证用户体验，微博红包需要解决以下几个问题：\n\n系统性能的可靠性\n\n关键节点的可用性\n\n如何应对突发热点\n\n业务频繁迭代的处理\n\n1、系统架构的升级\n\n模块的独立化，避免出现模块间的相互影响。\n\nnginx+lua的使用，使得服务器的QPS有了数量级的提升，同时服务器集群做到了秒级重启。\n\n2、修枝剪页\n\n减少对于系统外部的依赖，梳理完整的调用关系图。非核心功能使用异步调用，合并相关的调用，去掉重复的调用。保证核心调用逻辑，避免非核心业务影响核心业务。\n\n3、多级缓存\n\n服务端本地缓存，使用nginx本身缓存和服务器的L0缓存，来提升模块的响应速度，做到了90%以上核心接口的响应时间在50ms以内，减少了进程等待时间，提升了服务器的处理速度。\n\n一年一度的各大平台抢红包还会延续下去，这是一个斗智斗勇的过程，在服务器有限的情况下每一次与峰值的对抗都是对技术一次极大的挑战，每次挑战都是带来技术上的成长和收获。\n\n感谢\n郭蕾\n对本文的策划和审校。\n\n给InfoQ中文站投稿或者参与内容翻译工作，请邮件至\neditors@cn.infoq.com\n。也欢迎大家通过新浪微博（\n\n，\n\n），微信（微信号：\nInfoQChina\n）关注我们。\n\n领域\n\n架构 & 设计\n\n语言 & 开发\n\n专栏\n\n微博\n\n高并发\n\n云服务\n\n运维\n\n春节红包\n\n相关赞助商\n\nQCon北京2016大会，4月21-23日，北京·国际会议中心，\n精彩内容\n邀您参与！\n\n相关内容\n\n新浪微博高可用服务保障体系演进\n\n新浪微博应对峰值压力的混合云架构实践\n\n李庆丰：新浪微博服务高可用新技术、新架构的尝试\n\n微博推荐架构的演进\n\n微博背后的那些算法\n\n讨论!\n\n告诉我们您的想法\n\n主题:\n\n信息:\n\n允许的HTML标签: a,b,br,blockquote,i,li,pre,u,ul,p\n\n当有人回复此评论时请E-mail通知我\n\n0 社区评论\n\n                            邮件订阅这个讨论\n                       \n您好，朋友！\n\n您需要\n注册一个InfoQ账号\n 才能进行评论。在您完成注册后还需要进行一些设置。\n\n获得来自InfoQ的更多体验。\n\nInfoQ每周精要\n\n通过个性化定制的新闻邮件、RSS Feeds和InfoQ业界邮件通知，保持您对感兴趣的社区内容的时刻关注。\n\n属于您的个性化RSS\n\nInfoQ中文站官方微博\n\n关于我们\n\n合作伙伴\n\n投稿\n\n提供反馈\n\nfeedback@cn.infoq.com\n\n错误报告\n\nbugs@cn.infoq.com\n\n商务合作\n\nsales@cn.infoq.com\n\n内容合作\n\neditors@cn.infoq.com\n\n桌面版\n\n        InfoQ.com及所有内容，版权所有 © 2006-2016 C4Media Inc. InfoQ.com 服务器由\nContegix\n提供, 我们最信赖的ISP伙伴。\n\n隐私政策\n\n更新个人资料\n\n您的个人介绍是最新的么？请确认并更新。\n\nE-mail\n*\n\n注意：如果要修改您的邮箱，我们将会发送确认邮件到您原来的邮箱。\n\n公司名称\n\n 仍使用 \n\n修改公司名称为：\n*\n\n您的职位\n\n 仍使用\n\n修改公司性质为:\n*\n\n公司规模\n\n仍使用\n\n修改公司规模为：\n\n国家/地区\n\n 仍使用\n\n更新国家:\n\n--- 选择您的国家 ---\n\n 仍使用\n\n更新省份:\n\n 订阅InfoQ每周精要\n\n 订阅InfoQ行业用户邮件通知",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "language": "zh-cn",
        "length": 5009,
        "rule_count": 3,
        "applied_rules": [
          {
            "rule_id": "social_handles",
            "description": "Drop standalone social handles and hashtags",
            "note": "removed social handle only lines"
          },
          {
            "rule_id": "dedupe_lines",
            "description": "Collapse adjacent duplicate lines",
            "note": "collapsed duplicate adjacent lines"
          },
          {
            "rule_id": "whitespace",
            "description": "Normalize whitespace",
            "note": "collapsed whitespace"
          }
        ]
      }
    }
  ],
  "extractions": [],
  "journal": {
    "id": "dbedc653-a8d1-4d59-847c-c179b5f8d0b3",
    "note_id": "838ce986-aaf3-4f75-b8d4-9f775839564c",
    "stage": "ingest",
    "agent_id": "evernote_ingest:v0",
    "started_at": "2025-11-09T20:05:15.426327Z",
    "finished_at": "2025-11-09T20:05:15.426327Z",
    "status": "success",
    "input_ref": {
      "task_id": "d68053a8-b447-4b79-99fd-a7e2ae77192a",
      "source_path": "/Users/tang/workbench/article-classifier/backups/2023年6月/IT技术/解密微博红包：架构、防刷、监控和资源调度.html",
      "checksum": "721a2e4343875128d721ad42f642f1b7d1008c43b9dc042d5e6f065c90761bf9"
    },
    "output_ref": {
      "ingest_source": "b399c554-df55-4cb0-afa6-2670b0c21299",
      "note": "838ce986-aaf3-4f75-b8d4-9f775839564c",
      "variants": [
        "c850680a-5031-4ed1-b1eb-89b821812de8",
        "ed96922d-3839-4fb8-95fc-298000180c78"
      ]
    },
    "error_detail": null
  }
}