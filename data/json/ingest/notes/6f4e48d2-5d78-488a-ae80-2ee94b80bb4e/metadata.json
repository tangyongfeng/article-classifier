{
  "ingest_source": {
    "id": "88f4a222-447b-49a3-94c9-670f79996946",
    "source_type": "evernote_html",
    "source_path": "backups/2023年6月/中彩相关/扩展性测试总结.html",
    "collected_at": "2025-11-10T15:43:34.859369Z",
    "external_id": null,
    "title_hint": null,
    "language_hint": "zh-cn",
    "captured_at": null,
    "checksum": "50fcedb71d47bd755782f85fb0adecf1deae7eecbbf1870a718b3d1923b0d4c9",
    "status": "pending",
    "notes": {
      "batch_id": "phase2-backfill-202306"
    }
  },
  "note": {
    "id": "6f4e48d2-5d78-488a-ae80-2ee94b80bb4e",
    "ingest_source_id": "88f4a222-447b-49a3-94c9-670f79996946",
    "canonical_title": "扩展性测试总结",
    "language": "zh-cn",
    "ingested_at": "2025-11-10T15:43:34.859372Z",
    "created_at": null,
    "status": "active",
    "importance": 0,
    "attributes": {
      "source_filename": "扩展性测试总结.html"
    }
  },
  "variants": [
    {
      "id": "512baf8f-011c-4ec3-8f23-caa2f935d02f",
      "note_id": "6f4e48d2-5d78-488a-ae80-2ee94b80bb4e",
      "variant_type": "raw_html",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-10T15:43:34.859375Z",
      "content": "---\ntitle: 扩展性测试总结\nupdated: 2013-04-18 18:14:33Z\ncreated: 2013-04-17 15:03:36Z\n---\n\n\n\n\n<en-note STYLE=\"word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;\"><div>机器结构图，|为逻辑分区，||为整机单位</div><div>|1|2|3|cf||4|5|6cf||7|8|9|</div><div>之前的启动顺序是1,2,3,4,5,6，启动到2的时候系统的扩展性大幅降低，判断应该是lpr对内存或者cache的影响，后来调整启动顺序，改为1,4,7,2,5,8,3,6,9 ，现象消失，说明之前的判断是正确的。</div><div>虽然到2的时候系统性能降低，但是按照这个情况的记录来看，其实到了9个节点的时候和现在的情况依然相近，所以只是阶段性的影响而已。在后来更复杂的表中，发现争抢主要实在lpr共用的情况下，如果是独立的机器应该没有类似的问题。尤其是6到9节点之间的过渡数据来看，是很平滑的。</div><div>50%交叉的数据表现最好，两个原因：1、有些我们没有控制好的东西。2、不管交叉多少，其实对系统的影响不是那么大。</div><div>case 6中login 和cancel的比率越多，线性度越差的原因是。case6和case5的cpu使用率不同，case6中使用70%的cpu使用率，后来的测试都是用50%的cpu使用率。实际上造成瓶颈的是io，因为io的速度慢，所以cpu都是在等待，而提高io的性能会减少线性度的降低，一方面是提高磁盘数量，另外一方面更重要的是增加CU的数目。</div><div>case8比case5好的原因：case8的login很多，也有对应的logout，能够清除对应的冗余数据。所以在真实运营过程中，很关键的，也需要定时清理数据。</div><div><br/></div>\ncase 8: &nbsp;5%register 5%login 90bet 71%read &nbsp;29%write 第一个图表是以交易笔数为单位，第二个图是按照节点数，share0 的话，扩展系数到9.66666，第三个表节点的扩展系数。\n<div><br/></div><div>登录对系统的影响最大，一方面要建立新的索引，另外一方面又要删掉如果已经存在的索引。那是否在另外的机器上负责登录会不会好些呢？答案是不会，因为如果在这台机器上登录，但是接下来的会话又由其他节点来完成的话，浪费了之前花了很大成本导入到内存的cache信息。<br/>\n&nbsp;\n<div><br/><div><br/></div></div></div></en-note>      ",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "checksum": "50fcedb71d47bd755782f85fb0adecf1deae7eecbbf1870a718b3d1923b0d4c9",
        "path": "backups/2023年6月/中彩相关/扩展性测试总结.html"
      }
    },
    {
      "id": "cb371376-4615-49cb-9662-608099cff2b2",
      "note_id": "6f4e48d2-5d78-488a-ae80-2ee94b80bb4e",
      "variant_type": "clean_text",
      "version": 1,
      "created_by": "evernote_ingest:v0",
      "created_at": "2025-11-10T15:43:34.859377Z",
      "content": "---\ntitle: 扩展性测试总结\nupdated: 2013-04-18 18:14:33Z\ncreated: 2013-04-17 15:03:36Z\n---\n\n机器结构图，|为逻辑分区，||为整机单位\n|1|2|3|cf||4|5|6cf||7|8|9|\n之前的启动顺序是1,2,3,4,5,6，启动到2的时候系统的扩展性大幅降低，判断应该是lpr对内存或者cache的影响，后来调整启动顺序，改为1,4,7,2,5,8,3,6,9 ，现象消失，说明之前的判断是正确的。\n虽然到2的时候系统性能降低，但是按照这个情况的记录来看，其实到了9个节点的时候和现在的情况依然相近，所以只是阶段性的影响而已。在后来更复杂的表中，发现争抢主要实在lpr共用的情况下，如果是独立的机器应该没有类似的问题。尤其是6到9节点之间的过渡数据来看，是很平滑的。\n50%交叉的数据表现最好，两个原因：1、有些我们没有控制好的东西。2、不管交叉多少，其实对系统的影响不是那么大。\ncase 6中login 和cancel的比率越多，线性度越差的原因是。case6和case5的cpu使用率不同，case6中使用70%的cpu使用率，后来的测试都是用50%的cpu使用率。实际上造成瓶颈的是io，因为io的速度慢，所以cpu都是在等待，而提高io的性能会减少线性度的降低，一方面是提高磁盘数量，另外一方面更重要的是增加CU的数目。\ncase8比case5好的原因：case8的login很多，也有对应的logout，能够清除对应的冗余数据。所以在真实运营过程中，很关键的，也需要定时清理数据。\n\ncase 8:  5%register 5%login 90bet 71%read  29%write 第一个图表是以交易笔数为单位，第二个图是按照节点数，share0 的话，扩展系数到9.66666，第三个表节点的扩展系数。\n\n登录对系统的影响最大，一方面要建立新的索引，另外一方面又要删掉如果已经存在的索引。那是否在另外的机器上负责登录会不会好些呢？答案是不会，因为如果在这台机器上登录，但是接下来的会话又由其他节点来完成的话，浪费了之前花了很大成本导入到内存的cache信息。",
      "content_path": null,
      "diff_base_variant_id": null,
      "metadata": {
        "language": "zh-cn",
        "length": 929,
        "rule_count": 0,
        "applied_rules": []
      }
    }
  ],
  "extractions": [
    {
      "id": "9aef13ff-e5e4-4bdd-b55f-0a65848303b1",
      "note_id": "6f4e48d2-5d78-488a-ae80-2ee94b80bb4e",
      "extractor": "llm_enhance:v0#qwen3:30b",
      "payload": {
        "summary": "系统扩展性测试显示调整机器启动顺序可优化性能，CPU和IO是关键瓶颈，登录操作影响显著，需定期清理数据以维持线性度。",
        "keywords": [
          "扩展性",
          "启动顺序",
          "CPU使用",
          "IO瓶颈",
          "登录操作"
        ],
        "action_items": [
          "无"
        ],
        "source": "qwen3:30b",
        "category_path": [
          "商务",
          "技术创新"
        ],
        "new_category_suggestion": null
      },
      "version": 1,
      "created_at": "2025-11-11T23:04:15.368720Z",
      "created_by": "llm_enhance:v0",
      "quality_score": 0.278
    }
  ],
  "journal": {
    "id": "9d318635-66ec-46e3-a6db-6057092438ab",
    "note_id": "6f4e48d2-5d78-488a-ae80-2ee94b80bb4e",
    "stage": "ingest",
    "agent_id": "evernote_ingest:v0",
    "started_at": "2025-11-10T15:43:34.859382Z",
    "finished_at": "2025-11-10T15:43:34.859382Z",
    "status": "success",
    "input_ref": {
      "task_id": "1edd11af-bb88-42b7-9a8e-af919c6148d7",
      "source_path": "backups/2023年6月/中彩相关/扩展性测试总结.html",
      "checksum": "50fcedb71d47bd755782f85fb0adecf1deae7eecbbf1870a718b3d1923b0d4c9"
    },
    "output_ref": {
      "ingest_source": "88f4a222-447b-49a3-94c9-670f79996946",
      "note": "6f4e48d2-5d78-488a-ae80-2ee94b80bb4e",
      "variants": [
        "512baf8f-011c-4ec3-8f23-caa2f935d02f",
        "cb371376-4615-49cb-9662-608099cff2b2"
      ]
    },
    "error_detail": null
  },
  "llm": {
    "status": "success",
    "model": "qwen3:30b",
    "updated_at": "2025-11-11T23:04:15.368539Z",
    "latency_seconds": 24.020449792034924,
    "attempts": 1,
    "summary": {
      "summary": "系统扩展性测试显示调整机器启动顺序可优化性能，CPU和IO是关键瓶颈，登录操作影响显著，需定期清理数据以维持线性度。",
      "keywords": [
        "扩展性",
        "启动顺序",
        "CPU使用",
        "IO瓶颈",
        "登录操作"
      ],
      "action_items": [
        "无"
      ],
      "source": "qwen3:30b",
      "category_path": [
        "商务",
        "技术创新"
      ],
      "new_category_suggestion": null
    },
    "quality": {
      "score": 0.278,
      "metrics": {
        "input_chars": 929.0,
        "input_lines": 14.0,
        "summary_chars": 58.0,
        "summary_coverage_ratio": 0.062,
        "keyword_hit_rate": 0.6,
        "action_item_count": 1.0,
        "unique_summary_sentences": 1.0,
        "estimated_read_seconds": 55.7
      }
    }
  }
}