---
title: 无标题笔记
updated: 2021-01-29 20:17:30Z
created: 2021-01-29 20:16:47Z
author: tangyongfeng@gmail.com
---


<en-note><h1><span STYLE="font-weight: bold;">QEMU编译指南
</span></h1><h2><span STYLE="font-weight: bold;">一、下载
</span></h2><div><span STYLE="font-weight: bold;-en-paragraph:true;">从官网下载：</span></div><div><span STYLE="font-style: normal; font-weight: 400;">wget</span> <a HREF="https://download.qemu.org/qemu-5.2.0.tar.xz">https://download.qemu.org/qemu-5.2.0.tar.xz</a></div><div><span STYLE="font-style: normal; font-weight: 400;">tar</span> xvJf qemu-5.2.0.tar.xz</div><div><span STYLE="font-style: normal; font-weight: 400;">cd</span> qemu-5.2.0</div><div>1</div><div>2</div><div>3</div><div><span STYLE="font-weight: bold;-en-paragraph:true;">从GitHub上下载：</span></div><div><span STYLE="font-style: normal; font-weight: 400;">git</span> clone <a HREF="https://git.qemu.org/git/qemu.git">https://git.qemu.org/git/qemu.git</a></div><div><span STYLE="font-style: normal; font-weight: 400;">cd</span> qemu</div><div><span STYLE="font-style: normal; font-weight: 400;">git</span> submodule init</div><div><span STYLE="font-style: normal; font-weight: 400;">git</span> submodule update --recursive</div><div>1</div><div>2</div><div>3</div><div>4</div><h2><span STYLE="font-weight: bold;">二、安装ninja
</span></h2><div><span STYLE="-en-paragraph:true;">Ninja 是Google的一名程序员推出的注重速度的构建工具，一般在Unix/Linux上的程序通过make/makefile来构建编译，而Ninja通过将编译任务并行组织，大大提高了构建速度，而qemu现在采用的是基于ninja的构建系统，所以我们得先安装ninja
</span></div><div><span STYLE="font-weight: bold;-en-paragraph:true;">构造Ninja可使用CMake或python，需要先安装re2c：</span></div><div>apt <span STYLE="font-style: normal; font-weight: 400;">install</span> re2c</div><div>1</div><div><span STYLE="-en-paragraph:true;">re2c安装成功之后开始Ninja安装。
</span></div><div><span STYLE="font-weight: bold;-en-paragraph:true;">Ninja编译：</span></div><div><span STYLE="font-style: normal; font-weight: 400;">git</span> clone <a HREF="git://github.com/ninja-build/ninja.git">git://github.com/ninja-build/ninja.git</a> <span STYLE="font-style: normal; font-weight: 400;">&amp;&amp;</span> <span STYLE="font-style: normal; font-weight: 400;">cd</span> ninja</div><div>./configure.py --bootstrap</div><div><span STYLE="font-style: normal; font-weight: 400;">cp</span> ninja /usr/bin/</div><div>1</div><div>2</div><div>3</div><div><span STYLE="font-weight: bold;-en-paragraph:true;">安装成功之后使用</span><span STYLE="font-weight: bold;-en-paragraph:true;">ninja --version</span><span STYLE="font-weight: bold;-en-paragraph:true;">可查看安装的版本：</span></div><div>ninja --version</div><div>1.9.0</div><div>1</div><div>2</div><h2><span STYLE="font-weight: bold;">三、编译QEMU
</span></h2><div><span STYLE="font-weight: bold;-en-paragraph:true;">安装依赖：</span></div><div>apt install pkg-config libglib2.0-dev libmount-dev python3 python3-pip python3-dev git libssl-dev libffi-dev build-essential autoconf automake libfreetype6-dev libtheora-dev libtool libvorbis-dev pkg-config texinfo zlib1g-dev unzip cmake yasm libx264-dev libmp3lame-dev libopus-dev libvorbis-dev libxcb1-dev libxcb-shm0-dev libxcb-xfixes0-dev pkg-config texinfo wget zlib1g-dev libpixman-1-0-dev</div><div>1</div><div><span STYLE="font-weight: bold;-en-paragraph:true;">编译：</span></div><div>./configure</div><div><span STYLE="font-style: normal; font-weight: 400;">make</span></div><div>1</div><div>2</div><h2><span STYLE="font-weight: bold;">四、安装QEMU
</span></h2><div><span STYLE="font-style: normal; font-weight: 400;">make</span> <span STYLE="font-style: normal; font-weight: 400;">install</span> </div><div>1</div><div><span STYLE="font-weight: bold;-en-paragraph:true;">查看安装版本：</span></div><div>root@60247decd218:~/qemu/qemu-5.2.0<span STYLE="font-style: italic; font-weight: 400;"># qemu-arm --version</span></div><div>qemu-arm version 5.2.0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div><div>1</div><div>2</div><h2><span STYLE="font-weight: bold;">五、容易出现的错误
</span></h2><h3><span STYLE="font-weight: bold;">5.1 ERROR: pkg-config binary &lsquo;pkg-config&rsquo; not found
</span></h3><div>apt <span STYLE="font-style: normal; font-weight: 400;">install</span> pkg-config</div><div>1</div><h3><span STYLE="font-weight: bold;">5.2 ERROR: glib-2.48 gthread-2.0 is required to compile QEMU
</span></h3><div>apt-get install libglib2.0-dev</div><div>1</div><h3><span STYLE="font-weight: bold;">5.3 ERROR: Dependency &ldquo;pixman-1&rdquo; not found, tried pkgconfig
</span></h3><div>apt-get install libmount-dev</div></en-note>      